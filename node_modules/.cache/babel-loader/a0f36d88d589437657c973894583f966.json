{"ast":null,"code":"require(\"core-js/modules/es.array.push.js\");\n/*\n * Chartkick.js\n * Create beautiful charts with one line of JavaScript\n * https://github.com/ankane/chartkick.js\n * v3.2.1\n * MIT License\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = global || self, global.Chartkick = factory());\n})(this, function () {\n  'use strict';\n\n  function isArray(variable) {\n    return Object.prototype.toString.call(variable) === \"[object Array]\";\n  }\n  function isFunction(variable) {\n    return variable instanceof Function;\n  }\n  function isPlainObject(variable) {\n    // protect against prototype pollution, defense 2\n    return Object.prototype.toString.call(variable) === \"[object Object]\" && !isFunction(variable) && variable instanceof Object;\n  }\n\n  // https://github.com/madrobby/zepto/blob/master/src/zepto.js\n  function extend(target, source) {\n    var key;\n    for (key in source) {\n      // protect against prototype pollution, defense 1\n      if (key === \"__proto__\") {\n        continue;\n      }\n      if (isPlainObject(source[key]) || isArray(source[key])) {\n        if (isPlainObject(source[key]) && !isPlainObject(target[key])) {\n          target[key] = {};\n        }\n        if (isArray(source[key]) && !isArray(target[key])) {\n          target[key] = [];\n        }\n        extend(target[key], source[key]);\n      } else if (source[key] !== undefined) {\n        target[key] = source[key];\n      }\n    }\n  }\n  function merge(obj1, obj2) {\n    var target = {};\n    extend(target, obj1);\n    extend(target, obj2);\n    return target;\n  }\n  var DATE_PATTERN = /^(\\d\\d\\d\\d)(-)?(\\d\\d)(-)?(\\d\\d)$/i;\n\n  // https://github.com/Do/iso8601.js\n  var ISO8601_PATTERN = /(\\d\\d\\d\\d)(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)?(:)?(\\d\\d)?([.,]\\d+)?($|Z|([+-])(\\d\\d)(:)?(\\d\\d)?)/i;\n  var DECIMAL_SEPARATOR = String(1.5).charAt(1);\n  function parseISO8601(input) {\n    var day, hour, matches, milliseconds, minutes, month, offset, result, seconds, type, year;\n    type = Object.prototype.toString.call(input);\n    if (type === \"[object Date]\") {\n      return input;\n    }\n    if (type !== \"[object String]\") {\n      return;\n    }\n    matches = input.match(ISO8601_PATTERN);\n    if (matches) {\n      year = parseInt(matches[1], 10);\n      month = parseInt(matches[3], 10) - 1;\n      day = parseInt(matches[5], 10);\n      hour = parseInt(matches[7], 10);\n      minutes = matches[9] ? parseInt(matches[9], 10) : 0;\n      seconds = matches[11] ? parseInt(matches[11], 10) : 0;\n      milliseconds = matches[12] ? parseFloat(DECIMAL_SEPARATOR + matches[12].slice(1)) * 1000 : 0;\n      result = Date.UTC(year, month, day, hour, minutes, seconds, milliseconds);\n      if (matches[13] && matches[14]) {\n        offset = matches[15] * 60;\n        if (matches[17]) {\n          offset += parseInt(matches[17], 10);\n        }\n        offset *= matches[14] === \"-\" ? -1 : 1;\n        result -= offset * 60 * 1000;\n      }\n      return new Date(result);\n    }\n  }\n  // end iso8601.js\n\n  function negativeValues(series) {\n    var i, j, data;\n    for (i = 0; i < series.length; i++) {\n      data = series[i].data;\n      for (j = 0; j < data.length; j++) {\n        if (data[j][1] < 0) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n  function toStr(n) {\n    return \"\" + n;\n  }\n  function toFloat(n) {\n    return parseFloat(n);\n  }\n  function toDate(n) {\n    var matches, year, month, day;\n    if (typeof n !== \"object\") {\n      if (typeof n === \"number\") {\n        n = new Date(n * 1000); // ms\n      } else {\n        n = toStr(n);\n        if (matches = n.match(DATE_PATTERN)) {\n          year = parseInt(matches[1], 10);\n          month = parseInt(matches[3], 10) - 1;\n          day = parseInt(matches[5], 10);\n          return new Date(year, month, day);\n        } else {\n          // str\n          // try our best to get the str into iso8601\n          // TODO be smarter about this\n          var str = n.replace(/ /, \"T\").replace(\" \", \"\").replace(\"UTC\", \"Z\");\n          n = parseISO8601(str) || new Date(n);\n        }\n      }\n    }\n    return n;\n  }\n  function toArr(n) {\n    if (!isArray(n)) {\n      var arr = [],\n        i;\n      for (i in n) {\n        if (n.hasOwnProperty(i)) {\n          arr.push([i, n[i]]);\n        }\n      }\n      n = arr;\n    }\n    return n;\n  }\n  function jsOptionsFunc(defaultOptions, hideLegend, setTitle, setMin, setMax, setStacked, setXtitle, setYtitle) {\n    return function (chart, opts, chartOptions) {\n      var series = chart.data;\n      var options = merge({}, defaultOptions);\n      options = merge(options, chartOptions || {});\n      if (chart.hideLegend || \"legend\" in opts) {\n        hideLegend(options, opts.legend, chart.hideLegend);\n      }\n      if (opts.title) {\n        setTitle(options, opts.title);\n      }\n\n      // min\n      if (\"min\" in opts) {\n        setMin(options, opts.min);\n      } else if (!negativeValues(series)) {\n        setMin(options, 0);\n      }\n\n      // max\n      if (opts.max) {\n        setMax(options, opts.max);\n      }\n      if (\"stacked\" in opts) {\n        setStacked(options, opts.stacked);\n      }\n      if (opts.colors) {\n        options.colors = opts.colors;\n      }\n      if (opts.xtitle) {\n        setXtitle(options, opts.xtitle);\n      }\n      if (opts.ytitle) {\n        setYtitle(options, opts.ytitle);\n      }\n\n      // merge library last\n      options = merge(options, opts.library || {});\n      return options;\n    };\n  }\n  function sortByTime(a, b) {\n    return a[0].getTime() - b[0].getTime();\n  }\n  function sortByNumberSeries(a, b) {\n    return a[0] - b[0];\n  }\n  function sortByNumber(a, b) {\n    return a - b;\n  }\n  function isMinute(d) {\n    return d.getMilliseconds() === 0 && d.getSeconds() === 0;\n  }\n  function isHour(d) {\n    return isMinute(d) && d.getMinutes() === 0;\n  }\n  function isDay(d) {\n    return isHour(d) && d.getHours() === 0;\n  }\n  function isWeek(d, dayOfWeek) {\n    return isDay(d) && d.getDay() === dayOfWeek;\n  }\n  function isMonth(d) {\n    return isDay(d) && d.getDate() === 1;\n  }\n  function isYear(d) {\n    return isMonth(d) && d.getMonth() === 0;\n  }\n  function isDate(obj) {\n    return !isNaN(toDate(obj)) && toStr(obj).length >= 6;\n  }\n  function isNumber(obj) {\n    return typeof obj === \"number\";\n  }\n  var byteSuffixes = [\"bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\"];\n  function formatValue(pre, value, options, axis) {\n    pre = pre || \"\";\n    if (options.prefix) {\n      if (value < 0) {\n        value = value * -1;\n        pre += \"-\";\n      }\n      pre += options.prefix;\n    }\n    var suffix = options.suffix || \"\";\n    var precision = options.precision;\n    var round = options.round;\n    if (options.byteScale) {\n      var suffixIdx;\n      var baseValue = axis ? options.byteScale : value;\n      if (baseValue >= 1152921504606846976) {\n        value /= 1152921504606846976;\n        suffixIdx = 6;\n      } else if (baseValue >= 1125899906842624) {\n        value /= 1125899906842624;\n        suffixIdx = 5;\n      } else if (baseValue >= 1099511627776) {\n        value /= 1099511627776;\n        suffixIdx = 4;\n      } else if (baseValue >= 1073741824) {\n        value /= 1073741824;\n        suffixIdx = 3;\n      } else if (baseValue >= 1048576) {\n        value /= 1048576;\n        suffixIdx = 2;\n      } else if (baseValue >= 1024) {\n        value /= 1024;\n        suffixIdx = 1;\n      } else {\n        suffixIdx = 0;\n      }\n\n      // TODO handle manual precision case\n      if (precision === undefined && round === undefined) {\n        if (value >= 1023.5) {\n          if (suffixIdx < byteSuffixes.length - 1) {\n            value = 1.0;\n            suffixIdx += 1;\n          }\n        }\n        precision = value >= 1000 ? 4 : 3;\n      }\n      suffix = \" \" + byteSuffixes[suffixIdx];\n    }\n    if (precision !== undefined && round !== undefined) {\n      throw Error(\"Use either round or precision, not both\");\n    }\n    if (!axis) {\n      if (precision !== undefined) {\n        value = value.toPrecision(precision);\n        if (!options.zeros) {\n          value = parseFloat(value);\n        }\n      }\n      if (round !== undefined) {\n        if (round < 0) {\n          var num = Math.pow(10, -1 * round);\n          value = parseInt((1.0 * value / num).toFixed(0)) * num;\n        } else {\n          value = value.toFixed(round);\n          if (!options.zeros) {\n            value = parseFloat(value);\n          }\n        }\n      }\n    }\n    if (options.thousands || options.decimal) {\n      value = toStr(value);\n      var parts = value.split(\".\");\n      value = parts[0];\n      if (options.thousands) {\n        value = value.replace(/\\B(?=(\\d{3})+(?!\\d))/g, options.thousands);\n      }\n      if (parts.length > 1) {\n        value += (options.decimal || \".\") + parts[1];\n      }\n    }\n    return pre + value + suffix;\n  }\n  function seriesOption(chart, series, option) {\n    if (option in series) {\n      return series[option];\n    } else if (option in chart.options) {\n      return chart.options[option];\n    }\n    return null;\n  }\n  function allZeros(data) {\n    var i, j, d;\n    for (i = 0; i < data.length; i++) {\n      d = data[i].data;\n      for (j = 0; j < d.length; j++) {\n        if (d[j][1] != 0) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n  var baseOptions = {\n    maintainAspectRatio: false,\n    animation: false,\n    tooltips: {\n      displayColors: false,\n      callbacks: {}\n    },\n    legend: {},\n    title: {\n      fontSize: 20,\n      fontColor: \"#333\"\n    }\n  };\n  var defaultOptions = {\n    scales: {\n      yAxes: [{\n        ticks: {\n          maxTicksLimit: 4\n        },\n        scaleLabel: {\n          fontSize: 16,\n          // fontStyle: \"bold\",\n          fontColor: \"#333\"\n        }\n      }],\n      xAxes: [{\n        gridLines: {\n          drawOnChartArea: false\n        },\n        scaleLabel: {\n          fontSize: 16,\n          // fontStyle: \"bold\",\n          fontColor: \"#333\"\n        },\n        time: {},\n        ticks: {}\n      }]\n    }\n  };\n\n  // http://there4.io/2012/05/02/google-chart-color-list/\n  var defaultColors = [\"#3366CC\", \"#DC3912\", \"#FF9900\", \"#109618\", \"#990099\", \"#3B3EAC\", \"#0099C6\", \"#DD4477\", \"#66AA00\", \"#B82E2E\", \"#316395\", \"#994499\", \"#22AA99\", \"#AAAA11\", \"#6633CC\", \"#E67300\", \"#8B0707\", \"#329262\", \"#5574A6\", \"#651067\"];\n  var hideLegend = function (options, legend, hideLegend) {\n    if (legend !== undefined) {\n      options.legend.display = !!legend;\n      if (legend && legend !== true) {\n        options.legend.position = legend;\n      }\n    } else if (hideLegend) {\n      options.legend.display = false;\n    }\n  };\n  var setTitle = function (options, title) {\n    options.title.display = true;\n    options.title.text = title;\n  };\n  var setMin = function (options, min) {\n    if (min !== null) {\n      options.scales.yAxes[0].ticks.min = toFloat(min);\n    }\n  };\n  var setMax = function (options, max) {\n    options.scales.yAxes[0].ticks.max = toFloat(max);\n  };\n  var setBarMin = function (options, min) {\n    if (min !== null) {\n      options.scales.xAxes[0].ticks.min = toFloat(min);\n    }\n  };\n  var setBarMax = function (options, max) {\n    options.scales.xAxes[0].ticks.max = toFloat(max);\n  };\n  var setStacked = function (options, stacked) {\n    options.scales.xAxes[0].stacked = !!stacked;\n    options.scales.yAxes[0].stacked = !!stacked;\n  };\n  var setXtitle = function (options, title) {\n    options.scales.xAxes[0].scaleLabel.display = true;\n    options.scales.xAxes[0].scaleLabel.labelString = title;\n  };\n  var setYtitle = function (options, title) {\n    options.scales.yAxes[0].scaleLabel.display = true;\n    options.scales.yAxes[0].scaleLabel.labelString = title;\n  };\n\n  // https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\n  var addOpacity = function (hex, opacity) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? \"rgba(\" + parseInt(result[1], 16) + \", \" + parseInt(result[2], 16) + \", \" + parseInt(result[3], 16) + \", \" + opacity + \")\" : hex;\n  };\n\n  // check if not null or undefined\n  // https://stackoverflow.com/a/27757708/1177228\n  var notnull = function (x) {\n    return x != null;\n  };\n  var setLabelSize = function (chart, data, options) {\n    var maxLabelSize = Math.ceil(chart.element.offsetWidth / 4.0 / data.labels.length);\n    if (maxLabelSize > 25) {\n      maxLabelSize = 25;\n    } else if (maxLabelSize < 10) {\n      maxLabelSize = 10;\n    }\n    if (!options.scales.xAxes[0].ticks.callback) {\n      options.scales.xAxes[0].ticks.callback = function (value) {\n        value = toStr(value);\n        if (value.length > maxLabelSize) {\n          return value.substring(0, maxLabelSize - 2) + \"...\";\n        } else {\n          return value;\n        }\n      };\n    }\n  };\n  var setFormatOptions = function (chart, options, chartType) {\n    var formatOptions = {\n      prefix: chart.options.prefix,\n      suffix: chart.options.suffix,\n      thousands: chart.options.thousands,\n      decimal: chart.options.decimal,\n      precision: chart.options.precision,\n      round: chart.options.round,\n      zeros: chart.options.zeros\n    };\n    if (chart.options.bytes) {\n      var series = chart.data;\n      if (chartType === \"pie\") {\n        series = [{\n          data: series\n        }];\n      }\n\n      // calculate max\n      var max = 0;\n      for (var i = 0; i < series.length; i++) {\n        var s = series[i];\n        for (var j = 0; j < s.data.length; j++) {\n          if (s.data[j][1] > max) {\n            max = s.data[j][1];\n          }\n        }\n      }\n\n      // calculate scale\n      var scale = 1;\n      while (max >= 1024) {\n        scale *= 1024;\n        max /= 1024;\n      }\n\n      // set step size\n      formatOptions.byteScale = scale;\n    }\n    if (chartType !== \"pie\") {\n      var myAxes = options.scales.yAxes;\n      if (chartType === \"bar\") {\n        myAxes = options.scales.xAxes;\n      }\n      if (formatOptions.byteScale) {\n        if (!myAxes[0].ticks.stepSize) {\n          myAxes[0].ticks.stepSize = formatOptions.byteScale / 2;\n        }\n        if (!myAxes[0].ticks.maxTicksLimit) {\n          myAxes[0].ticks.maxTicksLimit = 4;\n        }\n      }\n      if (!myAxes[0].ticks.callback) {\n        myAxes[0].ticks.callback = function (value) {\n          return formatValue(\"\", value, formatOptions, true);\n        };\n      }\n    }\n    if (!options.tooltips.callbacks.label) {\n      if (chartType === \"scatter\") {\n        options.tooltips.callbacks.label = function (item, data) {\n          var label = data.datasets[item.datasetIndex].label || '';\n          if (label) {\n            label += ': ';\n          }\n          return label + '(' + item.xLabel + ', ' + item.yLabel + ')';\n        };\n      } else if (chartType === \"bubble\") {\n        options.tooltips.callbacks.label = function (item, data) {\n          var label = data.datasets[item.datasetIndex].label || '';\n          if (label) {\n            label += ': ';\n          }\n          var dataPoint = data.datasets[item.datasetIndex].data[item.index];\n          return label + '(' + item.xLabel + ', ' + item.yLabel + ', ' + dataPoint.v + ')';\n        };\n      } else if (chartType === \"pie\") {\n        // need to use separate label for pie charts\n        options.tooltips.callbacks.label = function (tooltipItem, data) {\n          var dataLabel = data.labels[tooltipItem.index];\n          var value = ': ';\n          if (isArray(dataLabel)) {\n            // show value on first line of multiline label\n            // need to clone because we are changing the value\n            dataLabel = dataLabel.slice();\n            dataLabel[0] += value;\n          } else {\n            dataLabel += value;\n          }\n          return formatValue(dataLabel, data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index], formatOptions);\n        };\n      } else {\n        var valueLabel = chartType === \"bar\" ? \"xLabel\" : \"yLabel\";\n        options.tooltips.callbacks.label = function (tooltipItem, data) {\n          var label = data.datasets[tooltipItem.datasetIndex].label || '';\n          if (label) {\n            label += ': ';\n          }\n          return formatValue(label, tooltipItem[valueLabel], formatOptions);\n        };\n      }\n    }\n  };\n  var jsOptions = jsOptionsFunc(merge(baseOptions, defaultOptions), hideLegend, setTitle, setMin, setMax, setStacked, setXtitle, setYtitle);\n  var createDataTable = function (chart, options, chartType, library) {\n    var datasets = [];\n    var labels = [];\n    var colors = chart.options.colors || defaultColors;\n    var day = true;\n    var week = true;\n    var dayOfWeek;\n    var month = true;\n    var year = true;\n    var hour = true;\n    var minute = true;\n    var series = chart.data;\n    var max = 0;\n    if (chartType === \"bubble\") {\n      for (var i$1 = 0; i$1 < series.length; i$1++) {\n        var s$1 = series[i$1];\n        for (var j$1 = 0; j$1 < s$1.data.length; j$1++) {\n          if (s$1.data[j$1][2] > max) {\n            max = s$1.data[j$1][2];\n          }\n        }\n      }\n    }\n    var i,\n      j,\n      s,\n      d,\n      key,\n      rows = [],\n      rows2 = [];\n    if (chartType === \"bar\" || chartType === \"column\" || chart.xtype !== \"number\" && chart.xtype !== \"bubble\") {\n      var sortedLabels = [];\n      for (i = 0; i < series.length; i++) {\n        s = series[i];\n        for (j = 0; j < s.data.length; j++) {\n          d = s.data[j];\n          key = chart.xtype == \"datetime\" ? d[0].getTime() : d[0];\n          if (!rows[key]) {\n            rows[key] = new Array(series.length);\n          }\n          rows[key][i] = toFloat(d[1]);\n          if (sortedLabels.indexOf(key) === -1) {\n            sortedLabels.push(key);\n          }\n        }\n      }\n      if (chart.xtype === \"datetime\" || chart.xtype === \"number\") {\n        sortedLabels.sort(sortByNumber);\n      }\n      for (j = 0; j < series.length; j++) {\n        rows2.push([]);\n      }\n      var value;\n      var k;\n      for (k = 0; k < sortedLabels.length; k++) {\n        i = sortedLabels[k];\n        if (chart.xtype === \"datetime\") {\n          value = new Date(toFloat(i));\n          // TODO make this efficient\n          day = day && isDay(value);\n          if (!dayOfWeek) {\n            dayOfWeek = value.getDay();\n          }\n          week = week && isWeek(value, dayOfWeek);\n          month = month && isMonth(value);\n          year = year && isYear(value);\n          hour = hour && isHour(value);\n          minute = minute && isMinute(value);\n        } else {\n          value = i;\n        }\n        labels.push(value);\n        for (j = 0; j < series.length; j++) {\n          // Chart.js doesn't like undefined\n          rows2[j].push(rows[i][j] === undefined ? null : rows[i][j]);\n        }\n      }\n    } else {\n      for (var i$2 = 0; i$2 < series.length; i$2++) {\n        var s$2 = series[i$2];\n        var d$1 = [];\n        for (var j$2 = 0; j$2 < s$2.data.length; j$2++) {\n          var point = {\n            x: toFloat(s$2.data[j$2][0]),\n            y: toFloat(s$2.data[j$2][1])\n          };\n          if (chartType === \"bubble\") {\n            point.r = toFloat(s$2.data[j$2][2]) * 20 / max;\n            // custom attribute, for tooltip\n            point.v = s$2.data[j$2][2];\n          }\n          d$1.push(point);\n        }\n        rows2.push(d$1);\n      }\n    }\n    for (i = 0; i < series.length; i++) {\n      s = series[i];\n      var color = s.color || colors[i];\n      var backgroundColor = chartType !== \"line\" ? addOpacity(color, 0.5) : color;\n      var dataset = {\n        label: s.name || \"\",\n        data: rows2[i],\n        fill: chartType === \"area\",\n        borderColor: color,\n        backgroundColor: backgroundColor,\n        pointBackgroundColor: color,\n        borderWidth: 2,\n        pointHoverBackgroundColor: color\n      };\n      if (s.stack) {\n        dataset.stack = s.stack;\n      }\n      var curve = seriesOption(chart, s, \"curve\");\n      if (curve === false) {\n        dataset.lineTension = 0;\n      }\n      var points = seriesOption(chart, s, \"points\");\n      if (points === false) {\n        dataset.pointRadius = 0;\n        dataset.pointHitRadius = 5;\n      }\n      dataset = merge(dataset, chart.options.dataset || {});\n      dataset = merge(dataset, s.library || {});\n      dataset = merge(dataset, s.dataset || {});\n      datasets.push(dataset);\n    }\n    var xmin = chart.options.xmin;\n    var xmax = chart.options.xmax;\n    if (chart.xtype === \"datetime\") {\n      // hacky check for Chart.js >= 2.9.0\n      // https://github.com/chartjs/Chart.js/compare/v2.8.0...v2.9.0\n      var gte29 = (\"math\" in library.helpers);\n      var ticksKey = gte29 ? \"ticks\" : \"time\";\n      if (notnull(xmin)) {\n        options.scales.xAxes[0][ticksKey].min = toDate(xmin).getTime();\n      }\n      if (notnull(xmax)) {\n        options.scales.xAxes[0][ticksKey].max = toDate(xmax).getTime();\n      }\n    } else if (chart.xtype === \"number\") {\n      if (notnull(xmin)) {\n        options.scales.xAxes[0].ticks.min = xmin;\n      }\n      if (notnull(xmax)) {\n        options.scales.xAxes[0].ticks.max = xmax;\n      }\n    }\n\n    // for empty datetime chart\n    if (chart.xtype === \"datetime\" && labels.length === 0) {\n      if (notnull(xmin)) {\n        labels.push(toDate(xmin));\n      }\n      if (notnull(xmax)) {\n        labels.push(toDate(xmax));\n      }\n      day = false;\n      week = false;\n      month = false;\n      year = false;\n      hour = false;\n      minute = false;\n    }\n    if (chart.xtype === \"datetime\" && labels.length > 0) {\n      var minTime = (notnull(xmin) ? toDate(xmin) : labels[0]).getTime();\n      var maxTime = (notnull(xmax) ? toDate(xmax) : labels[0]).getTime();\n      for (i = 1; i < labels.length; i++) {\n        var value$1 = labels[i].getTime();\n        if (value$1 < minTime) {\n          minTime = value$1;\n        }\n        if (value$1 > maxTime) {\n          maxTime = value$1;\n        }\n      }\n      var timeDiff = (maxTime - minTime) / (86400 * 1000.0);\n      if (!options.scales.xAxes[0].time.unit) {\n        var step;\n        if (year || timeDiff > 365 * 10) {\n          options.scales.xAxes[0].time.unit = \"year\";\n          step = 365;\n        } else if (month || timeDiff > 30 * 10) {\n          options.scales.xAxes[0].time.unit = \"month\";\n          step = 30;\n        } else if (day || timeDiff > 10) {\n          options.scales.xAxes[0].time.unit = \"day\";\n          step = 1;\n        } else if (hour || timeDiff > 0.5) {\n          options.scales.xAxes[0].time.displayFormats = {\n            hour: \"MMM D, h a\"\n          };\n          options.scales.xAxes[0].time.unit = \"hour\";\n          step = 1 / 24.0;\n        } else if (minute) {\n          options.scales.xAxes[0].time.displayFormats = {\n            minute: \"h:mm a\"\n          };\n          options.scales.xAxes[0].time.unit = \"minute\";\n          step = 1 / 24.0 / 60.0;\n        }\n        if (step && timeDiff > 0) {\n          var unitStepSize = Math.ceil(timeDiff / step / (chart.element.offsetWidth / 100.0));\n          if (week && step === 1) {\n            unitStepSize = Math.ceil(unitStepSize / 7.0) * 7;\n          }\n          options.scales.xAxes[0].time.unitStepSize = unitStepSize;\n        }\n      }\n      if (!options.scales.xAxes[0].time.tooltipFormat) {\n        if (day) {\n          options.scales.xAxes[0].time.tooltipFormat = \"ll\";\n        } else if (hour) {\n          options.scales.xAxes[0].time.tooltipFormat = \"MMM D, h a\";\n        } else if (minute) {\n          options.scales.xAxes[0].time.tooltipFormat = \"h:mm a\";\n        }\n      }\n    }\n    var data = {\n      labels: labels,\n      datasets: datasets\n    };\n    return data;\n  };\n  var defaultExport = function defaultExport(library) {\n    this.name = \"chartjs\";\n    this.library = library;\n  };\n  defaultExport.prototype.renderLineChart = function renderLineChart(chart, chartType) {\n    var chartOptions = {};\n    // fix for https://github.com/chartjs/Chart.js/issues/2441\n    if (!chart.options.max && allZeros(chart.data)) {\n      chartOptions.max = 1;\n    }\n    var options = jsOptions(chart, merge(chartOptions, chart.options));\n    setFormatOptions(chart, options, chartType);\n    var data = createDataTable(chart, options, chartType || \"line\", this.library);\n    if (chart.xtype === \"number\") {\n      options.scales.xAxes[0].type = \"linear\";\n      options.scales.xAxes[0].position = \"bottom\";\n    } else {\n      options.scales.xAxes[0].type = chart.xtype === \"string\" ? \"category\" : \"time\";\n    }\n    this.drawChart(chart, \"line\", data, options);\n  };\n  defaultExport.prototype.renderPieChart = function renderPieChart(chart) {\n    var options = merge({}, baseOptions);\n    if (chart.options.donut) {\n      options.cutoutPercentage = 50;\n    }\n    if (\"legend\" in chart.options) {\n      hideLegend(options, chart.options.legend);\n    }\n    if (chart.options.title) {\n      setTitle(options, chart.options.title);\n    }\n    options = merge(options, chart.options.library || {});\n    setFormatOptions(chart, options, \"pie\");\n    var labels = [];\n    var values = [];\n    for (var i = 0; i < chart.data.length; i++) {\n      var point = chart.data[i];\n      labels.push(point[0]);\n      values.push(point[1]);\n    }\n    var dataset = {\n      data: values,\n      backgroundColor: chart.options.colors || defaultColors\n    };\n    dataset = merge(dataset, chart.options.dataset || {});\n    var data = {\n      labels: labels,\n      datasets: [dataset]\n    };\n    this.drawChart(chart, \"pie\", data, options);\n  };\n  defaultExport.prototype.renderColumnChart = function renderColumnChart(chart, chartType) {\n    var options;\n    if (chartType === \"bar\") {\n      var barOptions = merge(baseOptions, defaultOptions);\n      delete barOptions.scales.yAxes[0].ticks.maxTicksLimit;\n      options = jsOptionsFunc(barOptions, hideLegend, setTitle, setBarMin, setBarMax, setStacked, setXtitle, setYtitle)(chart, chart.options);\n    } else {\n      options = jsOptions(chart, chart.options);\n    }\n    setFormatOptions(chart, options, chartType);\n    var data = createDataTable(chart, options, \"column\", this.library);\n    if (chartType !== \"bar\") {\n      setLabelSize(chart, data, options);\n    }\n    this.drawChart(chart, chartType === \"bar\" ? \"horizontalBar\" : \"bar\", data, options);\n  };\n  defaultExport.prototype.renderAreaChart = function renderAreaChart(chart) {\n    this.renderLineChart(chart, \"area\");\n  };\n  defaultExport.prototype.renderBarChart = function renderBarChart(chart) {\n    this.renderColumnChart(chart, \"bar\");\n  };\n  defaultExport.prototype.renderScatterChart = function renderScatterChart(chart, chartType) {\n    chartType = chartType || \"scatter\";\n    var options = jsOptions(chart, chart.options);\n    setFormatOptions(chart, options, chartType);\n    if (!(\"showLines\" in options)) {\n      options.showLines = false;\n    }\n    var data = createDataTable(chart, options, chartType, this.library);\n    options.scales.xAxes[0].type = \"linear\";\n    options.scales.xAxes[0].position = \"bottom\";\n    this.drawChart(chart, chartType, data, options);\n  };\n  defaultExport.prototype.renderBubbleChart = function renderBubbleChart(chart) {\n    this.renderScatterChart(chart, \"bubble\");\n  };\n  defaultExport.prototype.destroy = function destroy(chart) {\n    if (chart.chart) {\n      chart.chart.destroy();\n    }\n  };\n  defaultExport.prototype.drawChart = function drawChart(chart, type, data, options) {\n    this.destroy(chart);\n    var chartOptions = {\n      type: type,\n      data: data,\n      options: options\n    };\n    if (chart.options.code) {\n      window.console.log(\"new Chart(ctx, \" + JSON.stringify(chartOptions) + \");\");\n    }\n    chart.element.innerHTML = \"<canvas></canvas>\";\n    var ctx = chart.element.getElementsByTagName(\"CANVAS\")[0];\n    chart.chart = new this.library(ctx, chartOptions);\n  };\n  var defaultOptions$1 = {\n    chart: {},\n    xAxis: {\n      title: {\n        text: null\n      },\n      labels: {\n        style: {\n          fontSize: \"12px\"\n        }\n      }\n    },\n    yAxis: {\n      title: {\n        text: null\n      },\n      labels: {\n        style: {\n          fontSize: \"12px\"\n        }\n      }\n    },\n    title: {\n      text: null\n    },\n    credits: {\n      enabled: false\n    },\n    legend: {\n      borderWidth: 0\n    },\n    tooltip: {\n      style: {\n        fontSize: \"12px\"\n      }\n    },\n    plotOptions: {\n      areaspline: {},\n      area: {},\n      series: {\n        marker: {}\n      }\n    }\n  };\n  var hideLegend$1 = function (options, legend, hideLegend) {\n    if (legend !== undefined) {\n      options.legend.enabled = !!legend;\n      if (legend && legend !== true) {\n        if (legend === \"top\" || legend === \"bottom\") {\n          options.legend.verticalAlign = legend;\n        } else {\n          options.legend.layout = \"vertical\";\n          options.legend.verticalAlign = \"middle\";\n          options.legend.align = legend;\n        }\n      }\n    } else if (hideLegend) {\n      options.legend.enabled = false;\n    }\n  };\n  var setTitle$1 = function (options, title) {\n    options.title.text = title;\n  };\n  var setMin$1 = function (options, min) {\n    options.yAxis.min = min;\n  };\n  var setMax$1 = function (options, max) {\n    options.yAxis.max = max;\n  };\n  var setStacked$1 = function (options, stacked) {\n    var stackedValue = stacked ? stacked === true ? \"normal\" : stacked : null;\n    options.plotOptions.series.stacking = stackedValue;\n    options.plotOptions.area.stacking = stackedValue;\n    options.plotOptions.areaspline.stacking = stackedValue;\n  };\n  var setXtitle$1 = function (options, title) {\n    options.xAxis.title.text = title;\n  };\n  var setYtitle$1 = function (options, title) {\n    options.yAxis.title.text = title;\n  };\n  var jsOptions$1 = jsOptionsFunc(defaultOptions$1, hideLegend$1, setTitle$1, setMin$1, setMax$1, setStacked$1, setXtitle$1, setYtitle$1);\n  var setFormatOptions$1 = function (chart, options, chartType) {\n    var formatOptions = {\n      prefix: chart.options.prefix,\n      suffix: chart.options.suffix,\n      thousands: chart.options.thousands,\n      decimal: chart.options.decimal,\n      precision: chart.options.precision,\n      round: chart.options.round,\n      zeros: chart.options.zeros\n    };\n    if (chartType !== \"pie\" && !options.yAxis.labels.formatter) {\n      options.yAxis.labels.formatter = function () {\n        return formatValue(\"\", this.value, formatOptions);\n      };\n    }\n    if (!options.tooltip.pointFormatter) {\n      options.tooltip.pointFormatter = function () {\n        return '<span style=\"color:' + this.color + '\">\\u25CF</span> ' + formatValue(this.series.name + ': <b>', this.y, formatOptions) + '</b><br/>';\n      };\n    }\n  };\n  var defaultExport$1 = function defaultExport(library) {\n    this.name = \"highcharts\";\n    this.library = library;\n  };\n  defaultExport$1.prototype.renderLineChart = function renderLineChart(chart, chartType) {\n    chartType = chartType || \"spline\";\n    var chartOptions = {};\n    if (chartType === \"areaspline\") {\n      chartOptions = {\n        plotOptions: {\n          areaspline: {\n            stacking: \"normal\"\n          },\n          area: {\n            stacking: \"normal\"\n          },\n          series: {\n            marker: {\n              enabled: false\n            }\n          }\n        }\n      };\n    }\n    if (chart.options.curve === false) {\n      if (chartType === \"areaspline\") {\n        chartType = \"area\";\n      } else if (chartType === \"spline\") {\n        chartType = \"line\";\n      }\n    }\n    var options = jsOptions$1(chart, chart.options, chartOptions),\n      data,\n      i,\n      j;\n    options.xAxis.type = chart.xtype === \"string\" ? \"category\" : chart.xtype === \"number\" ? \"linear\" : \"datetime\";\n    if (!options.chart.type) {\n      options.chart.type = chartType;\n    }\n    setFormatOptions$1(chart, options, chartType);\n    var series = chart.data;\n    for (i = 0; i < series.length; i++) {\n      series[i].name = series[i].name || \"Value\";\n      data = series[i].data;\n      if (chart.xtype === \"datetime\") {\n        for (j = 0; j < data.length; j++) {\n          data[j][0] = data[j][0].getTime();\n        }\n      }\n      series[i].marker = {\n        symbol: \"circle\"\n      };\n      if (chart.options.points === false) {\n        series[i].marker.enabled = false;\n      }\n    }\n    this.drawChart(chart, series, options);\n  };\n  defaultExport$1.prototype.renderScatterChart = function renderScatterChart(chart) {\n    var options = jsOptions$1(chart, chart.options, {});\n    options.chart.type = \"scatter\";\n    this.drawChart(chart, chart.data, options);\n  };\n  defaultExport$1.prototype.renderPieChart = function renderPieChart(chart) {\n    var chartOptions = merge(defaultOptions$1, {});\n    if (chart.options.colors) {\n      chartOptions.colors = chart.options.colors;\n    }\n    if (chart.options.donut) {\n      chartOptions.plotOptions = {\n        pie: {\n          innerSize: \"50%\"\n        }\n      };\n    }\n    if (\"legend\" in chart.options) {\n      hideLegend$1(chartOptions, chart.options.legend);\n    }\n    if (chart.options.title) {\n      setTitle$1(chartOptions, chart.options.title);\n    }\n    var options = merge(chartOptions, chart.options.library || {});\n    setFormatOptions$1(chart, options, \"pie\");\n    var series = [{\n      type: \"pie\",\n      name: chart.options.label || \"Value\",\n      data: chart.data\n    }];\n    this.drawChart(chart, series, options);\n  };\n  defaultExport$1.prototype.renderColumnChart = function renderColumnChart(chart, chartType) {\n    chartType = chartType || \"column\";\n    var series = chart.data;\n    var options = jsOptions$1(chart, chart.options),\n      i,\n      j,\n      s,\n      d,\n      rows = [],\n      categories = [];\n    options.chart.type = chartType;\n    setFormatOptions$1(chart, options, chartType);\n    for (i = 0; i < series.length; i++) {\n      s = series[i];\n      for (j = 0; j < s.data.length; j++) {\n        d = s.data[j];\n        if (!rows[d[0]]) {\n          rows[d[0]] = new Array(series.length);\n          categories.push(d[0]);\n        }\n        rows[d[0]][i] = d[1];\n      }\n    }\n    if (chart.xtype === \"number\") {\n      categories.sort(sortByNumber);\n    }\n    options.xAxis.categories = categories;\n    var newSeries = [],\n      d2;\n    for (i = 0; i < series.length; i++) {\n      d = [];\n      for (j = 0; j < categories.length; j++) {\n        d.push(rows[categories[j]][i] || 0);\n      }\n      d2 = {\n        name: series[i].name || \"Value\",\n        data: d\n      };\n      if (series[i].stack) {\n        d2.stack = series[i].stack;\n      }\n      newSeries.push(d2);\n    }\n    this.drawChart(chart, newSeries, options);\n  };\n  defaultExport$1.prototype.renderBarChart = function renderBarChart(chart) {\n    this.renderColumnChart(chart, \"bar\");\n  };\n  defaultExport$1.prototype.renderAreaChart = function renderAreaChart(chart) {\n    this.renderLineChart(chart, \"areaspline\");\n  };\n  defaultExport$1.prototype.destroy = function destroy(chart) {\n    if (chart.chart) {\n      chart.chart.destroy();\n    }\n  };\n  defaultExport$1.prototype.drawChart = function drawChart(chart, data, options) {\n    this.destroy(chart);\n    options.chart.renderTo = chart.element.id;\n    options.series = data;\n    if (chart.options.code) {\n      window.console.log(\"new Highcharts.Chart(\" + JSON.stringify(options) + \");\");\n    }\n    chart.chart = new this.library.Chart(options);\n  };\n  var loaded = {};\n  var callbacks = [];\n\n  // Set chart options\n  var defaultOptions$2 = {\n    chartArea: {},\n    fontName: \"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif\",\n    pointSize: 6,\n    legend: {\n      textStyle: {\n        fontSize: 12,\n        color: \"#444\"\n      },\n      alignment: \"center\",\n      position: \"right\"\n    },\n    curveType: \"function\",\n    hAxis: {\n      textStyle: {\n        color: \"#666\",\n        fontSize: 12\n      },\n      titleTextStyle: {},\n      gridlines: {\n        color: \"transparent\"\n      },\n      baselineColor: \"#ccc\",\n      viewWindow: {}\n    },\n    vAxis: {\n      textStyle: {\n        color: \"#666\",\n        fontSize: 12\n      },\n      titleTextStyle: {},\n      baselineColor: \"#ccc\",\n      viewWindow: {}\n    },\n    tooltip: {\n      textStyle: {\n        color: \"#666\",\n        fontSize: 12\n      }\n    }\n  };\n  var hideLegend$2 = function (options, legend, hideLegend) {\n    if (legend !== undefined) {\n      var position;\n      if (!legend) {\n        position = \"none\";\n      } else if (legend === true) {\n        position = \"right\";\n      } else {\n        position = legend;\n      }\n      options.legend.position = position;\n    } else if (hideLegend) {\n      options.legend.position = \"none\";\n    }\n  };\n  var setTitle$2 = function (options, title) {\n    options.title = title;\n    options.titleTextStyle = {\n      color: \"#333\",\n      fontSize: \"20px\"\n    };\n  };\n  var setMin$2 = function (options, min) {\n    options.vAxis.viewWindow.min = min;\n  };\n  var setMax$2 = function (options, max) {\n    options.vAxis.viewWindow.max = max;\n  };\n  var setBarMin$1 = function (options, min) {\n    options.hAxis.viewWindow.min = min;\n  };\n  var setBarMax$1 = function (options, max) {\n    options.hAxis.viewWindow.max = max;\n  };\n  var setStacked$2 = function (options, stacked) {\n    options.isStacked = stacked ? stacked : false;\n  };\n  var setXtitle$2 = function (options, title) {\n    options.hAxis.title = title;\n    options.hAxis.titleTextStyle.italic = false;\n  };\n  var setYtitle$2 = function (options, title) {\n    options.vAxis.title = title;\n    options.vAxis.titleTextStyle.italic = false;\n  };\n  var jsOptions$2 = jsOptionsFunc(defaultOptions$2, hideLegend$2, setTitle$2, setMin$2, setMax$2, setStacked$2, setXtitle$2, setYtitle$2);\n  var resize = function (callback) {\n    if (window.attachEvent) {\n      window.attachEvent(\"onresize\", callback);\n    } else if (window.addEventListener) {\n      window.addEventListener(\"resize\", callback, true);\n    }\n    callback();\n  };\n  var defaultExport$2 = function defaultExport(library) {\n    this.name = \"google\";\n    this.library = library;\n  };\n  defaultExport$2.prototype.renderLineChart = function renderLineChart(chart) {\n    var this$1 = this;\n    this.waitForLoaded(chart, function () {\n      var chartOptions = {};\n      if (chart.options.curve === false) {\n        chartOptions.curveType = \"none\";\n      }\n      if (chart.options.points === false) {\n        chartOptions.pointSize = 0;\n      }\n      var options = jsOptions$2(chart, chart.options, chartOptions);\n      var data = this$1.createDataTable(chart.data, chart.xtype);\n      this$1.drawChart(chart, \"LineChart\", data, options);\n    });\n  };\n  defaultExport$2.prototype.renderPieChart = function renderPieChart(chart) {\n    var this$1 = this;\n    this.waitForLoaded(chart, function () {\n      var chartOptions = {\n        chartArea: {\n          top: \"10%\",\n          height: \"80%\"\n        },\n        legend: {}\n      };\n      if (chart.options.colors) {\n        chartOptions.colors = chart.options.colors;\n      }\n      if (chart.options.donut) {\n        chartOptions.pieHole = 0.5;\n      }\n      if (\"legend\" in chart.options) {\n        hideLegend$2(chartOptions, chart.options.legend);\n      }\n      if (chart.options.title) {\n        setTitle$2(chartOptions, chart.options.title);\n      }\n      var options = merge(merge(defaultOptions$2, chartOptions), chart.options.library || {});\n      var data = new this$1.library.visualization.DataTable();\n      data.addColumn(\"string\", \"\");\n      data.addColumn(\"number\", \"Value\");\n      data.addRows(chart.data);\n      this$1.drawChart(chart, \"PieChart\", data, options);\n    });\n  };\n  defaultExport$2.prototype.renderColumnChart = function renderColumnChart(chart) {\n    var this$1 = this;\n    this.waitForLoaded(chart, function () {\n      var options = jsOptions$2(chart, chart.options);\n      var data = this$1.createDataTable(chart.data, chart.xtype);\n      this$1.drawChart(chart, \"ColumnChart\", data, options);\n    });\n  };\n  defaultExport$2.prototype.renderBarChart = function renderBarChart(chart) {\n    var this$1 = this;\n    this.waitForLoaded(chart, function () {\n      var chartOptions = {\n        hAxis: {\n          gridlines: {\n            color: \"#ccc\"\n          }\n        }\n      };\n      var options = jsOptionsFunc(defaultOptions$2, hideLegend$2, setTitle$2, setBarMin$1, setBarMax$1, setStacked$2, setXtitle$2, setYtitle$2)(chart, chart.options, chartOptions);\n      var data = this$1.createDataTable(chart.data, chart.xtype);\n      this$1.drawChart(chart, \"BarChart\", data, options);\n    });\n  };\n  defaultExport$2.prototype.renderAreaChart = function renderAreaChart(chart) {\n    var this$1 = this;\n    this.waitForLoaded(chart, function () {\n      var chartOptions = {\n        isStacked: true,\n        pointSize: 0,\n        areaOpacity: 0.5\n      };\n      var options = jsOptions$2(chart, chart.options, chartOptions);\n      var data = this$1.createDataTable(chart.data, chart.xtype);\n      this$1.drawChart(chart, \"AreaChart\", data, options);\n    });\n  };\n  defaultExport$2.prototype.renderGeoChart = function renderGeoChart(chart) {\n    var this$1 = this;\n    this.waitForLoaded(chart, \"geochart\", function () {\n      var chartOptions = {\n        legend: \"none\",\n        colorAxis: {\n          colors: chart.options.colors || [\"#f6c7b6\", \"#ce502d\"]\n        }\n      };\n      var options = merge(merge(defaultOptions$2, chartOptions), chart.options.library || {});\n      var data = new this$1.library.visualization.DataTable();\n      data.addColumn(\"string\", \"\");\n      data.addColumn(\"number\", chart.options.label || \"Value\");\n      data.addRows(chart.data);\n      this$1.drawChart(chart, \"GeoChart\", data, options);\n    });\n  };\n  defaultExport$2.prototype.renderScatterChart = function renderScatterChart(chart) {\n    var this$1 = this;\n    this.waitForLoaded(chart, function () {\n      var chartOptions = {};\n      var options = jsOptions$2(chart, chart.options, chartOptions);\n      var series = chart.data,\n        rows2 = [],\n        i,\n        j,\n        data,\n        d;\n      for (i = 0; i < series.length; i++) {\n        series[i].name = series[i].name || \"Value\";\n        d = series[i].data;\n        for (j = 0; j < d.length; j++) {\n          var row = new Array(series.length + 1);\n          row[0] = d[j][0];\n          row[i + 1] = d[j][1];\n          rows2.push(row);\n        }\n      }\n      data = new this$1.library.visualization.DataTable();\n      data.addColumn(\"number\", \"\");\n      for (i = 0; i < series.length; i++) {\n        data.addColumn(\"number\", series[i].name);\n      }\n      data.addRows(rows2);\n      this$1.drawChart(chart, \"ScatterChart\", data, options);\n    });\n  };\n  defaultExport$2.prototype.renderTimeline = function renderTimeline(chart) {\n    var this$1 = this;\n    this.waitForLoaded(chart, \"timeline\", function () {\n      var chartOptions = {\n        legend: \"none\"\n      };\n      if (chart.options.colors) {\n        chartOptions.colors = chart.options.colors;\n      }\n      var options = merge(merge(defaultOptions$2, chartOptions), chart.options.library || {});\n      var data = new this$1.library.visualization.DataTable();\n      data.addColumn({\n        type: \"string\",\n        id: \"Name\"\n      });\n      data.addColumn({\n        type: \"date\",\n        id: \"Start\"\n      });\n      data.addColumn({\n        type: \"date\",\n        id: \"End\"\n      });\n      data.addRows(chart.data);\n      chart.element.style.lineHeight = \"normal\";\n      this$1.drawChart(chart, \"Timeline\", data, options);\n    });\n  };\n  defaultExport$2.prototype.destroy = function destroy(chart) {\n    if (chart.chart) {\n      chart.chart.clearChart();\n    }\n  };\n  defaultExport$2.prototype.drawChart = function drawChart(chart, type, data, options) {\n    this.destroy(chart);\n    if (chart.options.code) {\n      window.console.log(\"var data = new google.visualization.DataTable(\" + data.toJSON() + \");\\nvar chart = new google.visualization.\" + type + \"(element);\\nchart.draw(data, \" + JSON.stringify(options) + \");\");\n    }\n    chart.chart = new this.library.visualization[type](chart.element);\n    resize(function () {\n      chart.chart.draw(data, options);\n    });\n  };\n  defaultExport$2.prototype.waitForLoaded = function waitForLoaded(chart, pack, callback) {\n    var this$1 = this;\n    if (!callback) {\n      callback = pack;\n      pack = \"corechart\";\n    }\n    callbacks.push({\n      pack: pack,\n      callback: callback\n    });\n    if (loaded[pack]) {\n      this.runCallbacks();\n    } else {\n      loaded[pack] = true;\n\n      // https://groups.google.com/forum/#!topic/google-visualization-api/fMKJcyA2yyI\n      var loadOptions = {\n        packages: [pack],\n        callback: function () {\n          this$1.runCallbacks();\n        }\n      };\n      var config = chart.__config();\n      if (config.language) {\n        loadOptions.language = config.language;\n      }\n      if (pack === \"geochart\" && config.mapsApiKey) {\n        loadOptions.mapsApiKey = config.mapsApiKey;\n      }\n      this.library.charts.load(\"current\", loadOptions);\n    }\n  };\n  defaultExport$2.prototype.runCallbacks = function runCallbacks() {\n    var cb, call;\n    for (var i = 0; i < callbacks.length; i++) {\n      cb = callbacks[i];\n      call = this.library.visualization && (cb.pack === \"corechart\" && this.library.visualization.LineChart || cb.pack === \"timeline\" && this.library.visualization.Timeline || cb.pack === \"geochart\" && this.library.visualization.GeoChart);\n      if (call) {\n        cb.callback();\n        callbacks.splice(i, 1);\n        i--;\n      }\n    }\n  };\n\n  // cant use object as key\n  defaultExport$2.prototype.createDataTable = function createDataTable(series, columnType) {\n    var i,\n      j,\n      s,\n      d,\n      key,\n      rows = [],\n      sortedLabels = [];\n    for (i = 0; i < series.length; i++) {\n      s = series[i];\n      series[i].name = series[i].name || \"Value\";\n      for (j = 0; j < s.data.length; j++) {\n        d = s.data[j];\n        key = columnType === \"datetime\" ? d[0].getTime() : d[0];\n        if (!rows[key]) {\n          rows[key] = new Array(series.length);\n          sortedLabels.push(key);\n        }\n        rows[key][i] = toFloat(d[1]);\n      }\n    }\n    var rows2 = [];\n    var day = true;\n    var value;\n    for (j = 0; j < sortedLabels.length; j++) {\n      i = sortedLabels[j];\n      if (columnType === \"datetime\") {\n        value = new Date(toFloat(i));\n        day = day && isDay(value);\n      } else if (columnType === \"number\") {\n        value = toFloat(i);\n      } else {\n        value = i;\n      }\n      rows2.push([value].concat(rows[i]));\n    }\n    if (columnType === \"datetime\") {\n      rows2.sort(sortByTime);\n    } else if (columnType === \"number\") {\n      rows2.sort(sortByNumberSeries);\n      for (i = 0; i < rows2.length; i++) {\n        rows2[i][0] = toStr(rows2[i][0]);\n      }\n      columnType = \"string\";\n    }\n\n    // create datatable\n    var data = new this.library.visualization.DataTable();\n    columnType = columnType === \"datetime\" && day ? \"date\" : columnType;\n    data.addColumn(columnType, \"\");\n    for (i = 0; i < series.length; i++) {\n      data.addColumn(\"number\", series[i].name);\n    }\n    data.addRows(rows2);\n    return data;\n  };\n  var pendingRequests = [],\n    runningRequests = 0,\n    maxRequests = 4;\n  function pushRequest(url, success, error) {\n    pendingRequests.push([url, success, error]);\n    runNext();\n  }\n  function runNext() {\n    if (runningRequests < maxRequests) {\n      var request = pendingRequests.shift();\n      if (request) {\n        runningRequests++;\n        getJSON(request[0], request[1], request[2]);\n        runNext();\n      }\n    }\n  }\n  function requestComplete() {\n    runningRequests--;\n    runNext();\n  }\n  function getJSON(url, success, error) {\n    ajaxCall(url, success, function (jqXHR, textStatus, errorThrown) {\n      var message = typeof errorThrown === \"string\" ? errorThrown : errorThrown.message;\n      error(message);\n    });\n  }\n  function ajaxCall(url, success, error) {\n    var $ = window.jQuery || window.Zepto || window.$;\n    if ($ && $.ajax) {\n      $.ajax({\n        dataType: \"json\",\n        url: url,\n        success: success,\n        error: error,\n        complete: requestComplete\n      });\n    } else {\n      var xhr = new XMLHttpRequest();\n      xhr.open(\"GET\", url, true);\n      xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n      xhr.onload = function () {\n        requestComplete();\n        if (xhr.status === 200) {\n          success(JSON.parse(xhr.responseText), xhr.statusText, xhr);\n        } else {\n          error(xhr, \"error\", xhr.statusText);\n        }\n      };\n      xhr.send();\n    }\n  }\n  var config = {};\n  var adapters = [];\n\n  // helpers\n\n  function setText(element, text) {\n    if (document.body.innerText) {\n      element.innerText = text;\n    } else {\n      element.textContent = text;\n    }\n  }\n\n  // TODO remove prefix for all messages\n  function chartError(element, message, noPrefix) {\n    if (!noPrefix) {\n      message = \"Error Loading Chart: \" + message;\n    }\n    setText(element, message);\n    element.style.color = \"#ff0000\";\n  }\n  function errorCatcher(chart) {\n    try {\n      chart.__render();\n    } catch (err) {\n      chartError(chart.element, err.message);\n      throw err;\n    }\n  }\n  function fetchDataSource(chart, dataSource) {\n    if (typeof dataSource === \"string\") {\n      pushRequest(dataSource, function (data) {\n        chart.rawData = data;\n        errorCatcher(chart);\n      }, function (message) {\n        chartError(chart.element, message);\n      });\n    } else if (typeof dataSource === \"function\") {\n      try {\n        dataSource(function (data) {\n          chart.rawData = data;\n          errorCatcher(chart);\n        }, function (message) {\n          chartError(chart.element, message, true);\n        });\n      } catch (err) {\n        chartError(chart.element, err, true);\n      }\n    } else {\n      chart.rawData = dataSource;\n      errorCatcher(chart);\n    }\n  }\n  function addDownloadButton(chart) {\n    var element = chart.element;\n    var link = document.createElement(\"a\");\n    var download = chart.options.download;\n    if (download === true) {\n      download = {};\n    } else if (typeof download === \"string\") {\n      download = {\n        filename: download\n      };\n    }\n    link.download = download.filename || \"chart.png\"; // https://caniuse.com/download\n\n    link.style.position = \"absolute\";\n    link.style.top = \"20px\";\n    link.style.right = \"20px\";\n    link.style.zIndex = 1000;\n    link.style.lineHeight = \"20px\";\n    link.target = \"_blank\"; // for safari\n    var image = document.createElement(\"img\");\n    image.alt = \"Download\";\n    image.style.border = \"none\";\n    // icon from font-awesome\n    // http://fa2png.io/\n    image.src = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABCFBMVEUAAADMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMywEsqxAAAAV3RSTlMAAQIDBggJCgsMDQ4PERQaHB0eISIjJCouLzE0OTo/QUJHSUpLTU5PUllhYmltcHh5foWLjI+SlaCio6atr7S1t7m6vsHHyM7R2tze5Obo7fHz9ff5+/1hlxK2AAAA30lEQVQYGUXBhVYCQQBA0TdYWAt2d3d3YWAHyur7/z9xgD16Lw0DW+XKx+1GgX+FRzM3HWQWrHl5N/oapW5RPe0PkBu+UYeICvozTWZVK23Ao04B79oJrOsJDOoxkZoQPWgX29pHpCZEk7rEvQYiNSFq1UMqvlCjJkRBS1R8hb00Vb/TajtBL7nTHE1X1vyMQF732dQhyF2o6SAwrzP06iUQzvwsArlnzcOdrgBhJyHa1QOgO9U1GsKuvjUTjavliZYQ8nNPapG6sap/3nrIdJ6bOWzmX/fy0XVpfzZP3S8OJT3g9EEiJwAAAABJRU5ErkJggg==\";\n    link.appendChild(image);\n    element.style.position = \"relative\";\n    chart.__downloadAttached = true;\n\n    // mouseenter\n    chart.__enterEvent = addEvent(element, \"mouseover\", function (e) {\n      var related = e.relatedTarget;\n      // check download option again to ensure it wasn't changed\n      if ((!related || related !== this && !childOf(this, related)) && chart.options.download) {\n        link.href = chart.toImage(download);\n        element.appendChild(link);\n      }\n    });\n\n    // mouseleave\n    chart.__leaveEvent = addEvent(element, \"mouseout\", function (e) {\n      var related = e.relatedTarget;\n      if (!related || related !== this && !childOf(this, related)) {\n        if (link.parentNode) {\n          link.parentNode.removeChild(link);\n        }\n      }\n    });\n  }\n\n  // https://stackoverflow.com/questions/10149963/adding-event-listener-cross-browser\n  function addEvent(elem, event, fn) {\n    if (elem.addEventListener) {\n      elem.addEventListener(event, fn, false);\n      return fn;\n    } else {\n      var fn2 = function () {\n        // set the this pointer same as addEventListener when fn is called\n        return fn.call(elem, window.event);\n      };\n      elem.attachEvent(\"on\" + event, fn2);\n      return fn2;\n    }\n  }\n  function removeEvent(elem, event, fn) {\n    if (elem.removeEventListener) {\n      elem.removeEventListener(event, fn, false);\n    } else {\n      elem.detachEvent(\"on\" + event, fn);\n    }\n  }\n\n  // https://gist.github.com/shawnbot/4166283\n  function childOf(p, c) {\n    if (p === c) {\n      return false;\n    }\n    while (c && c !== p) {\n      c = c.parentNode;\n    }\n    return c === p;\n  }\n  function getAdapterType(library) {\n    if (library) {\n      if (library.product === \"Highcharts\") {\n        return defaultExport$1;\n      } else if (library.charts) {\n        return defaultExport$2;\n      } else if (isFunction(library)) {\n        return defaultExport;\n      }\n    }\n    throw new Error(\"Unknown adapter\");\n  }\n  function addAdapter(library) {\n    var adapterType = getAdapterType(library);\n    var adapter = new adapterType(library);\n    if (adapters.indexOf(adapter) === -1) {\n      adapters.push(adapter);\n    }\n  }\n  function loadAdapters() {\n    if (\"Chart\" in window) {\n      addAdapter(window.Chart);\n    }\n    if (\"Highcharts\" in window) {\n      addAdapter(window.Highcharts);\n    }\n    if (window.google && window.google.charts) {\n      addAdapter(window.google);\n    }\n  }\n  function dataEmpty(data, chartType) {\n    if (chartType === \"PieChart\" || chartType === \"GeoChart\" || chartType === \"Timeline\") {\n      return data.length === 0;\n    } else {\n      for (var i = 0; i < data.length; i++) {\n        if (data[i].data.length > 0) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n  function renderChart(chartType, chart) {\n    if (chart.options.messages && chart.options.messages.empty && dataEmpty(chart.data, chartType)) {\n      setText(chart.element, chart.options.messages.empty);\n    } else {\n      callAdapter(chartType, chart);\n      if (chart.options.download && !chart.__downloadAttached && chart.adapter === \"chartjs\") {\n        addDownloadButton(chart);\n      }\n    }\n  }\n\n  // TODO remove chartType if cross-browser way\n  // to get the name of the chart class\n  function callAdapter(chartType, chart) {\n    var i, adapter, fnName, adapterName;\n    fnName = \"render\" + chartType;\n    adapterName = chart.options.adapter;\n    loadAdapters();\n    for (i = 0; i < adapters.length; i++) {\n      adapter = adapters[i];\n      if ((!adapterName || adapterName === adapter.name) && isFunction(adapter[fnName])) {\n        chart.adapter = adapter.name;\n        chart.__adapterObject = adapter;\n        return adapter[fnName](chart);\n      }\n    }\n    if (adapters.length > 0) {\n      throw new Error(\"No charting library found for \" + chartType);\n    } else {\n      throw new Error(\"No charting libraries found - be sure to include one before your charts\");\n    }\n  }\n\n  // process data\n\n  var toFormattedKey = function (key, keyType) {\n    if (keyType === \"number\") {\n      key = toFloat(key);\n    } else if (keyType === \"datetime\") {\n      key = toDate(key);\n    } else {\n      key = toStr(key);\n    }\n    return key;\n  };\n  var formatSeriesData = function (data, keyType) {\n    var r = [],\n      key,\n      j;\n    for (j = 0; j < data.length; j++) {\n      if (keyType === \"bubble\") {\n        r.push([toFloat(data[j][0]), toFloat(data[j][1]), toFloat(data[j][2])]);\n      } else {\n        key = toFormattedKey(data[j][0], keyType);\n        r.push([key, toFloat(data[j][1])]);\n      }\n    }\n    if (keyType === \"datetime\") {\n      r.sort(sortByTime);\n    } else if (keyType === \"number\") {\n      r.sort(sortByNumberSeries);\n    }\n    return r;\n  };\n  function detectXType(series, noDatetime, options) {\n    if (dataEmpty(series)) {\n      if ((options.xmin || options.xmax) && (!options.xmin || isDate(options.xmin)) && (!options.xmax || isDate(options.xmax))) {\n        return \"datetime\";\n      } else {\n        return \"number\";\n      }\n    } else if (detectXTypeWithFunction(series, isNumber)) {\n      return \"number\";\n    } else if (!noDatetime && detectXTypeWithFunction(series, isDate)) {\n      return \"datetime\";\n    } else {\n      return \"string\";\n    }\n  }\n  function detectXTypeWithFunction(series, func) {\n    var i, j, data;\n    for (i = 0; i < series.length; i++) {\n      data = toArr(series[i].data);\n      for (j = 0; j < data.length; j++) {\n        if (!func(data[j][0])) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  // creates a shallow copy of each element of the array\n  // elements are expected to be objects\n  function copySeries(series) {\n    var newSeries = [],\n      i,\n      j;\n    for (i = 0; i < series.length; i++) {\n      var copy = {};\n      for (j in series[i]) {\n        if (series[i].hasOwnProperty(j)) {\n          copy[j] = series[i][j];\n        }\n      }\n      newSeries.push(copy);\n    }\n    return newSeries;\n  }\n  function processSeries(chart, keyType, noDatetime) {\n    var i;\n    var opts = chart.options;\n    var series = chart.rawData;\n\n    // see if one series or multiple\n    if (!isArray(series) || typeof series[0] !== \"object\" || isArray(series[0])) {\n      series = [{\n        name: opts.label,\n        data: series\n      }];\n      chart.hideLegend = true;\n    } else {\n      chart.hideLegend = false;\n    }\n\n    // convert to array\n    // must come before dataEmpty check\n    series = copySeries(series);\n    for (i = 0; i < series.length; i++) {\n      series[i].data = toArr(series[i].data);\n    }\n    chart.xtype = keyType ? keyType : opts.discrete ? \"string\" : detectXType(series, noDatetime, opts);\n\n    // right format\n    for (i = 0; i < series.length; i++) {\n      series[i].data = formatSeriesData(series[i].data, chart.xtype);\n    }\n    return series;\n  }\n  function processSimple(chart) {\n    var perfectData = toArr(chart.rawData),\n      i;\n    for (i = 0; i < perfectData.length; i++) {\n      perfectData[i] = [toStr(perfectData[i][0]), toFloat(perfectData[i][1])];\n    }\n    return perfectData;\n  }\n\n  // define classes\n\n  var Chart = function Chart(element, dataSource, options) {\n    var elementId;\n    if (typeof element === \"string\") {\n      elementId = element;\n      element = document.getElementById(element);\n      if (!element) {\n        throw new Error(\"No element with id \" + elementId);\n      }\n    }\n    this.element = element;\n    this.options = merge(Chartkick.options, options || {});\n    this.dataSource = dataSource;\n    Chartkick.charts[element.id] = this;\n    fetchDataSource(this, dataSource);\n    if (this.options.refresh) {\n      this.startRefresh();\n    }\n  };\n  Chart.prototype.getElement = function getElement() {\n    return this.element;\n  };\n  Chart.prototype.getDataSource = function getDataSource() {\n    return this.dataSource;\n  };\n  Chart.prototype.getData = function getData() {\n    return this.data;\n  };\n  Chart.prototype.getOptions = function getOptions() {\n    return this.options;\n  };\n  Chart.prototype.getChartObject = function getChartObject() {\n    return this.chart;\n  };\n  Chart.prototype.getAdapter = function getAdapter() {\n    return this.adapter;\n  };\n  Chart.prototype.updateData = function updateData(dataSource, options) {\n    this.dataSource = dataSource;\n    if (options) {\n      this.__updateOptions(options);\n    }\n    fetchDataSource(this, dataSource);\n  };\n  Chart.prototype.setOptions = function setOptions(options) {\n    this.__updateOptions(options);\n    this.redraw();\n  };\n  Chart.prototype.redraw = function redraw() {\n    fetchDataSource(this, this.rawData);\n  };\n  Chart.prototype.refreshData = function refreshData() {\n    if (typeof this.dataSource === \"string\") {\n      // prevent browser from caching\n      var sep = this.dataSource.indexOf(\"?\") === -1 ? \"?\" : \"&\";\n      var url = this.dataSource + sep + \"_=\" + new Date().getTime();\n      fetchDataSource(this, url);\n    } else if (typeof this.dataSource === \"function\") {\n      fetchDataSource(this, this.dataSource);\n    }\n  };\n  Chart.prototype.startRefresh = function startRefresh() {\n    var this$1 = this;\n    var refresh = this.options.refresh;\n    if (refresh && typeof this.dataSource !== \"string\" && typeof this.dataSource !== \"function\") {\n      throw new Error(\"Data source must be a URL or callback for refresh\");\n    }\n    if (!this.intervalId) {\n      if (refresh) {\n        this.intervalId = setInterval(function () {\n          this$1.refreshData();\n        }, refresh * 1000);\n      } else {\n        throw new Error(\"No refresh interval\");\n      }\n    }\n  };\n  Chart.prototype.stopRefresh = function stopRefresh() {\n    if (this.intervalId) {\n      clearInterval(this.intervalId);\n      this.intervalId = null;\n    }\n  };\n  Chart.prototype.toImage = function toImage(download) {\n    if (this.adapter === \"chartjs\") {\n      if (download && download.background && download.background !== \"transparent\") {\n        // https://stackoverflow.com/questions/30464750/chartjs-line-chart-set-background-color\n        var canvas = this.chart.chart.canvas;\n        var ctx = this.chart.chart.ctx;\n        var tmpCanvas = document.createElement(\"canvas\");\n        var tmpCtx = tmpCanvas.getContext(\"2d\");\n        tmpCanvas.width = ctx.canvas.width;\n        tmpCanvas.height = ctx.canvas.height;\n        tmpCtx.fillStyle = download.background;\n        tmpCtx.fillRect(0, 0, tmpCanvas.width, tmpCanvas.height);\n        tmpCtx.drawImage(canvas, 0, 0);\n        return tmpCanvas.toDataURL(\"image/png\");\n      } else {\n        return this.chart.toBase64Image();\n      }\n    } else {\n      // TODO throw error in next major version\n      // throw new Error(\"Feature only available for Chart.js\");\n      return null;\n    }\n  };\n  Chart.prototype.destroy = function destroy() {\n    if (this.__adapterObject) {\n      this.__adapterObject.destroy(this);\n    }\n    if (this.__enterEvent) {\n      removeEvent(this.element, \"mouseover\", this.__enterEvent);\n    }\n    if (this.__leaveEvent) {\n      removeEvent(this.element, \"mouseout\", this.__leaveEvent);\n    }\n  };\n  Chart.prototype.__updateOptions = function __updateOptions(options) {\n    var updateRefresh = options.refresh && options.refresh !== this.options.refresh;\n    this.options = merge(Chartkick.options, options);\n    if (updateRefresh) {\n      this.stopRefresh();\n      this.startRefresh();\n    }\n  };\n  Chart.prototype.__render = function __render() {\n    this.data = this.__processData();\n    renderChart(this.__chartName(), this);\n  };\n  Chart.prototype.__config = function __config() {\n    return config;\n  };\n  var LineChart = /*@__PURE__*/function (Chart) {\n    function LineChart() {\n      Chart.apply(this, arguments);\n    }\n    if (Chart) LineChart.__proto__ = Chart;\n    LineChart.prototype = Object.create(Chart && Chart.prototype);\n    LineChart.prototype.constructor = LineChart;\n    LineChart.prototype.__processData = function __processData() {\n      return processSeries(this);\n    };\n    LineChart.prototype.__chartName = function __chartName() {\n      return \"LineChart\";\n    };\n    return LineChart;\n  }(Chart);\n  var PieChart = /*@__PURE__*/function (Chart) {\n    function PieChart() {\n      Chart.apply(this, arguments);\n    }\n    if (Chart) PieChart.__proto__ = Chart;\n    PieChart.prototype = Object.create(Chart && Chart.prototype);\n    PieChart.prototype.constructor = PieChart;\n    PieChart.prototype.__processData = function __processData() {\n      return processSimple(this);\n    };\n    PieChart.prototype.__chartName = function __chartName() {\n      return \"PieChart\";\n    };\n    return PieChart;\n  }(Chart);\n  var ColumnChart = /*@__PURE__*/function (Chart) {\n    function ColumnChart() {\n      Chart.apply(this, arguments);\n    }\n    if (Chart) ColumnChart.__proto__ = Chart;\n    ColumnChart.prototype = Object.create(Chart && Chart.prototype);\n    ColumnChart.prototype.constructor = ColumnChart;\n    ColumnChart.prototype.__processData = function __processData() {\n      return processSeries(this, null, true);\n    };\n    ColumnChart.prototype.__chartName = function __chartName() {\n      return \"ColumnChart\";\n    };\n    return ColumnChart;\n  }(Chart);\n  var BarChart = /*@__PURE__*/function (Chart) {\n    function BarChart() {\n      Chart.apply(this, arguments);\n    }\n    if (Chart) BarChart.__proto__ = Chart;\n    BarChart.prototype = Object.create(Chart && Chart.prototype);\n    BarChart.prototype.constructor = BarChart;\n    BarChart.prototype.__processData = function __processData() {\n      return processSeries(this, null, true);\n    };\n    BarChart.prototype.__chartName = function __chartName() {\n      return \"BarChart\";\n    };\n    return BarChart;\n  }(Chart);\n  var AreaChart = /*@__PURE__*/function (Chart) {\n    function AreaChart() {\n      Chart.apply(this, arguments);\n    }\n    if (Chart) AreaChart.__proto__ = Chart;\n    AreaChart.prototype = Object.create(Chart && Chart.prototype);\n    AreaChart.prototype.constructor = AreaChart;\n    AreaChart.prototype.__processData = function __processData() {\n      return processSeries(this);\n    };\n    AreaChart.prototype.__chartName = function __chartName() {\n      return \"AreaChart\";\n    };\n    return AreaChart;\n  }(Chart);\n  var GeoChart = /*@__PURE__*/function (Chart) {\n    function GeoChart() {\n      Chart.apply(this, arguments);\n    }\n    if (Chart) GeoChart.__proto__ = Chart;\n    GeoChart.prototype = Object.create(Chart && Chart.prototype);\n    GeoChart.prototype.constructor = GeoChart;\n    GeoChart.prototype.__processData = function __processData() {\n      return processSimple(this);\n    };\n    GeoChart.prototype.__chartName = function __chartName() {\n      return \"GeoChart\";\n    };\n    return GeoChart;\n  }(Chart);\n  var ScatterChart = /*@__PURE__*/function (Chart) {\n    function ScatterChart() {\n      Chart.apply(this, arguments);\n    }\n    if (Chart) ScatterChart.__proto__ = Chart;\n    ScatterChart.prototype = Object.create(Chart && Chart.prototype);\n    ScatterChart.prototype.constructor = ScatterChart;\n    ScatterChart.prototype.__processData = function __processData() {\n      return processSeries(this, \"number\");\n    };\n    ScatterChart.prototype.__chartName = function __chartName() {\n      return \"ScatterChart\";\n    };\n    return ScatterChart;\n  }(Chart);\n  var BubbleChart = /*@__PURE__*/function (Chart) {\n    function BubbleChart() {\n      Chart.apply(this, arguments);\n    }\n    if (Chart) BubbleChart.__proto__ = Chart;\n    BubbleChart.prototype = Object.create(Chart && Chart.prototype);\n    BubbleChart.prototype.constructor = BubbleChart;\n    BubbleChart.prototype.__processData = function __processData() {\n      return processSeries(this, \"bubble\");\n    };\n    BubbleChart.prototype.__chartName = function __chartName() {\n      return \"BubbleChart\";\n    };\n    return BubbleChart;\n  }(Chart);\n  var Timeline = /*@__PURE__*/function (Chart) {\n    function Timeline() {\n      Chart.apply(this, arguments);\n    }\n    if (Chart) Timeline.__proto__ = Chart;\n    Timeline.prototype = Object.create(Chart && Chart.prototype);\n    Timeline.prototype.constructor = Timeline;\n    Timeline.prototype.__processData = function __processData() {\n      var i,\n        data = this.rawData;\n      for (i = 0; i < data.length; i++) {\n        data[i][1] = toDate(data[i][1]);\n        data[i][2] = toDate(data[i][2]);\n      }\n      return data;\n    };\n    Timeline.prototype.__chartName = function __chartName() {\n      return \"Timeline\";\n    };\n    return Timeline;\n  }(Chart);\n  var Chartkick = {\n    LineChart: LineChart,\n    PieChart: PieChart,\n    ColumnChart: ColumnChart,\n    BarChart: BarChart,\n    AreaChart: AreaChart,\n    GeoChart: GeoChart,\n    ScatterChart: ScatterChart,\n    BubbleChart: BubbleChart,\n    Timeline: Timeline,\n    charts: {},\n    configure: function (options) {\n      for (var key in options) {\n        if (options.hasOwnProperty(key)) {\n          config[key] = options[key];\n        }\n      }\n    },\n    setDefaultOptions: function (opts) {\n      Chartkick.options = opts;\n    },\n    eachChart: function (callback) {\n      for (var chartId in Chartkick.charts) {\n        if (Chartkick.charts.hasOwnProperty(chartId)) {\n          callback(Chartkick.charts[chartId]);\n        }\n      }\n    },\n    config: config,\n    options: {},\n    adapters: adapters,\n    addAdapter: addAdapter,\n    use: function (adapter) {\n      addAdapter(adapter);\n      return Chartkick;\n    }\n  };\n\n  // not ideal, but allows for simpler integration\n  if (typeof window !== \"undefined\" && !window.Chartkick) {\n    window.Chartkick = Chartkick;\n  }\n\n  // backwards compatibility for esm require\n  Chartkick.default = Chartkick;\n  return Chartkick;\n});","map":{"version":3,"names":["global","factory","exports","module","define","amd","self","Chartkick","isArray","variable","Object","prototype","toString","call","isFunction","Function","isPlainObject","extend","target","source","key","undefined","merge","obj1","obj2","DATE_PATTERN","ISO8601_PATTERN","DECIMAL_SEPARATOR","String","charAt","parseISO8601","input","day","hour","matches","milliseconds","minutes","month","offset","result","seconds","type","year","match","parseInt","parseFloat","slice","Date","UTC","negativeValues","series","i","j","data","length","toStr","n","toFloat","toDate","str","replace","toArr","arr","hasOwnProperty","push","jsOptionsFunc","defaultOptions","hideLegend","setTitle","setMin","setMax","setStacked","setXtitle","setYtitle","chart","opts","chartOptions","options","legend","title","min","max","stacked","colors","xtitle","ytitle","library","sortByTime","a","b","getTime","sortByNumberSeries","sortByNumber","isMinute","d","getMilliseconds","getSeconds","isHour","getMinutes","isDay","getHours","isWeek","dayOfWeek","getDay","isMonth","getDate","isYear","getMonth","isDate","obj","isNaN","isNumber","byteSuffixes","formatValue","pre","value","axis","prefix","suffix","precision","round","byteScale","suffixIdx","baseValue","Error","toPrecision","zeros","num","Math","pow","toFixed","thousands","decimal","parts","split","seriesOption","option","allZeros","baseOptions","maintainAspectRatio","animation","tooltips","displayColors","callbacks","fontSize","fontColor","scales","yAxes","ticks","maxTicksLimit","scaleLabel","xAxes","gridLines","drawOnChartArea","time","defaultColors","display","position","text","setBarMin","setBarMax","labelString","addOpacity","hex","opacity","exec","notnull","x","setLabelSize","maxLabelSize","ceil","element","offsetWidth","labels","callback","substring","setFormatOptions","chartType","formatOptions","bytes","s","scale","myAxes","stepSize","label","item","datasets","datasetIndex","xLabel","yLabel","dataPoint","index","v","tooltipItem","dataLabel","valueLabel","jsOptions","createDataTable","week","minute","i$1","s$1","j$1","rows","rows2","xtype","sortedLabels","Array","indexOf","sort","k","i$2","s$2","d$1","j$2","point","y","r","color","backgroundColor","dataset","name","fill","borderColor","pointBackgroundColor","borderWidth","pointHoverBackgroundColor","stack","curve","lineTension","points","pointRadius","pointHitRadius","xmin","xmax","gte29","helpers","ticksKey","minTime","maxTime","value$1","timeDiff","unit","step","displayFormats","unitStepSize","tooltipFormat","defaultExport","renderLineChart","drawChart","renderPieChart","donut","cutoutPercentage","values","renderColumnChart","barOptions","renderAreaChart","renderBarChart","renderScatterChart","showLines","renderBubbleChart","destroy","code","window","console","log","JSON","stringify","innerHTML","ctx","getElementsByTagName","defaultOptions$1","xAxis","style","yAxis","credits","enabled","tooltip","plotOptions","areaspline","area","marker","hideLegend$1","verticalAlign","layout","align","setTitle$1","setMin$1","setMax$1","setStacked$1","stackedValue","stacking","setXtitle$1","setYtitle$1","jsOptions$1","setFormatOptions$1","formatter","pointFormatter","defaultExport$1","symbol","pie","innerSize","categories","newSeries","d2","renderTo","id","Chart","loaded","defaultOptions$2","chartArea","fontName","pointSize","textStyle","alignment","curveType","hAxis","titleTextStyle","gridlines","baselineColor","viewWindow","vAxis","hideLegend$2","setTitle$2","setMin$2","setMax$2","setBarMin$1","setBarMax$1","setStacked$2","isStacked","setXtitle$2","italic","setYtitle$2","jsOptions$2","resize","attachEvent","addEventListener","defaultExport$2","this$1","waitForLoaded","top","height","pieHole","visualization","DataTable","addColumn","addRows","areaOpacity","renderGeoChart","colorAxis","row","renderTimeline","lineHeight","clearChart","toJSON","draw","pack","runCallbacks","loadOptions","packages","config","__config","language","mapsApiKey","charts","load","cb","LineChart","Timeline","GeoChart","splice","columnType","concat","pendingRequests","runningRequests","maxRequests","pushRequest","url","success","error","runNext","request","shift","getJSON","requestComplete","ajaxCall","jqXHR","textStatus","errorThrown","message","$","jQuery","Zepto","ajax","dataType","complete","xhr","XMLHttpRequest","open","setRequestHeader","onload","status","parse","responseText","statusText","send","adapters","setText","document","body","innerText","textContent","chartError","noPrefix","errorCatcher","__render","err","fetchDataSource","dataSource","rawData","addDownloadButton","link","createElement","download","filename","right","zIndex","image","alt","border","src","appendChild","__downloadAttached","__enterEvent","addEvent","e","related","relatedTarget","childOf","href","toImage","__leaveEvent","parentNode","removeChild","elem","event","fn","fn2","removeEvent","removeEventListener","detachEvent","p","c","getAdapterType","product","addAdapter","adapterType","adapter","loadAdapters","Highcharts","google","dataEmpty","renderChart","messages","empty","callAdapter","fnName","adapterName","__adapterObject","toFormattedKey","keyType","formatSeriesData","detectXType","noDatetime","detectXTypeWithFunction","func","copySeries","copy","processSeries","discrete","processSimple","perfectData","elementId","getElementById","refresh","startRefresh","getElement","getDataSource","getData","getOptions","getChartObject","getAdapter","updateData","__updateOptions","setOptions","redraw","refreshData","sep","intervalId","setInterval","stopRefresh","clearInterval","background","canvas","tmpCanvas","tmpCtx","getContext","width","fillStyle","fillRect","drawImage","toDataURL","toBase64Image","updateRefresh","__processData","__chartName","apply","arguments","__proto__","create","constructor","PieChart","ColumnChart","BarChart","AreaChart","ScatterChart","BubbleChart","configure","setDefaultOptions","eachChart","chartId","use","default"],"sources":["/Users/bescobar/Desktop/Vue-project/platzi-exchange/node_modules/chartkick/dist/chartkick.js"],"sourcesContent":["/*\n * Chartkick.js\n * Create beautiful charts with one line of JavaScript\n * https://github.com/ankane/chartkick.js\n * v3.2.1\n * MIT License\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.Chartkick = factory());\n}(this, (function () { 'use strict';\n\n  function isArray(variable) {\n    return Object.prototype.toString.call(variable) === \"[object Array]\";\n  }\n\n  function isFunction(variable) {\n    return variable instanceof Function;\n  }\n\n  function isPlainObject(variable) {\n    // protect against prototype pollution, defense 2\n    return Object.prototype.toString.call(variable) === \"[object Object]\" && !isFunction(variable) && variable instanceof Object;\n  }\n\n  // https://github.com/madrobby/zepto/blob/master/src/zepto.js\n  function extend(target, source) {\n    var key;\n    for (key in source) {\n      // protect against prototype pollution, defense 1\n      if (key === \"__proto__\") { continue; }\n\n      if (isPlainObject(source[key]) || isArray(source[key])) {\n        if (isPlainObject(source[key]) && !isPlainObject(target[key])) {\n          target[key] = {};\n        }\n        if (isArray(source[key]) && !isArray(target[key])) {\n          target[key] = [];\n        }\n        extend(target[key], source[key]);\n      } else if (source[key] !== undefined) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  function merge(obj1, obj2) {\n    var target = {};\n    extend(target, obj1);\n    extend(target, obj2);\n    return target;\n  }\n\n  var DATE_PATTERN = /^(\\d\\d\\d\\d)(-)?(\\d\\d)(-)?(\\d\\d)$/i;\n\n  // https://github.com/Do/iso8601.js\n  var ISO8601_PATTERN = /(\\d\\d\\d\\d)(-)?(\\d\\d)(-)?(\\d\\d)(T)?(\\d\\d)(:)?(\\d\\d)?(:)?(\\d\\d)?([.,]\\d+)?($|Z|([+-])(\\d\\d)(:)?(\\d\\d)?)/i;\n  var DECIMAL_SEPARATOR = String(1.5).charAt(1);\n\n  function parseISO8601(input) {\n    var day, hour, matches, milliseconds, minutes, month, offset, result, seconds, type, year;\n    type = Object.prototype.toString.call(input);\n    if (type === \"[object Date]\") {\n      return input;\n    }\n    if (type !== \"[object String]\") {\n      return;\n    }\n    matches = input.match(ISO8601_PATTERN);\n    if (matches) {\n      year = parseInt(matches[1], 10);\n      month = parseInt(matches[3], 10) - 1;\n      day = parseInt(matches[5], 10);\n      hour = parseInt(matches[7], 10);\n      minutes = matches[9] ? parseInt(matches[9], 10) : 0;\n      seconds = matches[11] ? parseInt(matches[11], 10) : 0;\n      milliseconds = matches[12] ? parseFloat(DECIMAL_SEPARATOR + matches[12].slice(1)) * 1000 : 0;\n      result = Date.UTC(year, month, day, hour, minutes, seconds, milliseconds);\n      if (matches[13] && matches[14]) {\n        offset = matches[15] * 60;\n        if (matches[17]) {\n          offset += parseInt(matches[17], 10);\n        }\n        offset *= matches[14] === \"-\" ? -1 : 1;\n        result -= offset * 60 * 1000;\n      }\n      return new Date(result);\n    }\n  }\n  // end iso8601.js\n\n  function negativeValues(series) {\n    var i, j, data;\n    for (i = 0; i < series.length; i++) {\n      data = series[i].data;\n      for (j = 0; j < data.length; j++) {\n        if (data[j][1] < 0) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  function toStr(n) {\n    return \"\" + n;\n  }\n\n  function toFloat(n) {\n    return parseFloat(n);\n  }\n\n  function toDate(n) {\n    var matches, year, month, day;\n    if (typeof n !== \"object\") {\n      if (typeof n === \"number\") {\n        n = new Date(n * 1000); // ms\n      } else {\n        n = toStr(n);\n        if ((matches = n.match(DATE_PATTERN))) {\n        year = parseInt(matches[1], 10);\n        month = parseInt(matches[3], 10) - 1;\n        day = parseInt(matches[5], 10);\n        return new Date(year, month, day);\n        } else { // str\n          // try our best to get the str into iso8601\n          // TODO be smarter about this\n          var str = n.replace(/ /, \"T\").replace(\" \", \"\").replace(\"UTC\", \"Z\");\n          n = parseISO8601(str) || new Date(n);\n        }\n      }\n    }\n    return n;\n  }\n\n  function toArr(n) {\n    if (!isArray(n)) {\n      var arr = [], i;\n      for (i in n) {\n        if (n.hasOwnProperty(i)) {\n          arr.push([i, n[i]]);\n        }\n      }\n      n = arr;\n    }\n    return n;\n  }\n\n  function jsOptionsFunc(defaultOptions, hideLegend, setTitle, setMin, setMax, setStacked, setXtitle, setYtitle) {\n    return function (chart, opts, chartOptions) {\n      var series = chart.data;\n      var options = merge({}, defaultOptions);\n      options = merge(options, chartOptions || {});\n\n      if (chart.hideLegend || \"legend\" in opts) {\n        hideLegend(options, opts.legend, chart.hideLegend);\n      }\n\n      if (opts.title) {\n        setTitle(options, opts.title);\n      }\n\n      // min\n      if (\"min\" in opts) {\n        setMin(options, opts.min);\n      } else if (!negativeValues(series)) {\n        setMin(options, 0);\n      }\n\n      // max\n      if (opts.max) {\n        setMax(options, opts.max);\n      }\n\n      if (\"stacked\" in opts) {\n        setStacked(options, opts.stacked);\n      }\n\n      if (opts.colors) {\n        options.colors = opts.colors;\n      }\n\n      if (opts.xtitle) {\n        setXtitle(options, opts.xtitle);\n      }\n\n      if (opts.ytitle) {\n        setYtitle(options, opts.ytitle);\n      }\n\n      // merge library last\n      options = merge(options, opts.library || {});\n\n      return options;\n    };\n  }\n\n  function sortByTime(a, b) {\n    return a[0].getTime() - b[0].getTime();\n  }\n\n  function sortByNumberSeries(a, b) {\n    return a[0] - b[0];\n  }\n\n  function sortByNumber(a, b) {\n    return a - b;\n  }\n\n  function isMinute(d) {\n    return d.getMilliseconds() === 0 && d.getSeconds() === 0;\n  }\n\n  function isHour(d) {\n    return isMinute(d) && d.getMinutes() === 0;\n  }\n\n  function isDay(d) {\n    return isHour(d) && d.getHours() === 0;\n  }\n\n  function isWeek(d, dayOfWeek) {\n    return isDay(d) && d.getDay() === dayOfWeek;\n  }\n\n  function isMonth(d) {\n    return isDay(d) && d.getDate() === 1;\n  }\n\n  function isYear(d) {\n    return isMonth(d) && d.getMonth() === 0;\n  }\n\n  function isDate(obj) {\n    return !isNaN(toDate(obj)) && toStr(obj).length >= 6;\n  }\n\n  function isNumber(obj) {\n    return typeof obj === \"number\";\n  }\n\n  var byteSuffixes = [\"bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\"];\n\n  function formatValue(pre, value, options, axis) {\n    pre = pre || \"\";\n    if (options.prefix) {\n      if (value < 0) {\n        value = value * -1;\n        pre += \"-\";\n      }\n      pre += options.prefix;\n    }\n\n    var suffix = options.suffix || \"\";\n    var precision = options.precision;\n    var round = options.round;\n\n    if (options.byteScale) {\n      var suffixIdx;\n      var baseValue = axis ? options.byteScale : value;\n\n      if (baseValue >= 1152921504606846976) {\n        value /= 1152921504606846976;\n        suffixIdx = 6;\n      } else if (baseValue >= 1125899906842624) {\n        value /= 1125899906842624;\n        suffixIdx = 5;\n      } else if (baseValue >= 1099511627776) {\n        value /= 1099511627776;\n        suffixIdx = 4;\n      } else if (baseValue >= 1073741824) {\n        value /= 1073741824;\n        suffixIdx = 3;\n      } else if (baseValue >= 1048576) {\n        value /= 1048576;\n        suffixIdx = 2;\n      } else if (baseValue >= 1024) {\n        value /= 1024;\n        suffixIdx = 1;\n      } else {\n        suffixIdx = 0;\n      }\n\n      // TODO handle manual precision case\n      if (precision === undefined && round === undefined) {\n        if (value >= 1023.5) {\n          if (suffixIdx < byteSuffixes.length - 1) {\n            value = 1.0;\n            suffixIdx += 1;\n          }\n        }\n        precision = value >= 1000 ? 4 : 3;\n      }\n      suffix = \" \" + byteSuffixes[suffixIdx];\n    }\n\n    if (precision !== undefined && round !== undefined) {\n      throw Error(\"Use either round or precision, not both\");\n    }\n\n    if (!axis) {\n      if (precision !== undefined) {\n        value = value.toPrecision(precision);\n        if (!options.zeros) {\n          value = parseFloat(value);\n        }\n      }\n\n      if (round !== undefined) {\n        if (round < 0) {\n          var num = Math.pow(10, -1 * round);\n          value = parseInt((1.0 * value / num).toFixed(0)) * num;\n        } else {\n          value = value.toFixed(round);\n          if (!options.zeros) {\n            value = parseFloat(value);\n          }\n        }\n      }\n    }\n\n    if (options.thousands || options.decimal) {\n      value = toStr(value);\n      var parts = value.split(\".\");\n      value = parts[0];\n      if (options.thousands) {\n        value = value.replace(/\\B(?=(\\d{3})+(?!\\d))/g, options.thousands);\n      }\n      if (parts.length > 1) {\n        value += (options.decimal || \".\") + parts[1];\n      }\n    }\n\n    return pre + value + suffix;\n  }\n\n  function seriesOption(chart, series, option) {\n    if (option in series) {\n      return series[option];\n    } else if (option in chart.options) {\n      return chart.options[option];\n    }\n    return null;\n  }\n\n  function allZeros(data) {\n    var i, j, d;\n    for (i = 0; i < data.length; i++) {\n      d = data[i].data;\n      for (j = 0; j < d.length; j++) {\n        if (d[j][1] != 0) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  var baseOptions = {\n    maintainAspectRatio: false,\n    animation: false,\n    tooltips: {\n      displayColors: false,\n      callbacks: {}\n    },\n    legend: {},\n    title: {fontSize: 20, fontColor: \"#333\"}\n  };\n\n  var defaultOptions = {\n    scales: {\n      yAxes: [\n        {\n          ticks: {\n            maxTicksLimit: 4\n          },\n          scaleLabel: {\n            fontSize: 16,\n            // fontStyle: \"bold\",\n            fontColor: \"#333\"\n          }\n        }\n      ],\n      xAxes: [\n        {\n          gridLines: {\n            drawOnChartArea: false\n          },\n          scaleLabel: {\n            fontSize: 16,\n            // fontStyle: \"bold\",\n            fontColor: \"#333\"\n          },\n          time: {},\n          ticks: {}\n        }\n      ]\n    }\n  };\n\n  // http://there4.io/2012/05/02/google-chart-color-list/\n  var defaultColors = [\n    \"#3366CC\", \"#DC3912\", \"#FF9900\", \"#109618\", \"#990099\", \"#3B3EAC\", \"#0099C6\",\n    \"#DD4477\", \"#66AA00\", \"#B82E2E\", \"#316395\", \"#994499\", \"#22AA99\", \"#AAAA11\",\n    \"#6633CC\", \"#E67300\", \"#8B0707\", \"#329262\", \"#5574A6\", \"#651067\"\n  ];\n\n  var hideLegend = function (options, legend, hideLegend) {\n    if (legend !== undefined) {\n      options.legend.display = !!legend;\n      if (legend && legend !== true) {\n        options.legend.position = legend;\n      }\n    } else if (hideLegend) {\n      options.legend.display = false;\n    }\n  };\n\n  var setTitle = function (options, title) {\n    options.title.display = true;\n    options.title.text = title;\n  };\n\n  var setMin = function (options, min) {\n    if (min !== null) {\n      options.scales.yAxes[0].ticks.min = toFloat(min);\n    }\n  };\n\n  var setMax = function (options, max) {\n    options.scales.yAxes[0].ticks.max = toFloat(max);\n  };\n\n  var setBarMin = function (options, min) {\n    if (min !== null) {\n      options.scales.xAxes[0].ticks.min = toFloat(min);\n    }\n  };\n\n  var setBarMax = function (options, max) {\n    options.scales.xAxes[0].ticks.max = toFloat(max);\n  };\n\n  var setStacked = function (options, stacked) {\n    options.scales.xAxes[0].stacked = !!stacked;\n    options.scales.yAxes[0].stacked = !!stacked;\n  };\n\n  var setXtitle = function (options, title) {\n    options.scales.xAxes[0].scaleLabel.display = true;\n    options.scales.xAxes[0].scaleLabel.labelString = title;\n  };\n\n  var setYtitle = function (options, title) {\n    options.scales.yAxes[0].scaleLabel.display = true;\n    options.scales.yAxes[0].scaleLabel.labelString = title;\n  };\n\n  // https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\n  var addOpacity = function(hex, opacity) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? \"rgba(\" + parseInt(result[1], 16) + \", \" + parseInt(result[2], 16) + \", \" + parseInt(result[3], 16) + \", \" + opacity + \")\" : hex;\n  };\n\n  // check if not null or undefined\n  // https://stackoverflow.com/a/27757708/1177228\n  var notnull = function(x) {\n    return x != null;\n  };\n\n  var setLabelSize = function (chart, data, options) {\n    var maxLabelSize = Math.ceil(chart.element.offsetWidth / 4.0 / data.labels.length);\n    if (maxLabelSize > 25) {\n      maxLabelSize = 25;\n    } else if (maxLabelSize < 10) {\n      maxLabelSize = 10;\n    }\n    if (!options.scales.xAxes[0].ticks.callback) {\n      options.scales.xAxes[0].ticks.callback = function (value) {\n        value = toStr(value);\n        if (value.length > maxLabelSize) {\n          return value.substring(0, maxLabelSize - 2) + \"...\";\n        } else {\n          return value;\n        }\n      };\n    }\n  };\n\n  var setFormatOptions = function(chart, options, chartType) {\n    var formatOptions = {\n      prefix: chart.options.prefix,\n      suffix: chart.options.suffix,\n      thousands: chart.options.thousands,\n      decimal: chart.options.decimal,\n      precision: chart.options.precision,\n      round: chart.options.round,\n      zeros: chart.options.zeros\n    };\n\n    if (chart.options.bytes) {\n      var series = chart.data;\n      if (chartType === \"pie\") {\n        series = [{data: series}];\n      }\n\n      // calculate max\n      var max = 0;\n      for (var i = 0; i < series.length; i++) {\n        var s = series[i];\n        for (var j = 0; j < s.data.length; j++) {\n          if (s.data[j][1] > max) {\n            max = s.data[j][1];\n          }\n        }\n      }\n\n      // calculate scale\n      var scale = 1;\n      while (max >= 1024) {\n        scale *= 1024;\n        max /= 1024;\n      }\n\n      // set step size\n      formatOptions.byteScale = scale;\n    }\n\n    if (chartType !== \"pie\") {\n      var myAxes = options.scales.yAxes;\n      if (chartType === \"bar\") {\n        myAxes = options.scales.xAxes;\n      }\n\n      if (formatOptions.byteScale) {\n        if (!myAxes[0].ticks.stepSize) {\n          myAxes[0].ticks.stepSize = formatOptions.byteScale / 2;\n        }\n        if (!myAxes[0].ticks.maxTicksLimit) {\n          myAxes[0].ticks.maxTicksLimit = 4;\n        }\n      }\n\n      if (!myAxes[0].ticks.callback) {\n        myAxes[0].ticks.callback = function (value) {\n          return formatValue(\"\", value, formatOptions, true);\n        };\n      }\n    }\n\n    if (!options.tooltips.callbacks.label) {\n      if (chartType === \"scatter\") {\n        options.tooltips.callbacks.label = function (item, data) {\n          var label = data.datasets[item.datasetIndex].label || '';\n          if (label) {\n            label += ': ';\n          }\n          return label + '(' + item.xLabel + ', ' + item.yLabel + ')';\n        };\n      } else if (chartType === \"bubble\") {\n        options.tooltips.callbacks.label = function (item, data) {\n          var label = data.datasets[item.datasetIndex].label || '';\n          if (label) {\n            label += ': ';\n          }\n          var dataPoint = data.datasets[item.datasetIndex].data[item.index];\n          return label + '(' + item.xLabel + ', ' + item.yLabel + ', ' + dataPoint.v + ')';\n        };\n      } else if (chartType === \"pie\") {\n        // need to use separate label for pie charts\n        options.tooltips.callbacks.label = function (tooltipItem, data) {\n          var dataLabel = data.labels[tooltipItem.index];\n          var value = ': ';\n\n          if (isArray(dataLabel)) {\n            // show value on first line of multiline label\n            // need to clone because we are changing the value\n            dataLabel = dataLabel.slice();\n            dataLabel[0] += value;\n          } else {\n            dataLabel += value;\n          }\n\n          return formatValue(dataLabel, data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index], formatOptions);\n        };\n      } else {\n        var valueLabel = chartType === \"bar\" ? \"xLabel\" : \"yLabel\";\n        options.tooltips.callbacks.label = function (tooltipItem, data) {\n          var label = data.datasets[tooltipItem.datasetIndex].label || '';\n          if (label) {\n            label += ': ';\n          }\n          return formatValue(label, tooltipItem[valueLabel], formatOptions);\n        };\n      }\n    }\n  };\n\n  var jsOptions = jsOptionsFunc(merge(baseOptions, defaultOptions), hideLegend, setTitle, setMin, setMax, setStacked, setXtitle, setYtitle);\n\n  var createDataTable = function (chart, options, chartType, library) {\n    var datasets = [];\n    var labels = [];\n\n    var colors = chart.options.colors || defaultColors;\n\n    var day = true;\n    var week = true;\n    var dayOfWeek;\n    var month = true;\n    var year = true;\n    var hour = true;\n    var minute = true;\n\n    var series = chart.data;\n\n    var max = 0;\n    if (chartType === \"bubble\") {\n      for (var i$1 = 0; i$1 < series.length; i$1++) {\n        var s$1 = series[i$1];\n        for (var j$1 = 0; j$1 < s$1.data.length; j$1++) {\n          if (s$1.data[j$1][2] > max) {\n            max = s$1.data[j$1][2];\n          }\n        }\n      }\n    }\n\n    var i, j, s, d, key, rows = [], rows2 = [];\n\n    if (chartType === \"bar\" || chartType === \"column\" || (chart.xtype !== \"number\" && chart.xtype !== \"bubble\")) {\n      var sortedLabels = [];\n\n      for (i = 0; i < series.length; i++) {\n        s = series[i];\n\n        for (j = 0; j < s.data.length; j++) {\n          d = s.data[j];\n          key = chart.xtype == \"datetime\" ? d[0].getTime() : d[0];\n          if (!rows[key]) {\n            rows[key] = new Array(series.length);\n          }\n          rows[key][i] = toFloat(d[1]);\n          if (sortedLabels.indexOf(key) === -1) {\n            sortedLabels.push(key);\n          }\n        }\n      }\n\n      if (chart.xtype === \"datetime\" || chart.xtype === \"number\") {\n        sortedLabels.sort(sortByNumber);\n      }\n\n      for (j = 0; j < series.length; j++) {\n        rows2.push([]);\n      }\n\n      var value;\n      var k;\n      for (k = 0; k < sortedLabels.length; k++) {\n        i = sortedLabels[k];\n        if (chart.xtype === \"datetime\") {\n          value = new Date(toFloat(i));\n          // TODO make this efficient\n          day = day && isDay(value);\n          if (!dayOfWeek) {\n            dayOfWeek = value.getDay();\n          }\n          week = week && isWeek(value, dayOfWeek);\n          month = month && isMonth(value);\n          year = year && isYear(value);\n          hour = hour && isHour(value);\n          minute = minute && isMinute(value);\n        } else {\n          value = i;\n        }\n        labels.push(value);\n        for (j = 0; j < series.length; j++) {\n          // Chart.js doesn't like undefined\n          rows2[j].push(rows[i][j] === undefined ? null : rows[i][j]);\n        }\n      }\n    } else {\n      for (var i$2 = 0; i$2 < series.length; i$2++) {\n        var s$2 = series[i$2];\n        var d$1 = [];\n        for (var j$2 = 0; j$2 < s$2.data.length; j$2++) {\n          var point = {\n            x: toFloat(s$2.data[j$2][0]),\n            y: toFloat(s$2.data[j$2][1])\n          };\n          if (chartType === \"bubble\") {\n            point.r = toFloat(s$2.data[j$2][2]) * 20 / max;\n            // custom attribute, for tooltip\n            point.v = s$2.data[j$2][2];\n          }\n          d$1.push(point);\n        }\n        rows2.push(d$1);\n      }\n    }\n\n    for (i = 0; i < series.length; i++) {\n      s = series[i];\n\n      var color = s.color || colors[i];\n      var backgroundColor = chartType !== \"line\" ? addOpacity(color, 0.5) : color;\n\n      var dataset = {\n        label: s.name || \"\",\n        data: rows2[i],\n        fill: chartType === \"area\",\n        borderColor: color,\n        backgroundColor: backgroundColor,\n        pointBackgroundColor: color,\n        borderWidth: 2,\n        pointHoverBackgroundColor: color\n      };\n\n      if (s.stack) {\n        dataset.stack = s.stack;\n      }\n\n      var curve = seriesOption(chart, s, \"curve\");\n      if (curve === false) {\n        dataset.lineTension = 0;\n      }\n\n      var points = seriesOption(chart, s, \"points\");\n      if (points === false) {\n        dataset.pointRadius = 0;\n        dataset.pointHitRadius = 5;\n      }\n\n      dataset = merge(dataset, chart.options.dataset || {});\n      dataset = merge(dataset, s.library || {});\n      dataset = merge(dataset, s.dataset || {});\n\n      datasets.push(dataset);\n    }\n\n    var xmin = chart.options.xmin;\n    var xmax = chart.options.xmax;\n\n    if (chart.xtype === \"datetime\") {\n      // hacky check for Chart.js >= 2.9.0\n      // https://github.com/chartjs/Chart.js/compare/v2.8.0...v2.9.0\n      var gte29 = \"math\" in library.helpers;\n      var ticksKey = gte29 ? \"ticks\" : \"time\";\n      if (notnull(xmin)) {\n        options.scales.xAxes[0][ticksKey].min = toDate(xmin).getTime();\n      }\n      if (notnull(xmax)) {\n        options.scales.xAxes[0][ticksKey].max = toDate(xmax).getTime();\n      }\n    } else if (chart.xtype === \"number\") {\n      if (notnull(xmin)) {\n        options.scales.xAxes[0].ticks.min = xmin;\n      }\n      if (notnull(xmax)) {\n        options.scales.xAxes[0].ticks.max = xmax;\n      }\n    }\n\n    // for empty datetime chart\n    if (chart.xtype === \"datetime\" && labels.length === 0) {\n      if (notnull(xmin)) {\n        labels.push(toDate(xmin));\n      }\n      if (notnull(xmax)) {\n        labels.push(toDate(xmax));\n      }\n      day = false;\n      week = false;\n      month = false;\n      year = false;\n      hour = false;\n      minute = false;\n    }\n\n    if (chart.xtype === \"datetime\" && labels.length > 0) {\n      var minTime = (notnull(xmin) ? toDate(xmin) : labels[0]).getTime();\n      var maxTime = (notnull(xmax) ? toDate(xmax) : labels[0]).getTime();\n\n      for (i = 1; i < labels.length; i++) {\n        var value$1 = labels[i].getTime();\n        if (value$1 < minTime) {\n          minTime = value$1;\n        }\n        if (value$1 > maxTime) {\n          maxTime = value$1;\n        }\n      }\n\n      var timeDiff = (maxTime - minTime) / (86400 * 1000.0);\n\n      if (!options.scales.xAxes[0].time.unit) {\n        var step;\n        if (year || timeDiff > 365 * 10) {\n          options.scales.xAxes[0].time.unit = \"year\";\n          step = 365;\n        } else if (month || timeDiff > 30 * 10) {\n          options.scales.xAxes[0].time.unit = \"month\";\n          step = 30;\n        } else if (day || timeDiff > 10) {\n          options.scales.xAxes[0].time.unit = \"day\";\n          step = 1;\n        } else if (hour || timeDiff > 0.5) {\n          options.scales.xAxes[0].time.displayFormats = {hour: \"MMM D, h a\"};\n          options.scales.xAxes[0].time.unit = \"hour\";\n          step = 1 / 24.0;\n        } else if (minute) {\n          options.scales.xAxes[0].time.displayFormats = {minute: \"h:mm a\"};\n          options.scales.xAxes[0].time.unit = \"minute\";\n          step = 1 / 24.0 / 60.0;\n        }\n\n        if (step && timeDiff > 0) {\n          var unitStepSize = Math.ceil(timeDiff / step / (chart.element.offsetWidth / 100.0));\n          if (week && step === 1) {\n            unitStepSize = Math.ceil(unitStepSize / 7.0) * 7;\n          }\n          options.scales.xAxes[0].time.unitStepSize = unitStepSize;\n        }\n      }\n\n      if (!options.scales.xAxes[0].time.tooltipFormat) {\n        if (day) {\n          options.scales.xAxes[0].time.tooltipFormat = \"ll\";\n        } else if (hour) {\n          options.scales.xAxes[0].time.tooltipFormat = \"MMM D, h a\";\n        } else if (minute) {\n          options.scales.xAxes[0].time.tooltipFormat = \"h:mm a\";\n        }\n      }\n    }\n\n    var data = {\n      labels: labels,\n      datasets: datasets\n    };\n\n    return data;\n  };\n\n  var defaultExport = function defaultExport(library) {\n    this.name = \"chartjs\";\n    this.library = library;\n  };\n\n  defaultExport.prototype.renderLineChart = function renderLineChart (chart, chartType) {\n    var chartOptions = {};\n    // fix for https://github.com/chartjs/Chart.js/issues/2441\n    if (!chart.options.max && allZeros(chart.data)) {\n      chartOptions.max = 1;\n    }\n\n    var options = jsOptions(chart, merge(chartOptions, chart.options));\n    setFormatOptions(chart, options, chartType);\n\n    var data = createDataTable(chart, options, chartType || \"line\", this.library);\n\n    if (chart.xtype === \"number\") {\n      options.scales.xAxes[0].type = \"linear\";\n      options.scales.xAxes[0].position = \"bottom\";\n    } else {\n      options.scales.xAxes[0].type = chart.xtype === \"string\" ? \"category\" : \"time\";\n    }\n\n    this.drawChart(chart, \"line\", data, options);\n  };\n\n  defaultExport.prototype.renderPieChart = function renderPieChart (chart) {\n    var options = merge({}, baseOptions);\n    if (chart.options.donut) {\n      options.cutoutPercentage = 50;\n    }\n\n    if (\"legend\" in chart.options) {\n      hideLegend(options, chart.options.legend);\n    }\n\n    if (chart.options.title) {\n      setTitle(options, chart.options.title);\n    }\n\n    options = merge(options, chart.options.library || {});\n    setFormatOptions(chart, options, \"pie\");\n\n    var labels = [];\n    var values = [];\n    for (var i = 0; i < chart.data.length; i++) {\n      var point = chart.data[i];\n      labels.push(point[0]);\n      values.push(point[1]);\n    }\n\n    var dataset = {\n      data: values,\n      backgroundColor: chart.options.colors || defaultColors\n    };\n    dataset = merge(dataset, chart.options.dataset || {});\n\n    var data = {\n      labels: labels,\n      datasets: [dataset]\n    };\n\n    this.drawChart(chart, \"pie\", data, options);\n  };\n\n  defaultExport.prototype.renderColumnChart = function renderColumnChart (chart, chartType) {\n    var options;\n    if (chartType === \"bar\") {\n      var barOptions = merge(baseOptions, defaultOptions);\n      delete barOptions.scales.yAxes[0].ticks.maxTicksLimit;\n      options = jsOptionsFunc(barOptions, hideLegend, setTitle, setBarMin, setBarMax, setStacked, setXtitle, setYtitle)(chart, chart.options);\n    } else {\n      options = jsOptions(chart, chart.options);\n    }\n    setFormatOptions(chart, options, chartType);\n    var data = createDataTable(chart, options, \"column\", this.library);\n    if (chartType !== \"bar\") {\n      setLabelSize(chart, data, options);\n    }\n    this.drawChart(chart, (chartType === \"bar\" ? \"horizontalBar\" : \"bar\"), data, options);\n  };\n\n  defaultExport.prototype.renderAreaChart = function renderAreaChart (chart) {\n    this.renderLineChart(chart, \"area\");\n  };\n\n  defaultExport.prototype.renderBarChart = function renderBarChart (chart) {\n    this.renderColumnChart(chart, \"bar\");\n  };\n\n  defaultExport.prototype.renderScatterChart = function renderScatterChart (chart, chartType) {\n    chartType = chartType || \"scatter\";\n\n    var options = jsOptions(chart, chart.options);\n    setFormatOptions(chart, options, chartType);\n\n    if (!(\"showLines\" in options)) {\n      options.showLines = false;\n    }\n\n    var data = createDataTable(chart, options, chartType, this.library);\n\n    options.scales.xAxes[0].type = \"linear\";\n    options.scales.xAxes[0].position = \"bottom\";\n\n    this.drawChart(chart, chartType, data, options);\n  };\n\n  defaultExport.prototype.renderBubbleChart = function renderBubbleChart (chart) {\n    this.renderScatterChart(chart, \"bubble\");\n  };\n\n  defaultExport.prototype.destroy = function destroy (chart) {\n    if (chart.chart) {\n      chart.chart.destroy();\n    }\n  };\n\n  defaultExport.prototype.drawChart = function drawChart (chart, type, data, options) {\n    this.destroy(chart);\n\n    var chartOptions = {\n      type: type,\n      data: data,\n      options: options\n    };\n\n    if (chart.options.code) {\n      window.console.log(\"new Chart(ctx, \" + JSON.stringify(chartOptions) + \");\");\n    }\n\n    chart.element.innerHTML = \"<canvas></canvas>\";\n    var ctx = chart.element.getElementsByTagName(\"CANVAS\")[0];\n    chart.chart = new this.library(ctx, chartOptions);\n  };\n\n  var defaultOptions$1 = {\n    chart: {},\n    xAxis: {\n      title: {\n        text: null\n      },\n      labels: {\n        style: {\n          fontSize: \"12px\"\n        }\n      }\n    },\n    yAxis: {\n      title: {\n        text: null\n      },\n      labels: {\n        style: {\n          fontSize: \"12px\"\n        }\n      }\n    },\n    title: {\n      text: null\n    },\n    credits: {\n      enabled: false\n    },\n    legend: {\n      borderWidth: 0\n    },\n    tooltip: {\n      style: {\n        fontSize: \"12px\"\n      }\n    },\n    plotOptions: {\n      areaspline: {},\n      area: {},\n      series: {\n        marker: {}\n      }\n    }\n  };\n\n  var hideLegend$1 = function (options, legend, hideLegend) {\n    if (legend !== undefined) {\n      options.legend.enabled = !!legend;\n      if (legend && legend !== true) {\n        if (legend === \"top\" || legend === \"bottom\") {\n          options.legend.verticalAlign = legend;\n        } else {\n          options.legend.layout = \"vertical\";\n          options.legend.verticalAlign = \"middle\";\n          options.legend.align = legend;\n        }\n      }\n    } else if (hideLegend) {\n      options.legend.enabled = false;\n    }\n  };\n\n  var setTitle$1 = function (options, title) {\n    options.title.text = title;\n  };\n\n  var setMin$1 = function (options, min) {\n    options.yAxis.min = min;\n  };\n\n  var setMax$1 = function (options, max) {\n    options.yAxis.max = max;\n  };\n\n  var setStacked$1 = function (options, stacked) {\n    var stackedValue = stacked ? (stacked === true ? \"normal\" : stacked) : null;\n    options.plotOptions.series.stacking = stackedValue;\n    options.plotOptions.area.stacking = stackedValue;\n    options.plotOptions.areaspline.stacking = stackedValue;\n  };\n\n  var setXtitle$1 = function (options, title) {\n    options.xAxis.title.text = title;\n  };\n\n  var setYtitle$1 = function (options, title) {\n    options.yAxis.title.text = title;\n  };\n\n  var jsOptions$1 = jsOptionsFunc(defaultOptions$1, hideLegend$1, setTitle$1, setMin$1, setMax$1, setStacked$1, setXtitle$1, setYtitle$1);\n\n  var setFormatOptions$1 = function(chart, options, chartType) {\n    var formatOptions = {\n      prefix: chart.options.prefix,\n      suffix: chart.options.suffix,\n      thousands: chart.options.thousands,\n      decimal: chart.options.decimal,\n      precision: chart.options.precision,\n      round: chart.options.round,\n      zeros: chart.options.zeros\n    };\n\n    if (chartType !== \"pie\" && !options.yAxis.labels.formatter) {\n      options.yAxis.labels.formatter = function () {\n        return formatValue(\"\", this.value, formatOptions);\n      };\n    }\n\n    if (!options.tooltip.pointFormatter) {\n      options.tooltip.pointFormatter = function () {\n        return '<span style=\"color:' + this.color + '\">\\u25CF</span> ' + formatValue(this.series.name + ': <b>', this.y, formatOptions) + '</b><br/>';\n      };\n    }\n  };\n\n  var defaultExport$1 = function defaultExport(library) {\n    this.name = \"highcharts\";\n    this.library = library;\n  };\n\n  defaultExport$1.prototype.renderLineChart = function renderLineChart (chart, chartType) {\n    chartType = chartType || \"spline\";\n    var chartOptions = {};\n    if (chartType === \"areaspline\") {\n      chartOptions = {\n        plotOptions: {\n          areaspline: {\n            stacking: \"normal\"\n          },\n          area: {\n            stacking: \"normal\"\n          },\n          series: {\n            marker: {\n              enabled: false\n            }\n          }\n        }\n      };\n    }\n\n    if (chart.options.curve === false) {\n      if (chartType === \"areaspline\") {\n        chartType = \"area\";\n      } else if (chartType === \"spline\") {\n        chartType = \"line\";\n      }\n    }\n\n    var options = jsOptions$1(chart, chart.options, chartOptions), data, i, j;\n    options.xAxis.type = chart.xtype === \"string\" ? \"category\" : (chart.xtype === \"number\" ? \"linear\" : \"datetime\");\n    if (!options.chart.type) {\n      options.chart.type = chartType;\n    }\n    setFormatOptions$1(chart, options, chartType);\n\n    var series = chart.data;\n    for (i = 0; i < series.length; i++) {\n      series[i].name = series[i].name || \"Value\";\n      data = series[i].data;\n      if (chart.xtype === \"datetime\") {\n        for (j = 0; j < data.length; j++) {\n          data[j][0] = data[j][0].getTime();\n        }\n      }\n      series[i].marker = {symbol: \"circle\"};\n      if (chart.options.points === false) {\n        series[i].marker.enabled = false;\n      }\n    }\n\n    this.drawChart(chart, series, options);\n  };\n\n  defaultExport$1.prototype.renderScatterChart = function renderScatterChart (chart) {\n    var options = jsOptions$1(chart, chart.options, {});\n    options.chart.type = \"scatter\";\n    this.drawChart(chart, chart.data, options);\n  };\n\n  defaultExport$1.prototype.renderPieChart = function renderPieChart (chart) {\n    var chartOptions = merge(defaultOptions$1, {});\n\n    if (chart.options.colors) {\n      chartOptions.colors = chart.options.colors;\n    }\n    if (chart.options.donut) {\n      chartOptions.plotOptions = {pie: {innerSize: \"50%\"}};\n    }\n\n    if (\"legend\" in chart.options) {\n      hideLegend$1(chartOptions, chart.options.legend);\n    }\n\n    if (chart.options.title) {\n      setTitle$1(chartOptions, chart.options.title);\n    }\n\n    var options = merge(chartOptions, chart.options.library || {});\n    setFormatOptions$1(chart, options, \"pie\");\n    var series = [{\n      type: \"pie\",\n      name: chart.options.label || \"Value\",\n      data: chart.data\n    }];\n\n    this.drawChart(chart, series, options);\n  };\n\n  defaultExport$1.prototype.renderColumnChart = function renderColumnChart (chart, chartType) {\n    chartType = chartType || \"column\";\n    var series = chart.data;\n    var options = jsOptions$1(chart, chart.options), i, j, s, d, rows = [], categories = [];\n    options.chart.type = chartType;\n    setFormatOptions$1(chart, options, chartType);\n\n    for (i = 0; i < series.length; i++) {\n      s = series[i];\n\n      for (j = 0; j < s.data.length; j++) {\n        d = s.data[j];\n        if (!rows[d[0]]) {\n          rows[d[0]] = new Array(series.length);\n          categories.push(d[0]);\n        }\n        rows[d[0]][i] = d[1];\n      }\n    }\n\n    if (chart.xtype === \"number\") {\n      categories.sort(sortByNumber);\n    }\n\n    options.xAxis.categories = categories;\n\n    var newSeries = [], d2;\n    for (i = 0; i < series.length; i++) {\n      d = [];\n      for (j = 0; j < categories.length; j++) {\n        d.push(rows[categories[j]][i] || 0);\n      }\n\n      d2 = {\n        name: series[i].name || \"Value\",\n        data: d\n      };\n      if (series[i].stack) {\n        d2.stack = series[i].stack;\n      }\n\n      newSeries.push(d2);\n    }\n\n    this.drawChart(chart, newSeries, options);\n  };\n\n  defaultExport$1.prototype.renderBarChart = function renderBarChart (chart) {\n    this.renderColumnChart(chart, \"bar\");\n  };\n\n  defaultExport$1.prototype.renderAreaChart = function renderAreaChart (chart) {\n    this.renderLineChart(chart, \"areaspline\");\n  };\n\n  defaultExport$1.prototype.destroy = function destroy (chart) {\n    if (chart.chart) {\n      chart.chart.destroy();\n    }\n  };\n\n  defaultExport$1.prototype.drawChart = function drawChart (chart, data, options) {\n    this.destroy(chart);\n\n    options.chart.renderTo = chart.element.id;\n    options.series = data;\n\n    if (chart.options.code) {\n      window.console.log(\"new Highcharts.Chart(\" + JSON.stringify(options) + \");\");\n    }\n\n    chart.chart = new this.library.Chart(options);\n  };\n\n  var loaded = {};\n  var callbacks = [];\n\n  // Set chart options\n  var defaultOptions$2 = {\n    chartArea: {},\n    fontName: \"'Lucida Grande', 'Lucida Sans Unicode', Verdana, Arial, Helvetica, sans-serif\",\n    pointSize: 6,\n    legend: {\n      textStyle: {\n        fontSize: 12,\n        color: \"#444\"\n      },\n      alignment: \"center\",\n      position: \"right\"\n    },\n    curveType: \"function\",\n    hAxis: {\n      textStyle: {\n        color: \"#666\",\n        fontSize: 12\n      },\n      titleTextStyle: {},\n      gridlines: {\n        color: \"transparent\"\n      },\n      baselineColor: \"#ccc\",\n      viewWindow: {}\n    },\n    vAxis: {\n      textStyle: {\n        color: \"#666\",\n        fontSize: 12\n      },\n      titleTextStyle: {},\n      baselineColor: \"#ccc\",\n      viewWindow: {}\n    },\n    tooltip: {\n      textStyle: {\n        color: \"#666\",\n        fontSize: 12\n      }\n    }\n  };\n\n  var hideLegend$2 = function (options, legend, hideLegend) {\n    if (legend !== undefined) {\n      var position;\n      if (!legend) {\n        position = \"none\";\n      } else if (legend === true) {\n        position = \"right\";\n      } else {\n        position = legend;\n      }\n      options.legend.position = position;\n    } else if (hideLegend) {\n      options.legend.position = \"none\";\n    }\n  };\n\n  var setTitle$2 = function (options, title) {\n    options.title = title;\n    options.titleTextStyle = {color: \"#333\", fontSize: \"20px\"};\n  };\n\n  var setMin$2 = function (options, min) {\n    options.vAxis.viewWindow.min = min;\n  };\n\n  var setMax$2 = function (options, max) {\n    options.vAxis.viewWindow.max = max;\n  };\n\n  var setBarMin$1 = function (options, min) {\n    options.hAxis.viewWindow.min = min;\n  };\n\n  var setBarMax$1 = function (options, max) {\n    options.hAxis.viewWindow.max = max;\n  };\n\n  var setStacked$2 = function (options, stacked) {\n    options.isStacked = stacked ? stacked : false;\n  };\n\n  var setXtitle$2 = function (options, title) {\n    options.hAxis.title = title;\n    options.hAxis.titleTextStyle.italic = false;\n  };\n\n  var setYtitle$2 = function (options, title) {\n    options.vAxis.title = title;\n    options.vAxis.titleTextStyle.italic = false;\n  };\n\n  var jsOptions$2 = jsOptionsFunc(defaultOptions$2, hideLegend$2, setTitle$2, setMin$2, setMax$2, setStacked$2, setXtitle$2, setYtitle$2);\n\n  var resize = function (callback) {\n    if (window.attachEvent) {\n      window.attachEvent(\"onresize\", callback);\n    } else if (window.addEventListener) {\n      window.addEventListener(\"resize\", callback, true);\n    }\n    callback();\n  };\n\n  var defaultExport$2 = function defaultExport(library) {\n    this.name = \"google\";\n    this.library = library;\n  };\n\n  defaultExport$2.prototype.renderLineChart = function renderLineChart (chart) {\n      var this$1 = this;\n\n    this.waitForLoaded(chart, function () {\n      var chartOptions = {};\n\n      if (chart.options.curve === false) {\n        chartOptions.curveType = \"none\";\n      }\n\n      if (chart.options.points === false) {\n        chartOptions.pointSize = 0;\n      }\n\n      var options = jsOptions$2(chart, chart.options, chartOptions);\n      var data = this$1.createDataTable(chart.data, chart.xtype);\n\n      this$1.drawChart(chart, \"LineChart\", data, options);\n    });\n  };\n\n  defaultExport$2.prototype.renderPieChart = function renderPieChart (chart) {\n      var this$1 = this;\n\n    this.waitForLoaded(chart, function () {\n      var chartOptions = {\n        chartArea: {\n          top: \"10%\",\n          height: \"80%\"\n        },\n        legend: {}\n      };\n      if (chart.options.colors) {\n        chartOptions.colors = chart.options.colors;\n      }\n      if (chart.options.donut) {\n        chartOptions.pieHole = 0.5;\n      }\n      if (\"legend\" in chart.options) {\n        hideLegend$2(chartOptions, chart.options.legend);\n      }\n      if (chart.options.title) {\n        setTitle$2(chartOptions, chart.options.title);\n      }\n      var options = merge(merge(defaultOptions$2, chartOptions), chart.options.library || {});\n\n      var data = new this$1.library.visualization.DataTable();\n      data.addColumn(\"string\", \"\");\n      data.addColumn(\"number\", \"Value\");\n      data.addRows(chart.data);\n\n      this$1.drawChart(chart, \"PieChart\", data, options);\n    });\n  };\n\n  defaultExport$2.prototype.renderColumnChart = function renderColumnChart (chart) {\n      var this$1 = this;\n\n    this.waitForLoaded(chart, function () {\n      var options = jsOptions$2(chart, chart.options);\n      var data = this$1.createDataTable(chart.data, chart.xtype);\n\n      this$1.drawChart(chart, \"ColumnChart\", data, options);\n    });\n  };\n\n  defaultExport$2.prototype.renderBarChart = function renderBarChart (chart) {\n      var this$1 = this;\n\n    this.waitForLoaded(chart, function () {\n      var chartOptions = {\n        hAxis: {\n          gridlines: {\n            color: \"#ccc\"\n          }\n        }\n      };\n      var options = jsOptionsFunc(defaultOptions$2, hideLegend$2, setTitle$2, setBarMin$1, setBarMax$1, setStacked$2, setXtitle$2, setYtitle$2)(chart, chart.options, chartOptions);\n      var data = this$1.createDataTable(chart.data, chart.xtype);\n\n      this$1.drawChart(chart, \"BarChart\", data, options);\n    });\n  };\n\n  defaultExport$2.prototype.renderAreaChart = function renderAreaChart (chart) {\n      var this$1 = this;\n\n    this.waitForLoaded(chart, function () {\n      var chartOptions = {\n        isStacked: true,\n        pointSize: 0,\n        areaOpacity: 0.5\n      };\n\n      var options = jsOptions$2(chart, chart.options, chartOptions);\n      var data = this$1.createDataTable(chart.data, chart.xtype);\n\n      this$1.drawChart(chart, \"AreaChart\", data, options);\n    });\n  };\n\n  defaultExport$2.prototype.renderGeoChart = function renderGeoChart (chart) {\n      var this$1 = this;\n\n    this.waitForLoaded(chart, \"geochart\", function () {\n      var chartOptions = {\n        legend: \"none\",\n        colorAxis: {\n          colors: chart.options.colors || [\"#f6c7b6\", \"#ce502d\"]\n        }\n      };\n      var options = merge(merge(defaultOptions$2, chartOptions), chart.options.library || {});\n\n      var data = new this$1.library.visualization.DataTable();\n      data.addColumn(\"string\", \"\");\n      data.addColumn(\"number\", chart.options.label || \"Value\");\n      data.addRows(chart.data);\n\n      this$1.drawChart(chart, \"GeoChart\", data, options);\n    });\n  };\n\n  defaultExport$2.prototype.renderScatterChart = function renderScatterChart (chart) {\n      var this$1 = this;\n\n    this.waitForLoaded(chart, function () {\n      var chartOptions = {};\n      var options = jsOptions$2(chart, chart.options, chartOptions);\n\n      var series = chart.data, rows2 = [], i, j, data, d;\n      for (i = 0; i < series.length; i++) {\n        series[i].name = series[i].name || \"Value\";\n        d = series[i].data;\n        for (j = 0; j < d.length; j++) {\n          var row = new Array(series.length + 1);\n          row[0] = d[j][0];\n          row[i + 1] = d[j][1];\n          rows2.push(row);\n        }\n      }\n\n      data = new this$1.library.visualization.DataTable();\n      data.addColumn(\"number\", \"\");\n      for (i = 0; i < series.length; i++) {\n        data.addColumn(\"number\", series[i].name);\n      }\n      data.addRows(rows2);\n\n      this$1.drawChart(chart, \"ScatterChart\", data, options);\n    });\n  };\n\n  defaultExport$2.prototype.renderTimeline = function renderTimeline (chart) {\n      var this$1 = this;\n\n    this.waitForLoaded(chart, \"timeline\", function () {\n      var chartOptions = {\n        legend: \"none\"\n      };\n\n      if (chart.options.colors) {\n        chartOptions.colors = chart.options.colors;\n      }\n      var options = merge(merge(defaultOptions$2, chartOptions), chart.options.library || {});\n\n      var data = new this$1.library.visualization.DataTable();\n      data.addColumn({type: \"string\", id: \"Name\"});\n      data.addColumn({type: \"date\", id: \"Start\"});\n      data.addColumn({type: \"date\", id: \"End\"});\n      data.addRows(chart.data);\n\n      chart.element.style.lineHeight = \"normal\";\n\n      this$1.drawChart(chart, \"Timeline\", data, options);\n    });\n  };\n\n  defaultExport$2.prototype.destroy = function destroy (chart) {\n    if (chart.chart) {\n      chart.chart.clearChart();\n    }\n  };\n\n  defaultExport$2.prototype.drawChart = function drawChart (chart, type, data, options) {\n    this.destroy(chart);\n\n    if (chart.options.code) {\n      window.console.log(\"var data = new google.visualization.DataTable(\" + data.toJSON() + \");\\nvar chart = new google.visualization.\" + type + \"(element);\\nchart.draw(data, \" + JSON.stringify(options) + \");\");\n    }\n\n    chart.chart = new this.library.visualization[type](chart.element);\n    resize(function () {\n      chart.chart.draw(data, options);\n    });\n  };\n\n  defaultExport$2.prototype.waitForLoaded = function waitForLoaded (chart, pack, callback) {\n      var this$1 = this;\n\n    if (!callback) {\n      callback = pack;\n      pack = \"corechart\";\n    }\n\n    callbacks.push({pack: pack, callback: callback});\n\n    if (loaded[pack]) {\n      this.runCallbacks();\n    } else {\n      loaded[pack] = true;\n\n      // https://groups.google.com/forum/#!topic/google-visualization-api/fMKJcyA2yyI\n      var loadOptions = {\n        packages: [pack],\n        callback: function () { this$1.runCallbacks(); }\n      };\n      var config = chart.__config();\n      if (config.language) {\n        loadOptions.language = config.language;\n      }\n      if (pack === \"geochart\" && config.mapsApiKey) {\n        loadOptions.mapsApiKey = config.mapsApiKey;\n      }\n\n      this.library.charts.load(\"current\", loadOptions);\n    }\n  };\n\n  defaultExport$2.prototype.runCallbacks = function runCallbacks () {\n    var cb, call;\n    for (var i = 0; i < callbacks.length; i++) {\n      cb = callbacks[i];\n      call = this.library.visualization && ((cb.pack === \"corechart\" && this.library.visualization.LineChart) || (cb.pack === \"timeline\" && this.library.visualization.Timeline) || (cb.pack === \"geochart\" && this.library.visualization.GeoChart));\n      if (call) {\n        cb.callback();\n        callbacks.splice(i, 1);\n        i--;\n      }\n    }\n  };\n\n  // cant use object as key\n  defaultExport$2.prototype.createDataTable = function createDataTable (series, columnType) {\n    var i, j, s, d, key, rows = [], sortedLabels = [];\n    for (i = 0; i < series.length; i++) {\n      s = series[i];\n      series[i].name = series[i].name || \"Value\";\n\n      for (j = 0; j < s.data.length; j++) {\n        d = s.data[j];\n        key = (columnType === \"datetime\") ? d[0].getTime() : d[0];\n        if (!rows[key]) {\n          rows[key] = new Array(series.length);\n          sortedLabels.push(key);\n        }\n        rows[key][i] = toFloat(d[1]);\n      }\n    }\n\n    var rows2 = [];\n    var day = true;\n    var value;\n    for (j = 0; j < sortedLabels.length; j++) {\n      i = sortedLabels[j];\n      if (columnType === \"datetime\") {\n        value = new Date(toFloat(i));\n        day = day && isDay(value);\n      } else if (columnType === \"number\") {\n        value = toFloat(i);\n      } else {\n        value = i;\n      }\n      rows2.push([value].concat(rows[i]));\n    }\n    if (columnType === \"datetime\") {\n      rows2.sort(sortByTime);\n    } else if (columnType === \"number\") {\n      rows2.sort(sortByNumberSeries);\n\n      for (i = 0; i < rows2.length; i++) {\n        rows2[i][0] = toStr(rows2[i][0]);\n      }\n\n      columnType = \"string\";\n    }\n\n    // create datatable\n    var data = new this.library.visualization.DataTable();\n    columnType = columnType === \"datetime\" && day ? \"date\" : columnType;\n    data.addColumn(columnType, \"\");\n    for (i = 0; i < series.length; i++) {\n      data.addColumn(\"number\", series[i].name);\n    }\n    data.addRows(rows2);\n\n    return data;\n  };\n\n  var pendingRequests = [], runningRequests = 0, maxRequests = 4;\n\n  function pushRequest(url, success, error) {\n    pendingRequests.push([url, success, error]);\n    runNext();\n  }\n\n  function runNext() {\n    if (runningRequests < maxRequests) {\n      var request = pendingRequests.shift();\n      if (request) {\n        runningRequests++;\n        getJSON(request[0], request[1], request[2]);\n        runNext();\n      }\n    }\n  }\n\n  function requestComplete() {\n    runningRequests--;\n    runNext();\n  }\n\n  function getJSON(url, success, error) {\n    ajaxCall(url, success, function (jqXHR, textStatus, errorThrown) {\n      var message = (typeof errorThrown === \"string\") ? errorThrown : errorThrown.message;\n      error(message);\n    });\n  }\n\n  function ajaxCall(url, success, error) {\n    var $ = window.jQuery || window.Zepto || window.$;\n\n    if ($ && $.ajax) {\n      $.ajax({\n        dataType: \"json\",\n        url: url,\n        success: success,\n        error: error,\n        complete: requestComplete\n      });\n    } else {\n      var xhr = new XMLHttpRequest();\n      xhr.open(\"GET\", url, true);\n      xhr.setRequestHeader(\"Content-Type\", \"application/json\");\n      xhr.onload = function () {\n        requestComplete();\n        if (xhr.status === 200) {\n          success(JSON.parse(xhr.responseText), xhr.statusText, xhr);\n        } else {\n          error(xhr, \"error\", xhr.statusText);\n        }\n      };\n      xhr.send();\n    }\n  }\n\n  var config = {};\n  var adapters = [];\n\n  // helpers\n\n  function setText(element, text) {\n    if (document.body.innerText) {\n      element.innerText = text;\n    } else {\n      element.textContent = text;\n    }\n  }\n\n  // TODO remove prefix for all messages\n  function chartError(element, message, noPrefix) {\n    if (!noPrefix) {\n      message = \"Error Loading Chart: \" + message;\n    }\n    setText(element, message);\n    element.style.color = \"#ff0000\";\n  }\n\n  function errorCatcher(chart) {\n    try {\n      chart.__render();\n    } catch (err) {\n      chartError(chart.element, err.message);\n      throw err;\n    }\n  }\n\n  function fetchDataSource(chart, dataSource) {\n    if (typeof dataSource === \"string\") {\n      pushRequest(dataSource, function (data) {\n        chart.rawData = data;\n        errorCatcher(chart);\n      }, function (message) {\n        chartError(chart.element, message);\n      });\n    } else if (typeof dataSource === \"function\") {\n      try {\n        dataSource(function (data) {\n          chart.rawData = data;\n          errorCatcher(chart);\n        }, function (message) {\n          chartError(chart.element, message, true);\n        });\n      } catch (err) {\n        chartError(chart.element, err, true);\n      }\n    } else {\n      chart.rawData = dataSource;\n      errorCatcher(chart);\n    }\n  }\n\n  function addDownloadButton(chart) {\n    var element = chart.element;\n    var link = document.createElement(\"a\");\n\n    var download = chart.options.download;\n    if (download === true) {\n      download = {};\n    } else if (typeof download === \"string\") {\n      download = {filename: download};\n    }\n    link.download = download.filename || \"chart.png\"; // https://caniuse.com/download\n\n    link.style.position = \"absolute\";\n    link.style.top = \"20px\";\n    link.style.right = \"20px\";\n    link.style.zIndex = 1000;\n    link.style.lineHeight = \"20px\";\n    link.target = \"_blank\"; // for safari\n    var image = document.createElement(\"img\");\n    image.alt = \"Download\";\n    image.style.border = \"none\";\n    // icon from font-awesome\n    // http://fa2png.io/\n    image.src = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAABCFBMVEUAAADMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMywEsqxAAAAV3RSTlMAAQIDBggJCgsMDQ4PERQaHB0eISIjJCouLzE0OTo/QUJHSUpLTU5PUllhYmltcHh5foWLjI+SlaCio6atr7S1t7m6vsHHyM7R2tze5Obo7fHz9ff5+/1hlxK2AAAA30lEQVQYGUXBhVYCQQBA0TdYWAt2d3d3YWAHyur7/z9xgD16Lw0DW+XKx+1GgX+FRzM3HWQWrHl5N/oapW5RPe0PkBu+UYeICvozTWZVK23Ao04B79oJrOsJDOoxkZoQPWgX29pHpCZEk7rEvQYiNSFq1UMqvlCjJkRBS1R8hb00Vb/TajtBL7nTHE1X1vyMQF732dQhyF2o6SAwrzP06iUQzvwsArlnzcOdrgBhJyHa1QOgO9U1GsKuvjUTjavliZYQ8nNPapG6sap/3nrIdJ6bOWzmX/fy0XVpfzZP3S8OJT3g9EEiJwAAAABJRU5ErkJggg==\";\n    link.appendChild(image);\n    element.style.position = \"relative\";\n\n    chart.__downloadAttached = true;\n\n    // mouseenter\n    chart.__enterEvent = addEvent(element, \"mouseover\", function(e) {\n      var related = e.relatedTarget;\n      // check download option again to ensure it wasn't changed\n      if ((!related || (related !== this && !childOf(this, related))) && chart.options.download) {\n        link.href = chart.toImage(download);\n        element.appendChild(link);\n      }\n    });\n\n    // mouseleave\n    chart.__leaveEvent = addEvent(element, \"mouseout\", function(e) {\n      var related = e.relatedTarget;\n      if (!related || (related !== this && !childOf(this, related))) {\n        if (link.parentNode) {\n          link.parentNode.removeChild(link);\n        }\n      }\n    });\n  }\n\n  // https://stackoverflow.com/questions/10149963/adding-event-listener-cross-browser\n  function addEvent(elem, event, fn) {\n    if (elem.addEventListener) {\n      elem.addEventListener(event, fn, false);\n      return fn;\n    } else {\n      var fn2 = function() {\n        // set the this pointer same as addEventListener when fn is called\n        return(fn.call(elem, window.event));\n      };\n      elem.attachEvent(\"on\" + event, fn2);\n      return fn2;\n    }\n  }\n\n  function removeEvent(elem, event, fn) {\n    if (elem.removeEventListener) {\n      elem.removeEventListener(event, fn, false);\n    } else {\n      elem.detachEvent(\"on\" + event, fn);\n    }\n  }\n\n  // https://gist.github.com/shawnbot/4166283\n  function childOf(p, c) {\n    if (p === c) { return false; }\n    while (c && c !== p) { c = c.parentNode; }\n    return c === p;\n  }\n\n  function getAdapterType(library) {\n    if (library) {\n      if (library.product === \"Highcharts\") {\n        return defaultExport$1;\n      } else if (library.charts) {\n        return defaultExport$2;\n      } else if (isFunction(library)) {\n        return defaultExport;\n      }\n    }\n    throw new Error(\"Unknown adapter\");\n  }\n\n  function addAdapter(library) {\n    var adapterType = getAdapterType(library);\n    var adapter = new adapterType(library);\n\n    if (adapters.indexOf(adapter) === -1) {\n      adapters.push(adapter);\n    }\n  }\n\n  function loadAdapters() {\n    if (\"Chart\" in window) {\n      addAdapter(window.Chart);\n    }\n\n    if (\"Highcharts\" in window) {\n      addAdapter(window.Highcharts);\n    }\n\n    if (window.google && window.google.charts) {\n      addAdapter(window.google);\n    }\n  }\n\n  function dataEmpty(data, chartType) {\n    if (chartType === \"PieChart\" || chartType === \"GeoChart\" || chartType === \"Timeline\") {\n      return data.length === 0;\n    } else {\n      for (var i = 0; i < data.length; i++) {\n        if (data[i].data.length > 0) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n\n  function renderChart(chartType, chart) {\n    if (chart.options.messages && chart.options.messages.empty && dataEmpty(chart.data, chartType)) {\n      setText(chart.element, chart.options.messages.empty);\n    } else {\n      callAdapter(chartType, chart);\n      if (chart.options.download && !chart.__downloadAttached && chart.adapter === \"chartjs\") {\n        addDownloadButton(chart);\n      }\n    }\n  }\n\n  // TODO remove chartType if cross-browser way\n  // to get the name of the chart class\n  function callAdapter(chartType, chart) {\n    var i, adapter, fnName, adapterName;\n    fnName = \"render\" + chartType;\n    adapterName = chart.options.adapter;\n\n    loadAdapters();\n\n    for (i = 0; i < adapters.length; i++) {\n      adapter = adapters[i];\n      if ((!adapterName || adapterName === adapter.name) && isFunction(adapter[fnName])) {\n        chart.adapter = adapter.name;\n        chart.__adapterObject = adapter;\n        return adapter[fnName](chart);\n      }\n    }\n\n    if (adapters.length > 0) {\n      throw new Error(\"No charting library found for \" + chartType);\n    } else {\n      throw new Error(\"No charting libraries found - be sure to include one before your charts\");\n    }\n  }\n\n  // process data\n\n  var toFormattedKey = function (key, keyType) {\n    if (keyType === \"number\") {\n      key = toFloat(key);\n    } else if (keyType === \"datetime\") {\n      key = toDate(key);\n    } else {\n      key = toStr(key);\n    }\n    return key;\n  };\n\n  var formatSeriesData = function (data, keyType) {\n    var r = [], key, j;\n    for (j = 0; j < data.length; j++) {\n      if (keyType === \"bubble\") {\n        r.push([toFloat(data[j][0]), toFloat(data[j][1]), toFloat(data[j][2])]);\n      } else {\n        key = toFormattedKey(data[j][0], keyType);\n        r.push([key, toFloat(data[j][1])]);\n      }\n    }\n    if (keyType === \"datetime\") {\n      r.sort(sortByTime);\n    } else if (keyType === \"number\") {\n      r.sort(sortByNumberSeries);\n    }\n    return r;\n  };\n\n  function detectXType(series, noDatetime, options) {\n    if (dataEmpty(series)) {\n      if ((options.xmin || options.xmax) && (!options.xmin || isDate(options.xmin)) && (!options.xmax || isDate(options.xmax))) {\n        return \"datetime\";\n      } else {\n        return \"number\";\n      }\n    } else if (detectXTypeWithFunction(series, isNumber)) {\n      return \"number\";\n    } else if (!noDatetime && detectXTypeWithFunction(series, isDate)) {\n      return \"datetime\";\n    } else {\n      return \"string\";\n    }\n  }\n\n  function detectXTypeWithFunction(series, func) {\n    var i, j, data;\n    for (i = 0; i < series.length; i++) {\n      data = toArr(series[i].data);\n      for (j = 0; j < data.length; j++) {\n        if (!func(data[j][0])) {\n          return false;\n        }\n      }\n    }\n    return true;\n  }\n\n  // creates a shallow copy of each element of the array\n  // elements are expected to be objects\n  function copySeries(series) {\n    var newSeries = [], i, j;\n    for (i = 0; i < series.length; i++) {\n      var copy = {};\n      for (j in series[i]) {\n        if (series[i].hasOwnProperty(j)) {\n          copy[j] = series[i][j];\n        }\n      }\n      newSeries.push(copy);\n    }\n    return newSeries;\n  }\n\n  function processSeries(chart, keyType, noDatetime) {\n    var i;\n\n    var opts = chart.options;\n    var series = chart.rawData;\n\n    // see if one series or multiple\n    if (!isArray(series) || typeof series[0] !== \"object\" || isArray(series[0])) {\n      series = [{name: opts.label, data: series}];\n      chart.hideLegend = true;\n    } else {\n      chart.hideLegend = false;\n    }\n\n    // convert to array\n    // must come before dataEmpty check\n    series = copySeries(series);\n    for (i = 0; i < series.length; i++) {\n      series[i].data = toArr(series[i].data);\n    }\n\n    chart.xtype = keyType ? keyType : (opts.discrete ? \"string\" : detectXType(series, noDatetime, opts));\n\n    // right format\n    for (i = 0; i < series.length; i++) {\n      series[i].data = formatSeriesData(series[i].data, chart.xtype);\n    }\n\n    return series;\n  }\n\n  function processSimple(chart) {\n    var perfectData = toArr(chart.rawData), i;\n    for (i = 0; i < perfectData.length; i++) {\n      perfectData[i] = [toStr(perfectData[i][0]), toFloat(perfectData[i][1])];\n    }\n    return perfectData;\n  }\n\n  // define classes\n\n  var Chart = function Chart(element, dataSource, options) {\n    var elementId;\n    if (typeof element === \"string\") {\n      elementId = element;\n      element = document.getElementById(element);\n      if (!element) {\n        throw new Error(\"No element with id \" + elementId);\n      }\n    }\n    this.element = element;\n    this.options = merge(Chartkick.options, options || {});\n    this.dataSource = dataSource;\n\n    Chartkick.charts[element.id] = this;\n\n    fetchDataSource(this, dataSource);\n\n    if (this.options.refresh) {\n      this.startRefresh();\n    }\n  };\n\n  Chart.prototype.getElement = function getElement () {\n    return this.element;\n  };\n\n  Chart.prototype.getDataSource = function getDataSource () {\n    return this.dataSource;\n  };\n\n  Chart.prototype.getData = function getData () {\n    return this.data;\n  };\n\n  Chart.prototype.getOptions = function getOptions () {\n    return this.options;\n  };\n\n  Chart.prototype.getChartObject = function getChartObject () {\n    return this.chart;\n  };\n\n  Chart.prototype.getAdapter = function getAdapter () {\n    return this.adapter;\n  };\n\n  Chart.prototype.updateData = function updateData (dataSource, options) {\n    this.dataSource = dataSource;\n    if (options) {\n      this.__updateOptions(options);\n    }\n    fetchDataSource(this, dataSource);\n  };\n\n  Chart.prototype.setOptions = function setOptions (options) {\n    this.__updateOptions(options);\n    this.redraw();\n  };\n\n  Chart.prototype.redraw = function redraw () {\n    fetchDataSource(this, this.rawData);\n  };\n\n  Chart.prototype.refreshData = function refreshData () {\n    if (typeof this.dataSource === \"string\") {\n      // prevent browser from caching\n      var sep = this.dataSource.indexOf(\"?\") === -1 ? \"?\" : \"&\";\n      var url = this.dataSource + sep + \"_=\" + (new Date()).getTime();\n      fetchDataSource(this, url);\n    } else if (typeof this.dataSource === \"function\") {\n      fetchDataSource(this, this.dataSource);\n    }\n  };\n\n  Chart.prototype.startRefresh = function startRefresh () {\n      var this$1 = this;\n\n    var refresh = this.options.refresh;\n\n    if (refresh && typeof this.dataSource !== \"string\" && typeof this.dataSource !== \"function\") {\n      throw new Error(\"Data source must be a URL or callback for refresh\");\n    }\n\n    if (!this.intervalId) {\n      if (refresh) {\n        this.intervalId = setInterval( function () {\n          this$1.refreshData();\n        }, refresh * 1000);\n      } else {\n        throw new Error(\"No refresh interval\");\n      }\n    }\n  };\n\n  Chart.prototype.stopRefresh = function stopRefresh () {\n    if (this.intervalId) {\n      clearInterval(this.intervalId);\n      this.intervalId = null;\n    }\n  };\n\n  Chart.prototype.toImage = function toImage (download) {\n    if (this.adapter === \"chartjs\") {\n      if (download && download.background && download.background !== \"transparent\") {\n        // https://stackoverflow.com/questions/30464750/chartjs-line-chart-set-background-color\n        var canvas = this.chart.chart.canvas;\n        var ctx = this.chart.chart.ctx;\n        var tmpCanvas = document.createElement(\"canvas\");\n        var tmpCtx = tmpCanvas.getContext(\"2d\");\n        tmpCanvas.width = ctx.canvas.width;\n        tmpCanvas.height = ctx.canvas.height;\n        tmpCtx.fillStyle = download.background;\n        tmpCtx.fillRect(0, 0, tmpCanvas.width, tmpCanvas.height);\n        tmpCtx.drawImage(canvas, 0, 0);\n        return tmpCanvas.toDataURL(\"image/png\");\n      } else {\n        return this.chart.toBase64Image();\n      }\n    } else {\n      // TODO throw error in next major version\n      // throw new Error(\"Feature only available for Chart.js\");\n      return null;\n    }\n  };\n\n  Chart.prototype.destroy = function destroy () {\n    if (this.__adapterObject) {\n      this.__adapterObject.destroy(this);\n    }\n\n    if (this.__enterEvent) {\n      removeEvent(this.element, \"mouseover\", this.__enterEvent);\n    }\n\n    if (this.__leaveEvent) {\n      removeEvent(this.element, \"mouseout\", this.__leaveEvent);\n    }\n  };\n\n  Chart.prototype.__updateOptions = function __updateOptions (options) {\n    var updateRefresh = options.refresh && options.refresh !== this.options.refresh;\n    this.options = merge(Chartkick.options, options);\n    if (updateRefresh) {\n      this.stopRefresh();\n      this.startRefresh();\n    }\n  };\n\n  Chart.prototype.__render = function __render () {\n    this.data = this.__processData();\n    renderChart(this.__chartName(), this);\n  };\n\n  Chart.prototype.__config = function __config () {\n    return config;\n  };\n\n  var LineChart = /*@__PURE__*/(function (Chart) {\n    function LineChart () {\n      Chart.apply(this, arguments);\n    }\n\n    if ( Chart ) LineChart.__proto__ = Chart;\n    LineChart.prototype = Object.create( Chart && Chart.prototype );\n    LineChart.prototype.constructor = LineChart;\n\n    LineChart.prototype.__processData = function __processData () {\n      return processSeries(this);\n    };\n\n    LineChart.prototype.__chartName = function __chartName () {\n      return \"LineChart\";\n    };\n\n    return LineChart;\n  }(Chart));\n\n  var PieChart = /*@__PURE__*/(function (Chart) {\n    function PieChart () {\n      Chart.apply(this, arguments);\n    }\n\n    if ( Chart ) PieChart.__proto__ = Chart;\n    PieChart.prototype = Object.create( Chart && Chart.prototype );\n    PieChart.prototype.constructor = PieChart;\n\n    PieChart.prototype.__processData = function __processData () {\n      return processSimple(this);\n    };\n\n    PieChart.prototype.__chartName = function __chartName () {\n      return \"PieChart\";\n    };\n\n    return PieChart;\n  }(Chart));\n\n  var ColumnChart = /*@__PURE__*/(function (Chart) {\n    function ColumnChart () {\n      Chart.apply(this, arguments);\n    }\n\n    if ( Chart ) ColumnChart.__proto__ = Chart;\n    ColumnChart.prototype = Object.create( Chart && Chart.prototype );\n    ColumnChart.prototype.constructor = ColumnChart;\n\n    ColumnChart.prototype.__processData = function __processData () {\n      return processSeries(this, null, true);\n    };\n\n    ColumnChart.prototype.__chartName = function __chartName () {\n      return \"ColumnChart\";\n    };\n\n    return ColumnChart;\n  }(Chart));\n\n  var BarChart = /*@__PURE__*/(function (Chart) {\n    function BarChart () {\n      Chart.apply(this, arguments);\n    }\n\n    if ( Chart ) BarChart.__proto__ = Chart;\n    BarChart.prototype = Object.create( Chart && Chart.prototype );\n    BarChart.prototype.constructor = BarChart;\n\n    BarChart.prototype.__processData = function __processData () {\n      return processSeries(this, null, true);\n    };\n\n    BarChart.prototype.__chartName = function __chartName () {\n      return \"BarChart\";\n    };\n\n    return BarChart;\n  }(Chart));\n\n  var AreaChart = /*@__PURE__*/(function (Chart) {\n    function AreaChart () {\n      Chart.apply(this, arguments);\n    }\n\n    if ( Chart ) AreaChart.__proto__ = Chart;\n    AreaChart.prototype = Object.create( Chart && Chart.prototype );\n    AreaChart.prototype.constructor = AreaChart;\n\n    AreaChart.prototype.__processData = function __processData () {\n      return processSeries(this);\n    };\n\n    AreaChart.prototype.__chartName = function __chartName () {\n      return \"AreaChart\";\n    };\n\n    return AreaChart;\n  }(Chart));\n\n  var GeoChart = /*@__PURE__*/(function (Chart) {\n    function GeoChart () {\n      Chart.apply(this, arguments);\n    }\n\n    if ( Chart ) GeoChart.__proto__ = Chart;\n    GeoChart.prototype = Object.create( Chart && Chart.prototype );\n    GeoChart.prototype.constructor = GeoChart;\n\n    GeoChart.prototype.__processData = function __processData () {\n      return processSimple(this);\n    };\n\n    GeoChart.prototype.__chartName = function __chartName () {\n      return \"GeoChart\";\n    };\n\n    return GeoChart;\n  }(Chart));\n\n  var ScatterChart = /*@__PURE__*/(function (Chart) {\n    function ScatterChart () {\n      Chart.apply(this, arguments);\n    }\n\n    if ( Chart ) ScatterChart.__proto__ = Chart;\n    ScatterChart.prototype = Object.create( Chart && Chart.prototype );\n    ScatterChart.prototype.constructor = ScatterChart;\n\n    ScatterChart.prototype.__processData = function __processData () {\n      return processSeries(this, \"number\");\n    };\n\n    ScatterChart.prototype.__chartName = function __chartName () {\n      return \"ScatterChart\";\n    };\n\n    return ScatterChart;\n  }(Chart));\n\n  var BubbleChart = /*@__PURE__*/(function (Chart) {\n    function BubbleChart () {\n      Chart.apply(this, arguments);\n    }\n\n    if ( Chart ) BubbleChart.__proto__ = Chart;\n    BubbleChart.prototype = Object.create( Chart && Chart.prototype );\n    BubbleChart.prototype.constructor = BubbleChart;\n\n    BubbleChart.prototype.__processData = function __processData () {\n      return processSeries(this, \"bubble\");\n    };\n\n    BubbleChart.prototype.__chartName = function __chartName () {\n      return \"BubbleChart\";\n    };\n\n    return BubbleChart;\n  }(Chart));\n\n  var Timeline = /*@__PURE__*/(function (Chart) {\n    function Timeline () {\n      Chart.apply(this, arguments);\n    }\n\n    if ( Chart ) Timeline.__proto__ = Chart;\n    Timeline.prototype = Object.create( Chart && Chart.prototype );\n    Timeline.prototype.constructor = Timeline;\n\n    Timeline.prototype.__processData = function __processData () {\n      var i, data = this.rawData;\n      for (i = 0; i < data.length; i++) {\n        data[i][1] = toDate(data[i][1]);\n        data[i][2] = toDate(data[i][2]);\n      }\n      return data;\n    };\n\n    Timeline.prototype.__chartName = function __chartName () {\n      return \"Timeline\";\n    };\n\n    return Timeline;\n  }(Chart));\n\n  var Chartkick = {\n    LineChart: LineChart,\n    PieChart: PieChart,\n    ColumnChart: ColumnChart,\n    BarChart: BarChart,\n    AreaChart: AreaChart,\n    GeoChart: GeoChart,\n    ScatterChart: ScatterChart,\n    BubbleChart: BubbleChart,\n    Timeline: Timeline,\n    charts: {},\n    configure: function (options) {\n      for (var key in options) {\n        if (options.hasOwnProperty(key)) {\n          config[key] = options[key];\n        }\n      }\n    },\n    setDefaultOptions: function (opts) {\n      Chartkick.options = opts;\n    },\n    eachChart: function (callback) {\n      for (var chartId in Chartkick.charts) {\n        if (Chartkick.charts.hasOwnProperty(chartId)) {\n          callback(Chartkick.charts[chartId]);\n        }\n      }\n    },\n    config: config,\n    options: {},\n    adapters: adapters,\n    addAdapter: addAdapter,\n    use: function(adapter) {\n      addAdapter(adapter);\n      return Chartkick;\n    }\n  };\n\n  // not ideal, but allows for simpler integration\n  if (typeof window !== \"undefined\" && !window.Chartkick) {\n    window.Chartkick = Chartkick;\n  }\n\n  // backwards compatibility for esm require\n  Chartkick.default = Chartkick;\n\n  return Chartkick;\n\n})));\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEC,WAAUA,MAAM,EAAEC,OAAO,EAAE;EAC1B,OAAOC,OAAO,KAAK,QAAQ,IAAI,OAAOC,MAAM,KAAK,WAAW,GAAGA,MAAM,CAACD,OAAO,GAAGD,OAAO,EAAE,GACzF,OAAOG,MAAM,KAAK,UAAU,IAAIA,MAAM,CAACC,GAAG,GAAGD,MAAM,CAACH,OAAO,CAAC,IAC3DD,MAAM,GAAGA,MAAM,IAAIM,IAAI,EAAEN,MAAM,CAACO,SAAS,GAAGN,OAAO,EAAE,CAAC;AACzD,CAAC,EAAC,IAAI,EAAG,YAAY;EAAE,YAAY;;EAEjC,SAASO,OAAO,CAACC,QAAQ,EAAE;IACzB,OAAOC,MAAM,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAACJ,QAAQ,CAAC,KAAK,gBAAgB;EACtE;EAEA,SAASK,UAAU,CAACL,QAAQ,EAAE;IAC5B,OAAOA,QAAQ,YAAYM,QAAQ;EACrC;EAEA,SAASC,aAAa,CAACP,QAAQ,EAAE;IAC/B;IACA,OAAOC,MAAM,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAACJ,QAAQ,CAAC,KAAK,iBAAiB,IAAI,CAACK,UAAU,CAACL,QAAQ,CAAC,IAAIA,QAAQ,YAAYC,MAAM;EAC9H;;EAEA;EACA,SAASO,MAAM,CAACC,MAAM,EAAEC,MAAM,EAAE;IAC9B,IAAIC,GAAG;IACP,KAAKA,GAAG,IAAID,MAAM,EAAE;MAClB;MACA,IAAIC,GAAG,KAAK,WAAW,EAAE;QAAE;MAAU;MAErC,IAAIJ,aAAa,CAACG,MAAM,CAACC,GAAG,CAAC,CAAC,IAAIZ,OAAO,CAACW,MAAM,CAACC,GAAG,CAAC,CAAC,EAAE;QACtD,IAAIJ,aAAa,CAACG,MAAM,CAACC,GAAG,CAAC,CAAC,IAAI,CAACJ,aAAa,CAACE,MAAM,CAACE,GAAG,CAAC,CAAC,EAAE;UAC7DF,MAAM,CAACE,GAAG,CAAC,GAAG,CAAC,CAAC;QAClB;QACA,IAAIZ,OAAO,CAACW,MAAM,CAACC,GAAG,CAAC,CAAC,IAAI,CAACZ,OAAO,CAACU,MAAM,CAACE,GAAG,CAAC,CAAC,EAAE;UACjDF,MAAM,CAACE,GAAG,CAAC,GAAG,EAAE;QAClB;QACAH,MAAM,CAACC,MAAM,CAACE,GAAG,CAAC,EAAED,MAAM,CAACC,GAAG,CAAC,CAAC;MAClC,CAAC,MAAM,IAAID,MAAM,CAACC,GAAG,CAAC,KAAKC,SAAS,EAAE;QACpCH,MAAM,CAACE,GAAG,CAAC,GAAGD,MAAM,CAACC,GAAG,CAAC;MAC3B;IACF;EACF;EAEA,SAASE,KAAK,CAACC,IAAI,EAAEC,IAAI,EAAE;IACzB,IAAIN,MAAM,GAAG,CAAC,CAAC;IACfD,MAAM,CAACC,MAAM,EAAEK,IAAI,CAAC;IACpBN,MAAM,CAACC,MAAM,EAAEM,IAAI,CAAC;IACpB,OAAON,MAAM;EACf;EAEA,IAAIO,YAAY,GAAG,mCAAmC;;EAEtD;EACA,IAAIC,eAAe,GAAG,wGAAwG;EAC9H,IAAIC,iBAAiB,GAAGC,MAAM,CAAC,GAAG,CAAC,CAACC,MAAM,CAAC,CAAC,CAAC;EAE7C,SAASC,YAAY,CAACC,KAAK,EAAE;IAC3B,IAAIC,GAAG,EAAEC,IAAI,EAAEC,OAAO,EAAEC,YAAY,EAAEC,OAAO,EAAEC,KAAK,EAAEC,MAAM,EAAEC,MAAM,EAAEC,OAAO,EAAEC,IAAI,EAAEC,IAAI;IACzFD,IAAI,GAAG/B,MAAM,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAACkB,KAAK,CAAC;IAC5C,IAAIU,IAAI,KAAK,eAAe,EAAE;MAC5B,OAAOV,KAAK;IACd;IACA,IAAIU,IAAI,KAAK,iBAAiB,EAAE;MAC9B;IACF;IACAP,OAAO,GAAGH,KAAK,CAACY,KAAK,CAACjB,eAAe,CAAC;IACtC,IAAIQ,OAAO,EAAE;MACXQ,IAAI,GAAGE,QAAQ,CAACV,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MAC/BG,KAAK,GAAGO,QAAQ,CAACV,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC;MACpCF,GAAG,GAAGY,QAAQ,CAACV,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MAC9BD,IAAI,GAAGW,QAAQ,CAACV,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;MAC/BE,OAAO,GAAGF,OAAO,CAAC,CAAC,CAAC,GAAGU,QAAQ,CAACV,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC;MACnDM,OAAO,GAAGN,OAAO,CAAC,EAAE,CAAC,GAAGU,QAAQ,CAACV,OAAO,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC;MACrDC,YAAY,GAAGD,OAAO,CAAC,EAAE,CAAC,GAAGW,UAAU,CAAClB,iBAAiB,GAAGO,OAAO,CAAC,EAAE,CAAC,CAACY,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,GAAG,CAAC;MAC5FP,MAAM,GAAGQ,IAAI,CAACC,GAAG,CAACN,IAAI,EAAEL,KAAK,EAAEL,GAAG,EAAEC,IAAI,EAAEG,OAAO,EAAEI,OAAO,EAAEL,YAAY,CAAC;MACzE,IAAID,OAAO,CAAC,EAAE,CAAC,IAAIA,OAAO,CAAC,EAAE,CAAC,EAAE;QAC9BI,MAAM,GAAGJ,OAAO,CAAC,EAAE,CAAC,GAAG,EAAE;QACzB,IAAIA,OAAO,CAAC,EAAE,CAAC,EAAE;UACfI,MAAM,IAAIM,QAAQ,CAACV,OAAO,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;QACrC;QACAI,MAAM,IAAIJ,OAAO,CAAC,EAAE,CAAC,KAAK,GAAG,GAAG,CAAC,CAAC,GAAG,CAAC;QACtCK,MAAM,IAAID,MAAM,GAAG,EAAE,GAAG,IAAI;MAC9B;MACA,OAAO,IAAIS,IAAI,CAACR,MAAM,CAAC;IACzB;EACF;EACA;;EAEA,SAASU,cAAc,CAACC,MAAM,EAAE;IAC9B,IAAIC,CAAC,EAAEC,CAAC,EAAEC,IAAI;IACd,KAAKF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACI,MAAM,EAAEH,CAAC,EAAE,EAAE;MAClCE,IAAI,GAAGH,MAAM,CAACC,CAAC,CAAC,CAACE,IAAI;MACrB,KAAKD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,IAAI,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;QAChC,IAAIC,IAAI,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;UAClB,OAAO,IAAI;QACb;MACF;IACF;IACA,OAAO,KAAK;EACd;EAEA,SAASG,KAAK,CAACC,CAAC,EAAE;IAChB,OAAO,EAAE,GAAGA,CAAC;EACf;EAEA,SAASC,OAAO,CAACD,CAAC,EAAE;IAClB,OAAOX,UAAU,CAACW,CAAC,CAAC;EACtB;EAEA,SAASE,MAAM,CAACF,CAAC,EAAE;IACjB,IAAItB,OAAO,EAAEQ,IAAI,EAAEL,KAAK,EAAEL,GAAG;IAC7B,IAAI,OAAOwB,CAAC,KAAK,QAAQ,EAAE;MACzB,IAAI,OAAOA,CAAC,KAAK,QAAQ,EAAE;QACzBA,CAAC,GAAG,IAAIT,IAAI,CAACS,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;MAC1B,CAAC,MAAM;QACLA,CAAC,GAAGD,KAAK,CAACC,CAAC,CAAC;QACZ,IAAKtB,OAAO,GAAGsB,CAAC,CAACb,KAAK,CAAClB,YAAY,CAAC,EAAG;UACvCiB,IAAI,GAAGE,QAAQ,CAACV,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;UAC/BG,KAAK,GAAGO,QAAQ,CAACV,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC;UACpCF,GAAG,GAAGY,QAAQ,CAACV,OAAO,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;UAC9B,OAAO,IAAIa,IAAI,CAACL,IAAI,EAAEL,KAAK,EAAEL,GAAG,CAAC;QACjC,CAAC,MAAM;UAAE;UACP;UACA;UACA,IAAI2B,GAAG,GAAGH,CAAC,CAACI,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAACA,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC,CAACA,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;UAClEJ,CAAC,GAAG1B,YAAY,CAAC6B,GAAG,CAAC,IAAI,IAAIZ,IAAI,CAACS,CAAC,CAAC;QACtC;MACF;IACF;IACA,OAAOA,CAAC;EACV;EAEA,SAASK,KAAK,CAACL,CAAC,EAAE;IAChB,IAAI,CAAChD,OAAO,CAACgD,CAAC,CAAC,EAAE;MACf,IAAIM,GAAG,GAAG,EAAE;QAAEX,CAAC;MACf,KAAKA,CAAC,IAAIK,CAAC,EAAE;QACX,IAAIA,CAAC,CAACO,cAAc,CAACZ,CAAC,CAAC,EAAE;UACvBW,GAAG,CAACE,IAAI,CAAC,CAACb,CAAC,EAAEK,CAAC,CAACL,CAAC,CAAC,CAAC,CAAC;QACrB;MACF;MACAK,CAAC,GAAGM,GAAG;IACT;IACA,OAAON,CAAC;EACV;EAEA,SAASS,aAAa,CAACC,cAAc,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,MAAM,EAAEC,UAAU,EAAEC,SAAS,EAAEC,SAAS,EAAE;IAC7G,OAAO,UAAUC,KAAK,EAAEC,IAAI,EAAEC,YAAY,EAAE;MAC1C,IAAI1B,MAAM,GAAGwB,KAAK,CAACrB,IAAI;MACvB,IAAIwB,OAAO,GAAGvD,KAAK,CAAC,CAAC,CAAC,EAAE4C,cAAc,CAAC;MACvCW,OAAO,GAAGvD,KAAK,CAACuD,OAAO,EAAED,YAAY,IAAI,CAAC,CAAC,CAAC;MAE5C,IAAIF,KAAK,CAACP,UAAU,IAAI,QAAQ,IAAIQ,IAAI,EAAE;QACxCR,UAAU,CAACU,OAAO,EAAEF,IAAI,CAACG,MAAM,EAAEJ,KAAK,CAACP,UAAU,CAAC;MACpD;MAEA,IAAIQ,IAAI,CAACI,KAAK,EAAE;QACdX,QAAQ,CAACS,OAAO,EAAEF,IAAI,CAACI,KAAK,CAAC;MAC/B;;MAEA;MACA,IAAI,KAAK,IAAIJ,IAAI,EAAE;QACjBN,MAAM,CAACQ,OAAO,EAAEF,IAAI,CAACK,GAAG,CAAC;MAC3B,CAAC,MAAM,IAAI,CAAC/B,cAAc,CAACC,MAAM,CAAC,EAAE;QAClCmB,MAAM,CAACQ,OAAO,EAAE,CAAC,CAAC;MACpB;;MAEA;MACA,IAAIF,IAAI,CAACM,GAAG,EAAE;QACZX,MAAM,CAACO,OAAO,EAAEF,IAAI,CAACM,GAAG,CAAC;MAC3B;MAEA,IAAI,SAAS,IAAIN,IAAI,EAAE;QACrBJ,UAAU,CAACM,OAAO,EAAEF,IAAI,CAACO,OAAO,CAAC;MACnC;MAEA,IAAIP,IAAI,CAACQ,MAAM,EAAE;QACfN,OAAO,CAACM,MAAM,GAAGR,IAAI,CAACQ,MAAM;MAC9B;MAEA,IAAIR,IAAI,CAACS,MAAM,EAAE;QACfZ,SAAS,CAACK,OAAO,EAAEF,IAAI,CAACS,MAAM,CAAC;MACjC;MAEA,IAAIT,IAAI,CAACU,MAAM,EAAE;QACfZ,SAAS,CAACI,OAAO,EAAEF,IAAI,CAACU,MAAM,CAAC;MACjC;;MAEA;MACAR,OAAO,GAAGvD,KAAK,CAACuD,OAAO,EAAEF,IAAI,CAACW,OAAO,IAAI,CAAC,CAAC,CAAC;MAE5C,OAAOT,OAAO;IAChB,CAAC;EACH;EAEA,SAASU,UAAU,CAACC,CAAC,EAAEC,CAAC,EAAE;IACxB,OAAOD,CAAC,CAAC,CAAC,CAAC,CAACE,OAAO,EAAE,GAAGD,CAAC,CAAC,CAAC,CAAC,CAACC,OAAO,EAAE;EACxC;EAEA,SAASC,kBAAkB,CAACH,CAAC,EAAEC,CAAC,EAAE;IAChC,OAAOD,CAAC,CAAC,CAAC,CAAC,GAAGC,CAAC,CAAC,CAAC,CAAC;EACpB;EAEA,SAASG,YAAY,CAACJ,CAAC,EAAEC,CAAC,EAAE;IAC1B,OAAOD,CAAC,GAAGC,CAAC;EACd;EAEA,SAASI,QAAQ,CAACC,CAAC,EAAE;IACnB,OAAOA,CAAC,CAACC,eAAe,EAAE,KAAK,CAAC,IAAID,CAAC,CAACE,UAAU,EAAE,KAAK,CAAC;EAC1D;EAEA,SAASC,MAAM,CAACH,CAAC,EAAE;IACjB,OAAOD,QAAQ,CAACC,CAAC,CAAC,IAAIA,CAAC,CAACI,UAAU,EAAE,KAAK,CAAC;EAC5C;EAEA,SAASC,KAAK,CAACL,CAAC,EAAE;IAChB,OAAOG,MAAM,CAACH,CAAC,CAAC,IAAIA,CAAC,CAACM,QAAQ,EAAE,KAAK,CAAC;EACxC;EAEA,SAASC,MAAM,CAACP,CAAC,EAAEQ,SAAS,EAAE;IAC5B,OAAOH,KAAK,CAACL,CAAC,CAAC,IAAIA,CAAC,CAACS,MAAM,EAAE,KAAKD,SAAS;EAC7C;EAEA,SAASE,OAAO,CAACV,CAAC,EAAE;IAClB,OAAOK,KAAK,CAACL,CAAC,CAAC,IAAIA,CAAC,CAACW,OAAO,EAAE,KAAK,CAAC;EACtC;EAEA,SAASC,MAAM,CAACZ,CAAC,EAAE;IACjB,OAAOU,OAAO,CAACV,CAAC,CAAC,IAAIA,CAAC,CAACa,QAAQ,EAAE,KAAK,CAAC;EACzC;EAEA,SAASC,MAAM,CAACC,GAAG,EAAE;IACnB,OAAO,CAACC,KAAK,CAACpD,MAAM,CAACmD,GAAG,CAAC,CAAC,IAAItD,KAAK,CAACsD,GAAG,CAAC,CAACvD,MAAM,IAAI,CAAC;EACtD;EAEA,SAASyD,QAAQ,CAACF,GAAG,EAAE;IACrB,OAAO,OAAOA,GAAG,KAAK,QAAQ;EAChC;EAEA,IAAIG,YAAY,GAAG,CAAC,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;EAEhE,SAASC,WAAW,CAACC,GAAG,EAAEC,KAAK,EAAEtC,OAAO,EAAEuC,IAAI,EAAE;IAC9CF,GAAG,GAAGA,GAAG,IAAI,EAAE;IACf,IAAIrC,OAAO,CAACwC,MAAM,EAAE;MAClB,IAAIF,KAAK,GAAG,CAAC,EAAE;QACbA,KAAK,GAAGA,KAAK,GAAG,CAAC,CAAC;QAClBD,GAAG,IAAI,GAAG;MACZ;MACAA,GAAG,IAAIrC,OAAO,CAACwC,MAAM;IACvB;IAEA,IAAIC,MAAM,GAAGzC,OAAO,CAACyC,MAAM,IAAI,EAAE;IACjC,IAAIC,SAAS,GAAG1C,OAAO,CAAC0C,SAAS;IACjC,IAAIC,KAAK,GAAG3C,OAAO,CAAC2C,KAAK;IAEzB,IAAI3C,OAAO,CAAC4C,SAAS,EAAE;MACrB,IAAIC,SAAS;MACb,IAAIC,SAAS,GAAGP,IAAI,GAAGvC,OAAO,CAAC4C,SAAS,GAAGN,KAAK;MAEhD,IAAIQ,SAAS,IAAI,mBAAmB,EAAE;QACpCR,KAAK,IAAI,mBAAmB;QAC5BO,SAAS,GAAG,CAAC;MACf,CAAC,MAAM,IAAIC,SAAS,IAAI,gBAAgB,EAAE;QACxCR,KAAK,IAAI,gBAAgB;QACzBO,SAAS,GAAG,CAAC;MACf,CAAC,MAAM,IAAIC,SAAS,IAAI,aAAa,EAAE;QACrCR,KAAK,IAAI,aAAa;QACtBO,SAAS,GAAG,CAAC;MACf,CAAC,MAAM,IAAIC,SAAS,IAAI,UAAU,EAAE;QAClCR,KAAK,IAAI,UAAU;QACnBO,SAAS,GAAG,CAAC;MACf,CAAC,MAAM,IAAIC,SAAS,IAAI,OAAO,EAAE;QAC/BR,KAAK,IAAI,OAAO;QAChBO,SAAS,GAAG,CAAC;MACf,CAAC,MAAM,IAAIC,SAAS,IAAI,IAAI,EAAE;QAC5BR,KAAK,IAAI,IAAI;QACbO,SAAS,GAAG,CAAC;MACf,CAAC,MAAM;QACLA,SAAS,GAAG,CAAC;MACf;;MAEA;MACA,IAAIH,SAAS,KAAKlG,SAAS,IAAImG,KAAK,KAAKnG,SAAS,EAAE;QAClD,IAAI8F,KAAK,IAAI,MAAM,EAAE;UACnB,IAAIO,SAAS,GAAGV,YAAY,CAAC1D,MAAM,GAAG,CAAC,EAAE;YACvC6D,KAAK,GAAG,GAAG;YACXO,SAAS,IAAI,CAAC;UAChB;QACF;QACAH,SAAS,GAAGJ,KAAK,IAAI,IAAI,GAAG,CAAC,GAAG,CAAC;MACnC;MACAG,MAAM,GAAG,GAAG,GAAGN,YAAY,CAACU,SAAS,CAAC;IACxC;IAEA,IAAIH,SAAS,KAAKlG,SAAS,IAAImG,KAAK,KAAKnG,SAAS,EAAE;MAClD,MAAMuG,KAAK,CAAC,yCAAyC,CAAC;IACxD;IAEA,IAAI,CAACR,IAAI,EAAE;MACT,IAAIG,SAAS,KAAKlG,SAAS,EAAE;QAC3B8F,KAAK,GAAGA,KAAK,CAACU,WAAW,CAACN,SAAS,CAAC;QACpC,IAAI,CAAC1C,OAAO,CAACiD,KAAK,EAAE;UAClBX,KAAK,GAAGtE,UAAU,CAACsE,KAAK,CAAC;QAC3B;MACF;MAEA,IAAIK,KAAK,KAAKnG,SAAS,EAAE;QACvB,IAAImG,KAAK,GAAG,CAAC,EAAE;UACb,IAAIO,GAAG,GAAGC,IAAI,CAACC,GAAG,CAAC,EAAE,EAAE,CAAC,CAAC,GAAGT,KAAK,CAAC;UAClCL,KAAK,GAAGvE,QAAQ,CAAC,CAAC,GAAG,GAAGuE,KAAK,GAAGY,GAAG,EAAEG,OAAO,CAAC,CAAC,CAAC,CAAC,GAAGH,GAAG;QACxD,CAAC,MAAM;UACLZ,KAAK,GAAGA,KAAK,CAACe,OAAO,CAACV,KAAK,CAAC;UAC5B,IAAI,CAAC3C,OAAO,CAACiD,KAAK,EAAE;YAClBX,KAAK,GAAGtE,UAAU,CAACsE,KAAK,CAAC;UAC3B;QACF;MACF;IACF;IAEA,IAAItC,OAAO,CAACsD,SAAS,IAAItD,OAAO,CAACuD,OAAO,EAAE;MACxCjB,KAAK,GAAG5D,KAAK,CAAC4D,KAAK,CAAC;MACpB,IAAIkB,KAAK,GAAGlB,KAAK,CAACmB,KAAK,CAAC,GAAG,CAAC;MAC5BnB,KAAK,GAAGkB,KAAK,CAAC,CAAC,CAAC;MAChB,IAAIxD,OAAO,CAACsD,SAAS,EAAE;QACrBhB,KAAK,GAAGA,KAAK,CAACvD,OAAO,CAAC,uBAAuB,EAAEiB,OAAO,CAACsD,SAAS,CAAC;MACnE;MACA,IAAIE,KAAK,CAAC/E,MAAM,GAAG,CAAC,EAAE;QACpB6D,KAAK,IAAI,CAACtC,OAAO,CAACuD,OAAO,IAAI,GAAG,IAAIC,KAAK,CAAC,CAAC,CAAC;MAC9C;IACF;IAEA,OAAOnB,GAAG,GAAGC,KAAK,GAAGG,MAAM;EAC7B;EAEA,SAASiB,YAAY,CAAC7D,KAAK,EAAExB,MAAM,EAAEsF,MAAM,EAAE;IAC3C,IAAIA,MAAM,IAAItF,MAAM,EAAE;MACpB,OAAOA,MAAM,CAACsF,MAAM,CAAC;IACvB,CAAC,MAAM,IAAIA,MAAM,IAAI9D,KAAK,CAACG,OAAO,EAAE;MAClC,OAAOH,KAAK,CAACG,OAAO,CAAC2D,MAAM,CAAC;IAC9B;IACA,OAAO,IAAI;EACb;EAEA,SAASC,QAAQ,CAACpF,IAAI,EAAE;IACtB,IAAIF,CAAC,EAAEC,CAAC,EAAE0C,CAAC;IACX,KAAK3C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGE,IAAI,CAACC,MAAM,EAAEH,CAAC,EAAE,EAAE;MAChC2C,CAAC,GAAGzC,IAAI,CAACF,CAAC,CAAC,CAACE,IAAI;MAChB,KAAKD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0C,CAAC,CAACxC,MAAM,EAAEF,CAAC,EAAE,EAAE;QAC7B,IAAI0C,CAAC,CAAC1C,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;UAChB,OAAO,KAAK;QACd;MACF;IACF;IACA,OAAO,IAAI;EACb;EAEA,IAAIsF,WAAW,GAAG;IAChBC,mBAAmB,EAAE,KAAK;IAC1BC,SAAS,EAAE,KAAK;IAChBC,QAAQ,EAAE;MACRC,aAAa,EAAE,KAAK;MACpBC,SAAS,EAAE,CAAC;IACd,CAAC;IACDjE,MAAM,EAAE,CAAC,CAAC;IACVC,KAAK,EAAE;MAACiE,QAAQ,EAAE,EAAE;MAAEC,SAAS,EAAE;IAAM;EACzC,CAAC;EAED,IAAI/E,cAAc,GAAG;IACnBgF,MAAM,EAAE;MACNC,KAAK,EAAE,CACL;QACEC,KAAK,EAAE;UACLC,aAAa,EAAE;QACjB,CAAC;QACDC,UAAU,EAAE;UACVN,QAAQ,EAAE,EAAE;UACZ;UACAC,SAAS,EAAE;QACb;MACF,CAAC,CACF;MACDM,KAAK,EAAE,CACL;QACEC,SAAS,EAAE;UACTC,eAAe,EAAE;QACnB,CAAC;QACDH,UAAU,EAAE;UACVN,QAAQ,EAAE,EAAE;UACZ;UACAC,SAAS,EAAE;QACb,CAAC;QACDS,IAAI,EAAE,CAAC,CAAC;QACRN,KAAK,EAAE,CAAC;MACV,CAAC;IAEL;EACF,CAAC;;EAED;EACA,IAAIO,aAAa,GAAG,CAClB,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAC3E,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAC3E,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,CACjE;EAED,IAAIxF,UAAU,GAAG,UAAUU,OAAO,EAAEC,MAAM,EAAEX,UAAU,EAAE;IACtD,IAAIW,MAAM,KAAKzD,SAAS,EAAE;MACxBwD,OAAO,CAACC,MAAM,CAAC8E,OAAO,GAAG,CAAC,CAAC9E,MAAM;MACjC,IAAIA,MAAM,IAAIA,MAAM,KAAK,IAAI,EAAE;QAC7BD,OAAO,CAACC,MAAM,CAAC+E,QAAQ,GAAG/E,MAAM;MAClC;IACF,CAAC,MAAM,IAAIX,UAAU,EAAE;MACrBU,OAAO,CAACC,MAAM,CAAC8E,OAAO,GAAG,KAAK;IAChC;EACF,CAAC;EAED,IAAIxF,QAAQ,GAAG,UAAUS,OAAO,EAAEE,KAAK,EAAE;IACvCF,OAAO,CAACE,KAAK,CAAC6E,OAAO,GAAG,IAAI;IAC5B/E,OAAO,CAACE,KAAK,CAAC+E,IAAI,GAAG/E,KAAK;EAC5B,CAAC;EAED,IAAIV,MAAM,GAAG,UAAUQ,OAAO,EAAEG,GAAG,EAAE;IACnC,IAAIA,GAAG,KAAK,IAAI,EAAE;MAChBH,OAAO,CAACqE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAACC,KAAK,CAACpE,GAAG,GAAGvB,OAAO,CAACuB,GAAG,CAAC;IAClD;EACF,CAAC;EAED,IAAIV,MAAM,GAAG,UAAUO,OAAO,EAAEI,GAAG,EAAE;IACnCJ,OAAO,CAACqE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAACC,KAAK,CAACnE,GAAG,GAAGxB,OAAO,CAACwB,GAAG,CAAC;EAClD,CAAC;EAED,IAAI8E,SAAS,GAAG,UAAUlF,OAAO,EAAEG,GAAG,EAAE;IACtC,IAAIA,GAAG,KAAK,IAAI,EAAE;MAChBH,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACH,KAAK,CAACpE,GAAG,GAAGvB,OAAO,CAACuB,GAAG,CAAC;IAClD;EACF,CAAC;EAED,IAAIgF,SAAS,GAAG,UAAUnF,OAAO,EAAEI,GAAG,EAAE;IACtCJ,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACH,KAAK,CAACnE,GAAG,GAAGxB,OAAO,CAACwB,GAAG,CAAC;EAClD,CAAC;EAED,IAAIV,UAAU,GAAG,UAAUM,OAAO,EAAEK,OAAO,EAAE;IAC3CL,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACrE,OAAO,GAAG,CAAC,CAACA,OAAO;IAC3CL,OAAO,CAACqE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAACjE,OAAO,GAAG,CAAC,CAACA,OAAO;EAC7C,CAAC;EAED,IAAIV,SAAS,GAAG,UAAUK,OAAO,EAAEE,KAAK,EAAE;IACxCF,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACD,UAAU,CAACM,OAAO,GAAG,IAAI;IACjD/E,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACD,UAAU,CAACW,WAAW,GAAGlF,KAAK;EACxD,CAAC;EAED,IAAIN,SAAS,GAAG,UAAUI,OAAO,EAAEE,KAAK,EAAE;IACxCF,OAAO,CAACqE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAACG,UAAU,CAACM,OAAO,GAAG,IAAI;IACjD/E,OAAO,CAACqE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAACG,UAAU,CAACW,WAAW,GAAGlF,KAAK;EACxD,CAAC;;EAED;EACA,IAAImF,UAAU,GAAG,UAASC,GAAG,EAAEC,OAAO,EAAE;IACtC,IAAI7H,MAAM,GAAG,2CAA2C,CAAC8H,IAAI,CAACF,GAAG,CAAC;IAClE,OAAO5H,MAAM,GAAG,OAAO,GAAGK,QAAQ,CAACL,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,IAAI,GAAGK,QAAQ,CAACL,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,IAAI,GAAGK,QAAQ,CAACL,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,IAAI,GAAG6H,OAAO,GAAG,GAAG,GAAGD,GAAG;EAClJ,CAAC;;EAED;EACA;EACA,IAAIG,OAAO,GAAG,UAASC,CAAC,EAAE;IACxB,OAAOA,CAAC,IAAI,IAAI;EAClB,CAAC;EAED,IAAIC,YAAY,GAAG,UAAU9F,KAAK,EAAErB,IAAI,EAAEwB,OAAO,EAAE;IACjD,IAAI4F,YAAY,GAAGzC,IAAI,CAAC0C,IAAI,CAAChG,KAAK,CAACiG,OAAO,CAACC,WAAW,GAAG,GAAG,GAAGvH,IAAI,CAACwH,MAAM,CAACvH,MAAM,CAAC;IAClF,IAAImH,YAAY,GAAG,EAAE,EAAE;MACrBA,YAAY,GAAG,EAAE;IACnB,CAAC,MAAM,IAAIA,YAAY,GAAG,EAAE,EAAE;MAC5BA,YAAY,GAAG,EAAE;IACnB;IACA,IAAI,CAAC5F,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACH,KAAK,CAAC0B,QAAQ,EAAE;MAC3CjG,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACH,KAAK,CAAC0B,QAAQ,GAAG,UAAU3D,KAAK,EAAE;QACxDA,KAAK,GAAG5D,KAAK,CAAC4D,KAAK,CAAC;QACpB,IAAIA,KAAK,CAAC7D,MAAM,GAAGmH,YAAY,EAAE;UAC/B,OAAOtD,KAAK,CAAC4D,SAAS,CAAC,CAAC,EAAEN,YAAY,GAAG,CAAC,CAAC,GAAG,KAAK;QACrD,CAAC,MAAM;UACL,OAAOtD,KAAK;QACd;MACF,CAAC;IACH;EACF,CAAC;EAED,IAAI6D,gBAAgB,GAAG,UAAStG,KAAK,EAAEG,OAAO,EAAEoG,SAAS,EAAE;IACzD,IAAIC,aAAa,GAAG;MAClB7D,MAAM,EAAE3C,KAAK,CAACG,OAAO,CAACwC,MAAM;MAC5BC,MAAM,EAAE5C,KAAK,CAACG,OAAO,CAACyC,MAAM;MAC5Ba,SAAS,EAAEzD,KAAK,CAACG,OAAO,CAACsD,SAAS;MAClCC,OAAO,EAAE1D,KAAK,CAACG,OAAO,CAACuD,OAAO;MAC9Bb,SAAS,EAAE7C,KAAK,CAACG,OAAO,CAAC0C,SAAS;MAClCC,KAAK,EAAE9C,KAAK,CAACG,OAAO,CAAC2C,KAAK;MAC1BM,KAAK,EAAEpD,KAAK,CAACG,OAAO,CAACiD;IACvB,CAAC;IAED,IAAIpD,KAAK,CAACG,OAAO,CAACsG,KAAK,EAAE;MACvB,IAAIjI,MAAM,GAAGwB,KAAK,CAACrB,IAAI;MACvB,IAAI4H,SAAS,KAAK,KAAK,EAAE;QACvB/H,MAAM,GAAG,CAAC;UAACG,IAAI,EAAEH;QAAM,CAAC,CAAC;MAC3B;;MAEA;MACA,IAAI+B,GAAG,GAAG,CAAC;MACX,KAAK,IAAI9B,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACI,MAAM,EAAEH,CAAC,EAAE,EAAE;QACtC,IAAIiI,CAAC,GAAGlI,MAAM,CAACC,CAAC,CAAC;QACjB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgI,CAAC,CAAC/H,IAAI,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;UACtC,IAAIgI,CAAC,CAAC/H,IAAI,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG6B,GAAG,EAAE;YACtBA,GAAG,GAAGmG,CAAC,CAAC/H,IAAI,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC;UACpB;QACF;MACF;;MAEA;MACA,IAAIiI,KAAK,GAAG,CAAC;MACb,OAAOpG,GAAG,IAAI,IAAI,EAAE;QAClBoG,KAAK,IAAI,IAAI;QACbpG,GAAG,IAAI,IAAI;MACb;;MAEA;MACAiG,aAAa,CAACzD,SAAS,GAAG4D,KAAK;IACjC;IAEA,IAAIJ,SAAS,KAAK,KAAK,EAAE;MACvB,IAAIK,MAAM,GAAGzG,OAAO,CAACqE,MAAM,CAACC,KAAK;MACjC,IAAI8B,SAAS,KAAK,KAAK,EAAE;QACvBK,MAAM,GAAGzG,OAAO,CAACqE,MAAM,CAACK,KAAK;MAC/B;MAEA,IAAI2B,aAAa,CAACzD,SAAS,EAAE;QAC3B,IAAI,CAAC6D,MAAM,CAAC,CAAC,CAAC,CAAClC,KAAK,CAACmC,QAAQ,EAAE;UAC7BD,MAAM,CAAC,CAAC,CAAC,CAAClC,KAAK,CAACmC,QAAQ,GAAGL,aAAa,CAACzD,SAAS,GAAG,CAAC;QACxD;QACA,IAAI,CAAC6D,MAAM,CAAC,CAAC,CAAC,CAAClC,KAAK,CAACC,aAAa,EAAE;UAClCiC,MAAM,CAAC,CAAC,CAAC,CAAClC,KAAK,CAACC,aAAa,GAAG,CAAC;QACnC;MACF;MAEA,IAAI,CAACiC,MAAM,CAAC,CAAC,CAAC,CAAClC,KAAK,CAAC0B,QAAQ,EAAE;QAC7BQ,MAAM,CAAC,CAAC,CAAC,CAAClC,KAAK,CAAC0B,QAAQ,GAAG,UAAU3D,KAAK,EAAE;UAC1C,OAAOF,WAAW,CAAC,EAAE,EAAEE,KAAK,EAAE+D,aAAa,EAAE,IAAI,CAAC;QACpD,CAAC;MACH;IACF;IAEA,IAAI,CAACrG,OAAO,CAACgE,QAAQ,CAACE,SAAS,CAACyC,KAAK,EAAE;MACrC,IAAIP,SAAS,KAAK,SAAS,EAAE;QAC3BpG,OAAO,CAACgE,QAAQ,CAACE,SAAS,CAACyC,KAAK,GAAG,UAAUC,IAAI,EAAEpI,IAAI,EAAE;UACvD,IAAImI,KAAK,GAAGnI,IAAI,CAACqI,QAAQ,CAACD,IAAI,CAACE,YAAY,CAAC,CAACH,KAAK,IAAI,EAAE;UACxD,IAAIA,KAAK,EAAE;YACTA,KAAK,IAAI,IAAI;UACf;UACA,OAAOA,KAAK,GAAG,GAAG,GAAGC,IAAI,CAACG,MAAM,GAAG,IAAI,GAAGH,IAAI,CAACI,MAAM,GAAG,GAAG;QAC7D,CAAC;MACH,CAAC,MAAM,IAAIZ,SAAS,KAAK,QAAQ,EAAE;QACjCpG,OAAO,CAACgE,QAAQ,CAACE,SAAS,CAACyC,KAAK,GAAG,UAAUC,IAAI,EAAEpI,IAAI,EAAE;UACvD,IAAImI,KAAK,GAAGnI,IAAI,CAACqI,QAAQ,CAACD,IAAI,CAACE,YAAY,CAAC,CAACH,KAAK,IAAI,EAAE;UACxD,IAAIA,KAAK,EAAE;YACTA,KAAK,IAAI,IAAI;UACf;UACA,IAAIM,SAAS,GAAGzI,IAAI,CAACqI,QAAQ,CAACD,IAAI,CAACE,YAAY,CAAC,CAACtI,IAAI,CAACoI,IAAI,CAACM,KAAK,CAAC;UACjE,OAAOP,KAAK,GAAG,GAAG,GAAGC,IAAI,CAACG,MAAM,GAAG,IAAI,GAAGH,IAAI,CAACI,MAAM,GAAG,IAAI,GAAGC,SAAS,CAACE,CAAC,GAAG,GAAG;QAClF,CAAC;MACH,CAAC,MAAM,IAAIf,SAAS,KAAK,KAAK,EAAE;QAC9B;QACApG,OAAO,CAACgE,QAAQ,CAACE,SAAS,CAACyC,KAAK,GAAG,UAAUS,WAAW,EAAE5I,IAAI,EAAE;UAC9D,IAAI6I,SAAS,GAAG7I,IAAI,CAACwH,MAAM,CAACoB,WAAW,CAACF,KAAK,CAAC;UAC9C,IAAI5E,KAAK,GAAG,IAAI;UAEhB,IAAI3G,OAAO,CAAC0L,SAAS,CAAC,EAAE;YACtB;YACA;YACAA,SAAS,GAAGA,SAAS,CAACpJ,KAAK,EAAE;YAC7BoJ,SAAS,CAAC,CAAC,CAAC,IAAI/E,KAAK;UACvB,CAAC,MAAM;YACL+E,SAAS,IAAI/E,KAAK;UACpB;UAEA,OAAOF,WAAW,CAACiF,SAAS,EAAE7I,IAAI,CAACqI,QAAQ,CAACO,WAAW,CAACN,YAAY,CAAC,CAACtI,IAAI,CAAC4I,WAAW,CAACF,KAAK,CAAC,EAAEb,aAAa,CAAC;QAC/G,CAAC;MACH,CAAC,MAAM;QACL,IAAIiB,UAAU,GAAGlB,SAAS,KAAK,KAAK,GAAG,QAAQ,GAAG,QAAQ;QAC1DpG,OAAO,CAACgE,QAAQ,CAACE,SAAS,CAACyC,KAAK,GAAG,UAAUS,WAAW,EAAE5I,IAAI,EAAE;UAC9D,IAAImI,KAAK,GAAGnI,IAAI,CAACqI,QAAQ,CAACO,WAAW,CAACN,YAAY,CAAC,CAACH,KAAK,IAAI,EAAE;UAC/D,IAAIA,KAAK,EAAE;YACTA,KAAK,IAAI,IAAI;UACf;UACA,OAAOvE,WAAW,CAACuE,KAAK,EAAES,WAAW,CAACE,UAAU,CAAC,EAAEjB,aAAa,CAAC;QACnE,CAAC;MACH;IACF;EACF,CAAC;EAED,IAAIkB,SAAS,GAAGnI,aAAa,CAAC3C,KAAK,CAACoH,WAAW,EAAExE,cAAc,CAAC,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,MAAM,EAAEC,UAAU,EAAEC,SAAS,EAAEC,SAAS,CAAC;EAEzI,IAAI4H,eAAe,GAAG,UAAU3H,KAAK,EAAEG,OAAO,EAAEoG,SAAS,EAAE3F,OAAO,EAAE;IAClE,IAAIoG,QAAQ,GAAG,EAAE;IACjB,IAAIb,MAAM,GAAG,EAAE;IAEf,IAAI1F,MAAM,GAAGT,KAAK,CAACG,OAAO,CAACM,MAAM,IAAIwE,aAAa;IAElD,IAAI3H,GAAG,GAAG,IAAI;IACd,IAAIsK,IAAI,GAAG,IAAI;IACf,IAAIhG,SAAS;IACb,IAAIjE,KAAK,GAAG,IAAI;IAChB,IAAIK,IAAI,GAAG,IAAI;IACf,IAAIT,IAAI,GAAG,IAAI;IACf,IAAIsK,MAAM,GAAG,IAAI;IAEjB,IAAIrJ,MAAM,GAAGwB,KAAK,CAACrB,IAAI;IAEvB,IAAI4B,GAAG,GAAG,CAAC;IACX,IAAIgG,SAAS,KAAK,QAAQ,EAAE;MAC1B,KAAK,IAAIuB,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGtJ,MAAM,CAACI,MAAM,EAAEkJ,GAAG,EAAE,EAAE;QAC5C,IAAIC,GAAG,GAAGvJ,MAAM,CAACsJ,GAAG,CAAC;QACrB,KAAK,IAAIE,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGD,GAAG,CAACpJ,IAAI,CAACC,MAAM,EAAEoJ,GAAG,EAAE,EAAE;UAC9C,IAAID,GAAG,CAACpJ,IAAI,CAACqJ,GAAG,CAAC,CAAC,CAAC,CAAC,GAAGzH,GAAG,EAAE;YAC1BA,GAAG,GAAGwH,GAAG,CAACpJ,IAAI,CAACqJ,GAAG,CAAC,CAAC,CAAC,CAAC;UACxB;QACF;MACF;IACF;IAEA,IAAIvJ,CAAC;MAAEC,CAAC;MAAEgI,CAAC;MAAEtF,CAAC;MAAE1E,GAAG;MAAEuL,IAAI,GAAG,EAAE;MAAEC,KAAK,GAAG,EAAE;IAE1C,IAAI3B,SAAS,KAAK,KAAK,IAAIA,SAAS,KAAK,QAAQ,IAAKvG,KAAK,CAACmI,KAAK,KAAK,QAAQ,IAAInI,KAAK,CAACmI,KAAK,KAAK,QAAS,EAAE;MAC3G,IAAIC,YAAY,GAAG,EAAE;MAErB,KAAK3J,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACI,MAAM,EAAEH,CAAC,EAAE,EAAE;QAClCiI,CAAC,GAAGlI,MAAM,CAACC,CAAC,CAAC;QAEb,KAAKC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgI,CAAC,CAAC/H,IAAI,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;UAClC0C,CAAC,GAAGsF,CAAC,CAAC/H,IAAI,CAACD,CAAC,CAAC;UACbhC,GAAG,GAAGsD,KAAK,CAACmI,KAAK,IAAI,UAAU,GAAG/G,CAAC,CAAC,CAAC,CAAC,CAACJ,OAAO,EAAE,GAAGI,CAAC,CAAC,CAAC,CAAC;UACvD,IAAI,CAAC6G,IAAI,CAACvL,GAAG,CAAC,EAAE;YACduL,IAAI,CAACvL,GAAG,CAAC,GAAG,IAAI2L,KAAK,CAAC7J,MAAM,CAACI,MAAM,CAAC;UACtC;UACAqJ,IAAI,CAACvL,GAAG,CAAC,CAAC+B,CAAC,CAAC,GAAGM,OAAO,CAACqC,CAAC,CAAC,CAAC,CAAC,CAAC;UAC5B,IAAIgH,YAAY,CAACE,OAAO,CAAC5L,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE;YACpC0L,YAAY,CAAC9I,IAAI,CAAC5C,GAAG,CAAC;UACxB;QACF;MACF;MAEA,IAAIsD,KAAK,CAACmI,KAAK,KAAK,UAAU,IAAInI,KAAK,CAACmI,KAAK,KAAK,QAAQ,EAAE;QAC1DC,YAAY,CAACG,IAAI,CAACrH,YAAY,CAAC;MACjC;MAEA,KAAKxC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,MAAM,CAACI,MAAM,EAAEF,CAAC,EAAE,EAAE;QAClCwJ,KAAK,CAAC5I,IAAI,CAAC,EAAE,CAAC;MAChB;MAEA,IAAImD,KAAK;MACT,IAAI+F,CAAC;MACL,KAAKA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,YAAY,CAACxJ,MAAM,EAAE4J,CAAC,EAAE,EAAE;QACxC/J,CAAC,GAAG2J,YAAY,CAACI,CAAC,CAAC;QACnB,IAAIxI,KAAK,CAACmI,KAAK,KAAK,UAAU,EAAE;UAC9B1F,KAAK,GAAG,IAAIpE,IAAI,CAACU,OAAO,CAACN,CAAC,CAAC,CAAC;UAC5B;UACAnB,GAAG,GAAGA,GAAG,IAAImE,KAAK,CAACgB,KAAK,CAAC;UACzB,IAAI,CAACb,SAAS,EAAE;YACdA,SAAS,GAAGa,KAAK,CAACZ,MAAM,EAAE;UAC5B;UACA+F,IAAI,GAAGA,IAAI,IAAIjG,MAAM,CAACc,KAAK,EAAEb,SAAS,CAAC;UACvCjE,KAAK,GAAGA,KAAK,IAAImE,OAAO,CAACW,KAAK,CAAC;UAC/BzE,IAAI,GAAGA,IAAI,IAAIgE,MAAM,CAACS,KAAK,CAAC;UAC5BlF,IAAI,GAAGA,IAAI,IAAIgE,MAAM,CAACkB,KAAK,CAAC;UAC5BoF,MAAM,GAAGA,MAAM,IAAI1G,QAAQ,CAACsB,KAAK,CAAC;QACpC,CAAC,MAAM;UACLA,KAAK,GAAGhE,CAAC;QACX;QACA0H,MAAM,CAAC7G,IAAI,CAACmD,KAAK,CAAC;QAClB,KAAK/D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,MAAM,CAACI,MAAM,EAAEF,CAAC,EAAE,EAAE;UAClC;UACAwJ,KAAK,CAACxJ,CAAC,CAAC,CAACY,IAAI,CAAC2I,IAAI,CAACxJ,CAAC,CAAC,CAACC,CAAC,CAAC,KAAK/B,SAAS,GAAG,IAAI,GAAGsL,IAAI,CAACxJ,CAAC,CAAC,CAACC,CAAC,CAAC,CAAC;QAC7D;MACF;IACF,CAAC,MAAM;MACL,KAAK,IAAI+J,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGjK,MAAM,CAACI,MAAM,EAAE6J,GAAG,EAAE,EAAE;QAC5C,IAAIC,GAAG,GAAGlK,MAAM,CAACiK,GAAG,CAAC;QACrB,IAAIE,GAAG,GAAG,EAAE;QACZ,KAAK,IAAIC,GAAG,GAAG,CAAC,EAAEA,GAAG,GAAGF,GAAG,CAAC/J,IAAI,CAACC,MAAM,EAAEgK,GAAG,EAAE,EAAE;UAC9C,IAAIC,KAAK,GAAG;YACVhD,CAAC,EAAE9G,OAAO,CAAC2J,GAAG,CAAC/J,IAAI,CAACiK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;YAC5BE,CAAC,EAAE/J,OAAO,CAAC2J,GAAG,CAAC/J,IAAI,CAACiK,GAAG,CAAC,CAAC,CAAC,CAAC;UAC7B,CAAC;UACD,IAAIrC,SAAS,KAAK,QAAQ,EAAE;YAC1BsC,KAAK,CAACE,CAAC,GAAGhK,OAAO,CAAC2J,GAAG,CAAC/J,IAAI,CAACiK,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,GAAGrI,GAAG;YAC9C;YACAsI,KAAK,CAACvB,CAAC,GAAGoB,GAAG,CAAC/J,IAAI,CAACiK,GAAG,CAAC,CAAC,CAAC,CAAC;UAC5B;UACAD,GAAG,CAACrJ,IAAI,CAACuJ,KAAK,CAAC;QACjB;QACAX,KAAK,CAAC5I,IAAI,CAACqJ,GAAG,CAAC;MACjB;IACF;IAEA,KAAKlK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACI,MAAM,EAAEH,CAAC,EAAE,EAAE;MAClCiI,CAAC,GAAGlI,MAAM,CAACC,CAAC,CAAC;MAEb,IAAIuK,KAAK,GAAGtC,CAAC,CAACsC,KAAK,IAAIvI,MAAM,CAAChC,CAAC,CAAC;MAChC,IAAIwK,eAAe,GAAG1C,SAAS,KAAK,MAAM,GAAGf,UAAU,CAACwD,KAAK,EAAE,GAAG,CAAC,GAAGA,KAAK;MAE3E,IAAIE,OAAO,GAAG;QACZpC,KAAK,EAAEJ,CAAC,CAACyC,IAAI,IAAI,EAAE;QACnBxK,IAAI,EAAEuJ,KAAK,CAACzJ,CAAC,CAAC;QACd2K,IAAI,EAAE7C,SAAS,KAAK,MAAM;QAC1B8C,WAAW,EAAEL,KAAK;QAClBC,eAAe,EAAEA,eAAe;QAChCK,oBAAoB,EAAEN,KAAK;QAC3BO,WAAW,EAAE,CAAC;QACdC,yBAAyB,EAAER;MAC7B,CAAC;MAED,IAAItC,CAAC,CAAC+C,KAAK,EAAE;QACXP,OAAO,CAACO,KAAK,GAAG/C,CAAC,CAAC+C,KAAK;MACzB;MAEA,IAAIC,KAAK,GAAG7F,YAAY,CAAC7D,KAAK,EAAE0G,CAAC,EAAE,OAAO,CAAC;MAC3C,IAAIgD,KAAK,KAAK,KAAK,EAAE;QACnBR,OAAO,CAACS,WAAW,GAAG,CAAC;MACzB;MAEA,IAAIC,MAAM,GAAG/F,YAAY,CAAC7D,KAAK,EAAE0G,CAAC,EAAE,QAAQ,CAAC;MAC7C,IAAIkD,MAAM,KAAK,KAAK,EAAE;QACpBV,OAAO,CAACW,WAAW,GAAG,CAAC;QACvBX,OAAO,CAACY,cAAc,GAAG,CAAC;MAC5B;MAEAZ,OAAO,GAAGtM,KAAK,CAACsM,OAAO,EAAElJ,KAAK,CAACG,OAAO,CAAC+I,OAAO,IAAI,CAAC,CAAC,CAAC;MACrDA,OAAO,GAAGtM,KAAK,CAACsM,OAAO,EAAExC,CAAC,CAAC9F,OAAO,IAAI,CAAC,CAAC,CAAC;MACzCsI,OAAO,GAAGtM,KAAK,CAACsM,OAAO,EAAExC,CAAC,CAACwC,OAAO,IAAI,CAAC,CAAC,CAAC;MAEzClC,QAAQ,CAAC1H,IAAI,CAAC4J,OAAO,CAAC;IACxB;IAEA,IAAIa,IAAI,GAAG/J,KAAK,CAACG,OAAO,CAAC4J,IAAI;IAC7B,IAAIC,IAAI,GAAGhK,KAAK,CAACG,OAAO,CAAC6J,IAAI;IAE7B,IAAIhK,KAAK,CAACmI,KAAK,KAAK,UAAU,EAAE;MAC9B;MACA;MACA,IAAI8B,KAAK,IAAG,MAAM,IAAIrJ,OAAO,CAACsJ,OAAO;MACrC,IAAIC,QAAQ,GAAGF,KAAK,GAAG,OAAO,GAAG,MAAM;MACvC,IAAIrE,OAAO,CAACmE,IAAI,CAAC,EAAE;QACjB5J,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACsF,QAAQ,CAAC,CAAC7J,GAAG,GAAGtB,MAAM,CAAC+K,IAAI,CAAC,CAAC/I,OAAO,EAAE;MAChE;MACA,IAAI4E,OAAO,CAACoE,IAAI,CAAC,EAAE;QACjB7J,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACsF,QAAQ,CAAC,CAAC5J,GAAG,GAAGvB,MAAM,CAACgL,IAAI,CAAC,CAAChJ,OAAO,EAAE;MAChE;IACF,CAAC,MAAM,IAAIhB,KAAK,CAACmI,KAAK,KAAK,QAAQ,EAAE;MACnC,IAAIvC,OAAO,CAACmE,IAAI,CAAC,EAAE;QACjB5J,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACH,KAAK,CAACpE,GAAG,GAAGyJ,IAAI;MAC1C;MACA,IAAInE,OAAO,CAACoE,IAAI,CAAC,EAAE;QACjB7J,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACH,KAAK,CAACnE,GAAG,GAAGyJ,IAAI;MAC1C;IACF;;IAEA;IACA,IAAIhK,KAAK,CAACmI,KAAK,KAAK,UAAU,IAAIhC,MAAM,CAACvH,MAAM,KAAK,CAAC,EAAE;MACrD,IAAIgH,OAAO,CAACmE,IAAI,CAAC,EAAE;QACjB5D,MAAM,CAAC7G,IAAI,CAACN,MAAM,CAAC+K,IAAI,CAAC,CAAC;MAC3B;MACA,IAAInE,OAAO,CAACoE,IAAI,CAAC,EAAE;QACjB7D,MAAM,CAAC7G,IAAI,CAACN,MAAM,CAACgL,IAAI,CAAC,CAAC;MAC3B;MACA1M,GAAG,GAAG,KAAK;MACXsK,IAAI,GAAG,KAAK;MACZjK,KAAK,GAAG,KAAK;MACbK,IAAI,GAAG,KAAK;MACZT,IAAI,GAAG,KAAK;MACZsK,MAAM,GAAG,KAAK;IAChB;IAEA,IAAI7H,KAAK,CAACmI,KAAK,KAAK,UAAU,IAAIhC,MAAM,CAACvH,MAAM,GAAG,CAAC,EAAE;MACnD,IAAIwL,OAAO,GAAG,CAACxE,OAAO,CAACmE,IAAI,CAAC,GAAG/K,MAAM,CAAC+K,IAAI,CAAC,GAAG5D,MAAM,CAAC,CAAC,CAAC,EAAEnF,OAAO,EAAE;MAClE,IAAIqJ,OAAO,GAAG,CAACzE,OAAO,CAACoE,IAAI,CAAC,GAAGhL,MAAM,CAACgL,IAAI,CAAC,GAAG7D,MAAM,CAAC,CAAC,CAAC,EAAEnF,OAAO,EAAE;MAElE,KAAKvC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0H,MAAM,CAACvH,MAAM,EAAEH,CAAC,EAAE,EAAE;QAClC,IAAI6L,OAAO,GAAGnE,MAAM,CAAC1H,CAAC,CAAC,CAACuC,OAAO,EAAE;QACjC,IAAIsJ,OAAO,GAAGF,OAAO,EAAE;UACrBA,OAAO,GAAGE,OAAO;QACnB;QACA,IAAIA,OAAO,GAAGD,OAAO,EAAE;UACrBA,OAAO,GAAGC,OAAO;QACnB;MACF;MAEA,IAAIC,QAAQ,GAAG,CAACF,OAAO,GAAGD,OAAO,KAAK,KAAK,GAAG,MAAM,CAAC;MAErD,IAAI,CAACjK,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAACwF,IAAI,EAAE;QACtC,IAAIC,IAAI;QACR,IAAIzM,IAAI,IAAIuM,QAAQ,GAAG,GAAG,GAAG,EAAE,EAAE;UAC/BpK,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAACwF,IAAI,GAAG,MAAM;UAC1CC,IAAI,GAAG,GAAG;QACZ,CAAC,MAAM,IAAI9M,KAAK,IAAI4M,QAAQ,GAAG,EAAE,GAAG,EAAE,EAAE;UACtCpK,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAACwF,IAAI,GAAG,OAAO;UAC3CC,IAAI,GAAG,EAAE;QACX,CAAC,MAAM,IAAInN,GAAG,IAAIiN,QAAQ,GAAG,EAAE,EAAE;UAC/BpK,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAACwF,IAAI,GAAG,KAAK;UACzCC,IAAI,GAAG,CAAC;QACV,CAAC,MAAM,IAAIlN,IAAI,IAAIgN,QAAQ,GAAG,GAAG,EAAE;UACjCpK,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC0F,cAAc,GAAG;YAACnN,IAAI,EAAE;UAAY,CAAC;UAClE4C,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAACwF,IAAI,GAAG,MAAM;UAC1CC,IAAI,GAAG,CAAC,GAAG,IAAI;QACjB,CAAC,MAAM,IAAI5C,MAAM,EAAE;UACjB1H,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC0F,cAAc,GAAG;YAAC7C,MAAM,EAAE;UAAQ,CAAC;UAChE1H,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAACwF,IAAI,GAAG,QAAQ;UAC5CC,IAAI,GAAG,CAAC,GAAG,IAAI,GAAG,IAAI;QACxB;QAEA,IAAIA,IAAI,IAAIF,QAAQ,GAAG,CAAC,EAAE;UACxB,IAAII,YAAY,GAAGrH,IAAI,CAAC0C,IAAI,CAACuE,QAAQ,GAAGE,IAAI,IAAIzK,KAAK,CAACiG,OAAO,CAACC,WAAW,GAAG,KAAK,CAAC,CAAC;UACnF,IAAI0B,IAAI,IAAI6C,IAAI,KAAK,CAAC,EAAE;YACtBE,YAAY,GAAGrH,IAAI,CAAC0C,IAAI,CAAC2E,YAAY,GAAG,GAAG,CAAC,GAAG,CAAC;UAClD;UACAxK,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC2F,YAAY,GAAGA,YAAY;QAC1D;MACF;MAEA,IAAI,CAACxK,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC4F,aAAa,EAAE;QAC/C,IAAItN,GAAG,EAAE;UACP6C,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC4F,aAAa,GAAG,IAAI;QACnD,CAAC,MAAM,IAAIrN,IAAI,EAAE;UACf4C,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC4F,aAAa,GAAG,YAAY;QAC3D,CAAC,MAAM,IAAI/C,MAAM,EAAE;UACjB1H,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACG,IAAI,CAAC4F,aAAa,GAAG,QAAQ;QACvD;MACF;IACF;IAEA,IAAIjM,IAAI,GAAG;MACTwH,MAAM,EAAEA,MAAM;MACda,QAAQ,EAAEA;IACZ,CAAC;IAED,OAAOrI,IAAI;EACb,CAAC;EAED,IAAIkM,aAAa,GAAG,SAASA,aAAa,CAACjK,OAAO,EAAE;IAClD,IAAI,CAACuI,IAAI,GAAG,SAAS;IACrB,IAAI,CAACvI,OAAO,GAAGA,OAAO;EACxB,CAAC;EAEDiK,aAAa,CAAC5O,SAAS,CAAC6O,eAAe,GAAG,SAASA,eAAe,CAAE9K,KAAK,EAAEuG,SAAS,EAAE;IACpF,IAAIrG,YAAY,GAAG,CAAC,CAAC;IACrB;IACA,IAAI,CAACF,KAAK,CAACG,OAAO,CAACI,GAAG,IAAIwD,QAAQ,CAAC/D,KAAK,CAACrB,IAAI,CAAC,EAAE;MAC9CuB,YAAY,CAACK,GAAG,GAAG,CAAC;IACtB;IAEA,IAAIJ,OAAO,GAAGuH,SAAS,CAAC1H,KAAK,EAAEpD,KAAK,CAACsD,YAAY,EAAEF,KAAK,CAACG,OAAO,CAAC,CAAC;IAClEmG,gBAAgB,CAACtG,KAAK,EAAEG,OAAO,EAAEoG,SAAS,CAAC;IAE3C,IAAI5H,IAAI,GAAGgJ,eAAe,CAAC3H,KAAK,EAAEG,OAAO,EAAEoG,SAAS,IAAI,MAAM,EAAE,IAAI,CAAC3F,OAAO,CAAC;IAE7E,IAAIZ,KAAK,CAACmI,KAAK,KAAK,QAAQ,EAAE;MAC5BhI,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAAC9G,IAAI,GAAG,QAAQ;MACvCoC,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACM,QAAQ,GAAG,QAAQ;IAC7C,CAAC,MAAM;MACLhF,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAAC9G,IAAI,GAAGiC,KAAK,CAACmI,KAAK,KAAK,QAAQ,GAAG,UAAU,GAAG,MAAM;IAC/E;IAEA,IAAI,CAAC4C,SAAS,CAAC/K,KAAK,EAAE,MAAM,EAAErB,IAAI,EAAEwB,OAAO,CAAC;EAC9C,CAAC;EAED0K,aAAa,CAAC5O,SAAS,CAAC+O,cAAc,GAAG,SAASA,cAAc,CAAEhL,KAAK,EAAE;IACvE,IAAIG,OAAO,GAAGvD,KAAK,CAAC,CAAC,CAAC,EAAEoH,WAAW,CAAC;IACpC,IAAIhE,KAAK,CAACG,OAAO,CAAC8K,KAAK,EAAE;MACvB9K,OAAO,CAAC+K,gBAAgB,GAAG,EAAE;IAC/B;IAEA,IAAI,QAAQ,IAAIlL,KAAK,CAACG,OAAO,EAAE;MAC7BV,UAAU,CAACU,OAAO,EAAEH,KAAK,CAACG,OAAO,CAACC,MAAM,CAAC;IAC3C;IAEA,IAAIJ,KAAK,CAACG,OAAO,CAACE,KAAK,EAAE;MACvBX,QAAQ,CAACS,OAAO,EAAEH,KAAK,CAACG,OAAO,CAACE,KAAK,CAAC;IACxC;IAEAF,OAAO,GAAGvD,KAAK,CAACuD,OAAO,EAAEH,KAAK,CAACG,OAAO,CAACS,OAAO,IAAI,CAAC,CAAC,CAAC;IACrD0F,gBAAgB,CAACtG,KAAK,EAAEG,OAAO,EAAE,KAAK,CAAC;IAEvC,IAAIgG,MAAM,GAAG,EAAE;IACf,IAAIgF,MAAM,GAAG,EAAE;IACf,KAAK,IAAI1M,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuB,KAAK,CAACrB,IAAI,CAACC,MAAM,EAAEH,CAAC,EAAE,EAAE;MAC1C,IAAIoK,KAAK,GAAG7I,KAAK,CAACrB,IAAI,CAACF,CAAC,CAAC;MACzB0H,MAAM,CAAC7G,IAAI,CAACuJ,KAAK,CAAC,CAAC,CAAC,CAAC;MACrBsC,MAAM,CAAC7L,IAAI,CAACuJ,KAAK,CAAC,CAAC,CAAC,CAAC;IACvB;IAEA,IAAIK,OAAO,GAAG;MACZvK,IAAI,EAAEwM,MAAM;MACZlC,eAAe,EAAEjJ,KAAK,CAACG,OAAO,CAACM,MAAM,IAAIwE;IAC3C,CAAC;IACDiE,OAAO,GAAGtM,KAAK,CAACsM,OAAO,EAAElJ,KAAK,CAACG,OAAO,CAAC+I,OAAO,IAAI,CAAC,CAAC,CAAC;IAErD,IAAIvK,IAAI,GAAG;MACTwH,MAAM,EAAEA,MAAM;MACda,QAAQ,EAAE,CAACkC,OAAO;IACpB,CAAC;IAED,IAAI,CAAC6B,SAAS,CAAC/K,KAAK,EAAE,KAAK,EAAErB,IAAI,EAAEwB,OAAO,CAAC;EAC7C,CAAC;EAED0K,aAAa,CAAC5O,SAAS,CAACmP,iBAAiB,GAAG,SAASA,iBAAiB,CAAEpL,KAAK,EAAEuG,SAAS,EAAE;IACxF,IAAIpG,OAAO;IACX,IAAIoG,SAAS,KAAK,KAAK,EAAE;MACvB,IAAI8E,UAAU,GAAGzO,KAAK,CAACoH,WAAW,EAAExE,cAAc,CAAC;MACnD,OAAO6L,UAAU,CAAC7G,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAACC,KAAK,CAACC,aAAa;MACrDxE,OAAO,GAAGZ,aAAa,CAAC8L,UAAU,EAAE5L,UAAU,EAAEC,QAAQ,EAAE2F,SAAS,EAAEC,SAAS,EAAEzF,UAAU,EAAEC,SAAS,EAAEC,SAAS,CAAC,CAACC,KAAK,EAAEA,KAAK,CAACG,OAAO,CAAC;IACzI,CAAC,MAAM;MACLA,OAAO,GAAGuH,SAAS,CAAC1H,KAAK,EAAEA,KAAK,CAACG,OAAO,CAAC;IAC3C;IACAmG,gBAAgB,CAACtG,KAAK,EAAEG,OAAO,EAAEoG,SAAS,CAAC;IAC3C,IAAI5H,IAAI,GAAGgJ,eAAe,CAAC3H,KAAK,EAAEG,OAAO,EAAE,QAAQ,EAAE,IAAI,CAACS,OAAO,CAAC;IAClE,IAAI2F,SAAS,KAAK,KAAK,EAAE;MACvBT,YAAY,CAAC9F,KAAK,EAAErB,IAAI,EAAEwB,OAAO,CAAC;IACpC;IACA,IAAI,CAAC4K,SAAS,CAAC/K,KAAK,EAAGuG,SAAS,KAAK,KAAK,GAAG,eAAe,GAAG,KAAK,EAAG5H,IAAI,EAAEwB,OAAO,CAAC;EACvF,CAAC;EAED0K,aAAa,CAAC5O,SAAS,CAACqP,eAAe,GAAG,SAASA,eAAe,CAAEtL,KAAK,EAAE;IACzE,IAAI,CAAC8K,eAAe,CAAC9K,KAAK,EAAE,MAAM,CAAC;EACrC,CAAC;EAED6K,aAAa,CAAC5O,SAAS,CAACsP,cAAc,GAAG,SAASA,cAAc,CAAEvL,KAAK,EAAE;IACvE,IAAI,CAACoL,iBAAiB,CAACpL,KAAK,EAAE,KAAK,CAAC;EACtC,CAAC;EAED6K,aAAa,CAAC5O,SAAS,CAACuP,kBAAkB,GAAG,SAASA,kBAAkB,CAAExL,KAAK,EAAEuG,SAAS,EAAE;IAC1FA,SAAS,GAAGA,SAAS,IAAI,SAAS;IAElC,IAAIpG,OAAO,GAAGuH,SAAS,CAAC1H,KAAK,EAAEA,KAAK,CAACG,OAAO,CAAC;IAC7CmG,gBAAgB,CAACtG,KAAK,EAAEG,OAAO,EAAEoG,SAAS,CAAC;IAE3C,IAAI,EAAE,WAAW,IAAIpG,OAAO,CAAC,EAAE;MAC7BA,OAAO,CAACsL,SAAS,GAAG,KAAK;IAC3B;IAEA,IAAI9M,IAAI,GAAGgJ,eAAe,CAAC3H,KAAK,EAAEG,OAAO,EAAEoG,SAAS,EAAE,IAAI,CAAC3F,OAAO,CAAC;IAEnET,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAAC9G,IAAI,GAAG,QAAQ;IACvCoC,OAAO,CAACqE,MAAM,CAACK,KAAK,CAAC,CAAC,CAAC,CAACM,QAAQ,GAAG,QAAQ;IAE3C,IAAI,CAAC4F,SAAS,CAAC/K,KAAK,EAAEuG,SAAS,EAAE5H,IAAI,EAAEwB,OAAO,CAAC;EACjD,CAAC;EAED0K,aAAa,CAAC5O,SAAS,CAACyP,iBAAiB,GAAG,SAASA,iBAAiB,CAAE1L,KAAK,EAAE;IAC7E,IAAI,CAACwL,kBAAkB,CAACxL,KAAK,EAAE,QAAQ,CAAC;EAC1C,CAAC;EAED6K,aAAa,CAAC5O,SAAS,CAAC0P,OAAO,GAAG,SAASA,OAAO,CAAE3L,KAAK,EAAE;IACzD,IAAIA,KAAK,CAACA,KAAK,EAAE;MACfA,KAAK,CAACA,KAAK,CAAC2L,OAAO,EAAE;IACvB;EACF,CAAC;EAEDd,aAAa,CAAC5O,SAAS,CAAC8O,SAAS,GAAG,SAASA,SAAS,CAAE/K,KAAK,EAAEjC,IAAI,EAAEY,IAAI,EAAEwB,OAAO,EAAE;IAClF,IAAI,CAACwL,OAAO,CAAC3L,KAAK,CAAC;IAEnB,IAAIE,YAAY,GAAG;MACjBnC,IAAI,EAAEA,IAAI;MACVY,IAAI,EAAEA,IAAI;MACVwB,OAAO,EAAEA;IACX,CAAC;IAED,IAAIH,KAAK,CAACG,OAAO,CAACyL,IAAI,EAAE;MACtBC,MAAM,CAACC,OAAO,CAACC,GAAG,CAAC,iBAAiB,GAAGC,IAAI,CAACC,SAAS,CAAC/L,YAAY,CAAC,GAAG,IAAI,CAAC;IAC7E;IAEAF,KAAK,CAACiG,OAAO,CAACiG,SAAS,GAAG,mBAAmB;IAC7C,IAAIC,GAAG,GAAGnM,KAAK,CAACiG,OAAO,CAACmG,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;IACzDpM,KAAK,CAACA,KAAK,GAAG,IAAI,IAAI,CAACY,OAAO,CAACuL,GAAG,EAAEjM,YAAY,CAAC;EACnD,CAAC;EAED,IAAImM,gBAAgB,GAAG;IACrBrM,KAAK,EAAE,CAAC,CAAC;IACTsM,KAAK,EAAE;MACLjM,KAAK,EAAE;QACL+E,IAAI,EAAE;MACR,CAAC;MACDe,MAAM,EAAE;QACNoG,KAAK,EAAE;UACLjI,QAAQ,EAAE;QACZ;MACF;IACF,CAAC;IACDkI,KAAK,EAAE;MACLnM,KAAK,EAAE;QACL+E,IAAI,EAAE;MACR,CAAC;MACDe,MAAM,EAAE;QACNoG,KAAK,EAAE;UACLjI,QAAQ,EAAE;QACZ;MACF;IACF,CAAC;IACDjE,KAAK,EAAE;MACL+E,IAAI,EAAE;IACR,CAAC;IACDqH,OAAO,EAAE;MACPC,OAAO,EAAE;IACX,CAAC;IACDtM,MAAM,EAAE;MACNmJ,WAAW,EAAE;IACf,CAAC;IACDoD,OAAO,EAAE;MACPJ,KAAK,EAAE;QACLjI,QAAQ,EAAE;MACZ;IACF,CAAC;IACDsI,WAAW,EAAE;MACXC,UAAU,EAAE,CAAC,CAAC;MACdC,IAAI,EAAE,CAAC,CAAC;MACRtO,MAAM,EAAE;QACNuO,MAAM,EAAE,CAAC;MACX;IACF;EACF,CAAC;EAED,IAAIC,YAAY,GAAG,UAAU7M,OAAO,EAAEC,MAAM,EAAEX,UAAU,EAAE;IACxD,IAAIW,MAAM,KAAKzD,SAAS,EAAE;MACxBwD,OAAO,CAACC,MAAM,CAACsM,OAAO,GAAG,CAAC,CAACtM,MAAM;MACjC,IAAIA,MAAM,IAAIA,MAAM,KAAK,IAAI,EAAE;QAC7B,IAAIA,MAAM,KAAK,KAAK,IAAIA,MAAM,KAAK,QAAQ,EAAE;UAC3CD,OAAO,CAACC,MAAM,CAAC6M,aAAa,GAAG7M,MAAM;QACvC,CAAC,MAAM;UACLD,OAAO,CAACC,MAAM,CAAC8M,MAAM,GAAG,UAAU;UAClC/M,OAAO,CAACC,MAAM,CAAC6M,aAAa,GAAG,QAAQ;UACvC9M,OAAO,CAACC,MAAM,CAAC+M,KAAK,GAAG/M,MAAM;QAC/B;MACF;IACF,CAAC,MAAM,IAAIX,UAAU,EAAE;MACrBU,OAAO,CAACC,MAAM,CAACsM,OAAO,GAAG,KAAK;IAChC;EACF,CAAC;EAED,IAAIU,UAAU,GAAG,UAAUjN,OAAO,EAAEE,KAAK,EAAE;IACzCF,OAAO,CAACE,KAAK,CAAC+E,IAAI,GAAG/E,KAAK;EAC5B,CAAC;EAED,IAAIgN,QAAQ,GAAG,UAAUlN,OAAO,EAAEG,GAAG,EAAE;IACrCH,OAAO,CAACqM,KAAK,CAAClM,GAAG,GAAGA,GAAG;EACzB,CAAC;EAED,IAAIgN,QAAQ,GAAG,UAAUnN,OAAO,EAAEI,GAAG,EAAE;IACrCJ,OAAO,CAACqM,KAAK,CAACjM,GAAG,GAAGA,GAAG;EACzB,CAAC;EAED,IAAIgN,YAAY,GAAG,UAAUpN,OAAO,EAAEK,OAAO,EAAE;IAC7C,IAAIgN,YAAY,GAAGhN,OAAO,GAAIA,OAAO,KAAK,IAAI,GAAG,QAAQ,GAAGA,OAAO,GAAI,IAAI;IAC3EL,OAAO,CAACyM,WAAW,CAACpO,MAAM,CAACiP,QAAQ,GAAGD,YAAY;IAClDrN,OAAO,CAACyM,WAAW,CAACE,IAAI,CAACW,QAAQ,GAAGD,YAAY;IAChDrN,OAAO,CAACyM,WAAW,CAACC,UAAU,CAACY,QAAQ,GAAGD,YAAY;EACxD,CAAC;EAED,IAAIE,WAAW,GAAG,UAAUvN,OAAO,EAAEE,KAAK,EAAE;IAC1CF,OAAO,CAACmM,KAAK,CAACjM,KAAK,CAAC+E,IAAI,GAAG/E,KAAK;EAClC,CAAC;EAED,IAAIsN,WAAW,GAAG,UAAUxN,OAAO,EAAEE,KAAK,EAAE;IAC1CF,OAAO,CAACqM,KAAK,CAACnM,KAAK,CAAC+E,IAAI,GAAG/E,KAAK;EAClC,CAAC;EAED,IAAIuN,WAAW,GAAGrO,aAAa,CAAC8M,gBAAgB,EAAEW,YAAY,EAAEI,UAAU,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,YAAY,EAAEG,WAAW,EAAEC,WAAW,CAAC;EAEvI,IAAIE,kBAAkB,GAAG,UAAS7N,KAAK,EAAEG,OAAO,EAAEoG,SAAS,EAAE;IAC3D,IAAIC,aAAa,GAAG;MAClB7D,MAAM,EAAE3C,KAAK,CAACG,OAAO,CAACwC,MAAM;MAC5BC,MAAM,EAAE5C,KAAK,CAACG,OAAO,CAACyC,MAAM;MAC5Ba,SAAS,EAAEzD,KAAK,CAACG,OAAO,CAACsD,SAAS;MAClCC,OAAO,EAAE1D,KAAK,CAACG,OAAO,CAACuD,OAAO;MAC9Bb,SAAS,EAAE7C,KAAK,CAACG,OAAO,CAAC0C,SAAS;MAClCC,KAAK,EAAE9C,KAAK,CAACG,OAAO,CAAC2C,KAAK;MAC1BM,KAAK,EAAEpD,KAAK,CAACG,OAAO,CAACiD;IACvB,CAAC;IAED,IAAImD,SAAS,KAAK,KAAK,IAAI,CAACpG,OAAO,CAACqM,KAAK,CAACrG,MAAM,CAAC2H,SAAS,EAAE;MAC1D3N,OAAO,CAACqM,KAAK,CAACrG,MAAM,CAAC2H,SAAS,GAAG,YAAY;QAC3C,OAAOvL,WAAW,CAAC,EAAE,EAAE,IAAI,CAACE,KAAK,EAAE+D,aAAa,CAAC;MACnD,CAAC;IACH;IAEA,IAAI,CAACrG,OAAO,CAACwM,OAAO,CAACoB,cAAc,EAAE;MACnC5N,OAAO,CAACwM,OAAO,CAACoB,cAAc,GAAG,YAAY;QAC3C,OAAO,qBAAqB,GAAG,IAAI,CAAC/E,KAAK,GAAG,kBAAkB,GAAGzG,WAAW,CAAC,IAAI,CAAC/D,MAAM,CAAC2K,IAAI,GAAG,OAAO,EAAE,IAAI,CAACL,CAAC,EAAEtC,aAAa,CAAC,GAAG,WAAW;MAC/I,CAAC;IACH;EACF,CAAC;EAED,IAAIwH,eAAe,GAAG,SAASnD,aAAa,CAACjK,OAAO,EAAE;IACpD,IAAI,CAACuI,IAAI,GAAG,YAAY;IACxB,IAAI,CAACvI,OAAO,GAAGA,OAAO;EACxB,CAAC;EAEDoN,eAAe,CAAC/R,SAAS,CAAC6O,eAAe,GAAG,SAASA,eAAe,CAAE9K,KAAK,EAAEuG,SAAS,EAAE;IACtFA,SAAS,GAAGA,SAAS,IAAI,QAAQ;IACjC,IAAIrG,YAAY,GAAG,CAAC,CAAC;IACrB,IAAIqG,SAAS,KAAK,YAAY,EAAE;MAC9BrG,YAAY,GAAG;QACb0M,WAAW,EAAE;UACXC,UAAU,EAAE;YACVY,QAAQ,EAAE;UACZ,CAAC;UACDX,IAAI,EAAE;YACJW,QAAQ,EAAE;UACZ,CAAC;UACDjP,MAAM,EAAE;YACNuO,MAAM,EAAE;cACNL,OAAO,EAAE;YACX;UACF;QACF;MACF,CAAC;IACH;IAEA,IAAI1M,KAAK,CAACG,OAAO,CAACuJ,KAAK,KAAK,KAAK,EAAE;MACjC,IAAInD,SAAS,KAAK,YAAY,EAAE;QAC9BA,SAAS,GAAG,MAAM;MACpB,CAAC,MAAM,IAAIA,SAAS,KAAK,QAAQ,EAAE;QACjCA,SAAS,GAAG,MAAM;MACpB;IACF;IAEA,IAAIpG,OAAO,GAAGyN,WAAW,CAAC5N,KAAK,EAAEA,KAAK,CAACG,OAAO,EAAED,YAAY,CAAC;MAAEvB,IAAI;MAAEF,CAAC;MAAEC,CAAC;IACzEyB,OAAO,CAACmM,KAAK,CAACvO,IAAI,GAAGiC,KAAK,CAACmI,KAAK,KAAK,QAAQ,GAAG,UAAU,GAAInI,KAAK,CAACmI,KAAK,KAAK,QAAQ,GAAG,QAAQ,GAAG,UAAW;IAC/G,IAAI,CAAChI,OAAO,CAACH,KAAK,CAACjC,IAAI,EAAE;MACvBoC,OAAO,CAACH,KAAK,CAACjC,IAAI,GAAGwI,SAAS;IAChC;IACAsH,kBAAkB,CAAC7N,KAAK,EAAEG,OAAO,EAAEoG,SAAS,CAAC;IAE7C,IAAI/H,MAAM,GAAGwB,KAAK,CAACrB,IAAI;IACvB,KAAKF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACI,MAAM,EAAEH,CAAC,EAAE,EAAE;MAClCD,MAAM,CAACC,CAAC,CAAC,CAAC0K,IAAI,GAAG3K,MAAM,CAACC,CAAC,CAAC,CAAC0K,IAAI,IAAI,OAAO;MAC1CxK,IAAI,GAAGH,MAAM,CAACC,CAAC,CAAC,CAACE,IAAI;MACrB,IAAIqB,KAAK,CAACmI,KAAK,KAAK,UAAU,EAAE;QAC9B,KAAKzJ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,IAAI,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;UAChCC,IAAI,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGC,IAAI,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAACsC,OAAO,EAAE;QACnC;MACF;MACAxC,MAAM,CAACC,CAAC,CAAC,CAACsO,MAAM,GAAG;QAACkB,MAAM,EAAE;MAAQ,CAAC;MACrC,IAAIjO,KAAK,CAACG,OAAO,CAACyJ,MAAM,KAAK,KAAK,EAAE;QAClCpL,MAAM,CAACC,CAAC,CAAC,CAACsO,MAAM,CAACL,OAAO,GAAG,KAAK;MAClC;IACF;IAEA,IAAI,CAAC3B,SAAS,CAAC/K,KAAK,EAAExB,MAAM,EAAE2B,OAAO,CAAC;EACxC,CAAC;EAED6N,eAAe,CAAC/R,SAAS,CAACuP,kBAAkB,GAAG,SAASA,kBAAkB,CAAExL,KAAK,EAAE;IACjF,IAAIG,OAAO,GAAGyN,WAAW,CAAC5N,KAAK,EAAEA,KAAK,CAACG,OAAO,EAAE,CAAC,CAAC,CAAC;IACnDA,OAAO,CAACH,KAAK,CAACjC,IAAI,GAAG,SAAS;IAC9B,IAAI,CAACgN,SAAS,CAAC/K,KAAK,EAAEA,KAAK,CAACrB,IAAI,EAAEwB,OAAO,CAAC;EAC5C,CAAC;EAED6N,eAAe,CAAC/R,SAAS,CAAC+O,cAAc,GAAG,SAASA,cAAc,CAAEhL,KAAK,EAAE;IACzE,IAAIE,YAAY,GAAGtD,KAAK,CAACyP,gBAAgB,EAAE,CAAC,CAAC,CAAC;IAE9C,IAAIrM,KAAK,CAACG,OAAO,CAACM,MAAM,EAAE;MACxBP,YAAY,CAACO,MAAM,GAAGT,KAAK,CAACG,OAAO,CAACM,MAAM;IAC5C;IACA,IAAIT,KAAK,CAACG,OAAO,CAAC8K,KAAK,EAAE;MACvB/K,YAAY,CAAC0M,WAAW,GAAG;QAACsB,GAAG,EAAE;UAACC,SAAS,EAAE;QAAK;MAAC,CAAC;IACtD;IAEA,IAAI,QAAQ,IAAInO,KAAK,CAACG,OAAO,EAAE;MAC7B6M,YAAY,CAAC9M,YAAY,EAAEF,KAAK,CAACG,OAAO,CAACC,MAAM,CAAC;IAClD;IAEA,IAAIJ,KAAK,CAACG,OAAO,CAACE,KAAK,EAAE;MACvB+M,UAAU,CAAClN,YAAY,EAAEF,KAAK,CAACG,OAAO,CAACE,KAAK,CAAC;IAC/C;IAEA,IAAIF,OAAO,GAAGvD,KAAK,CAACsD,YAAY,EAAEF,KAAK,CAACG,OAAO,CAACS,OAAO,IAAI,CAAC,CAAC,CAAC;IAC9DiN,kBAAkB,CAAC7N,KAAK,EAAEG,OAAO,EAAE,KAAK,CAAC;IACzC,IAAI3B,MAAM,GAAG,CAAC;MACZT,IAAI,EAAE,KAAK;MACXoL,IAAI,EAAEnJ,KAAK,CAACG,OAAO,CAAC2G,KAAK,IAAI,OAAO;MACpCnI,IAAI,EAAEqB,KAAK,CAACrB;IACd,CAAC,CAAC;IAEF,IAAI,CAACoM,SAAS,CAAC/K,KAAK,EAAExB,MAAM,EAAE2B,OAAO,CAAC;EACxC,CAAC;EAED6N,eAAe,CAAC/R,SAAS,CAACmP,iBAAiB,GAAG,SAASA,iBAAiB,CAAEpL,KAAK,EAAEuG,SAAS,EAAE;IAC1FA,SAAS,GAAGA,SAAS,IAAI,QAAQ;IACjC,IAAI/H,MAAM,GAAGwB,KAAK,CAACrB,IAAI;IACvB,IAAIwB,OAAO,GAAGyN,WAAW,CAAC5N,KAAK,EAAEA,KAAK,CAACG,OAAO,CAAC;MAAE1B,CAAC;MAAEC,CAAC;MAAEgI,CAAC;MAAEtF,CAAC;MAAE6G,IAAI,GAAG,EAAE;MAAEmG,UAAU,GAAG,EAAE;IACvFjO,OAAO,CAACH,KAAK,CAACjC,IAAI,GAAGwI,SAAS;IAC9BsH,kBAAkB,CAAC7N,KAAK,EAAEG,OAAO,EAAEoG,SAAS,CAAC;IAE7C,KAAK9H,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACI,MAAM,EAAEH,CAAC,EAAE,EAAE;MAClCiI,CAAC,GAAGlI,MAAM,CAACC,CAAC,CAAC;MAEb,KAAKC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgI,CAAC,CAAC/H,IAAI,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;QAClC0C,CAAC,GAAGsF,CAAC,CAAC/H,IAAI,CAACD,CAAC,CAAC;QACb,IAAI,CAACuJ,IAAI,CAAC7G,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;UACf6G,IAAI,CAAC7G,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAIiH,KAAK,CAAC7J,MAAM,CAACI,MAAM,CAAC;UACrCwP,UAAU,CAAC9O,IAAI,CAAC8B,CAAC,CAAC,CAAC,CAAC,CAAC;QACvB;QACA6G,IAAI,CAAC7G,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC3C,CAAC,CAAC,GAAG2C,CAAC,CAAC,CAAC,CAAC;MACtB;IACF;IAEA,IAAIpB,KAAK,CAACmI,KAAK,KAAK,QAAQ,EAAE;MAC5BiG,UAAU,CAAC7F,IAAI,CAACrH,YAAY,CAAC;IAC/B;IAEAf,OAAO,CAACmM,KAAK,CAAC8B,UAAU,GAAGA,UAAU;IAErC,IAAIC,SAAS,GAAG,EAAE;MAAEC,EAAE;IACtB,KAAK7P,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACI,MAAM,EAAEH,CAAC,EAAE,EAAE;MAClC2C,CAAC,GAAG,EAAE;MACN,KAAK1C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0P,UAAU,CAACxP,MAAM,EAAEF,CAAC,EAAE,EAAE;QACtC0C,CAAC,CAAC9B,IAAI,CAAC2I,IAAI,CAACmG,UAAU,CAAC1P,CAAC,CAAC,CAAC,CAACD,CAAC,CAAC,IAAI,CAAC,CAAC;MACrC;MAEA6P,EAAE,GAAG;QACHnF,IAAI,EAAE3K,MAAM,CAACC,CAAC,CAAC,CAAC0K,IAAI,IAAI,OAAO;QAC/BxK,IAAI,EAAEyC;MACR,CAAC;MACD,IAAI5C,MAAM,CAACC,CAAC,CAAC,CAACgL,KAAK,EAAE;QACnB6E,EAAE,CAAC7E,KAAK,GAAGjL,MAAM,CAACC,CAAC,CAAC,CAACgL,KAAK;MAC5B;MAEA4E,SAAS,CAAC/O,IAAI,CAACgP,EAAE,CAAC;IACpB;IAEA,IAAI,CAACvD,SAAS,CAAC/K,KAAK,EAAEqO,SAAS,EAAElO,OAAO,CAAC;EAC3C,CAAC;EAED6N,eAAe,CAAC/R,SAAS,CAACsP,cAAc,GAAG,SAASA,cAAc,CAAEvL,KAAK,EAAE;IACzE,IAAI,CAACoL,iBAAiB,CAACpL,KAAK,EAAE,KAAK,CAAC;EACtC,CAAC;EAEDgO,eAAe,CAAC/R,SAAS,CAACqP,eAAe,GAAG,SAASA,eAAe,CAAEtL,KAAK,EAAE;IAC3E,IAAI,CAAC8K,eAAe,CAAC9K,KAAK,EAAE,YAAY,CAAC;EAC3C,CAAC;EAEDgO,eAAe,CAAC/R,SAAS,CAAC0P,OAAO,GAAG,SAASA,OAAO,CAAE3L,KAAK,EAAE;IAC3D,IAAIA,KAAK,CAACA,KAAK,EAAE;MACfA,KAAK,CAACA,KAAK,CAAC2L,OAAO,EAAE;IACvB;EACF,CAAC;EAEDqC,eAAe,CAAC/R,SAAS,CAAC8O,SAAS,GAAG,SAASA,SAAS,CAAE/K,KAAK,EAAErB,IAAI,EAAEwB,OAAO,EAAE;IAC9E,IAAI,CAACwL,OAAO,CAAC3L,KAAK,CAAC;IAEnBG,OAAO,CAACH,KAAK,CAACuO,QAAQ,GAAGvO,KAAK,CAACiG,OAAO,CAACuI,EAAE;IACzCrO,OAAO,CAAC3B,MAAM,GAAGG,IAAI;IAErB,IAAIqB,KAAK,CAACG,OAAO,CAACyL,IAAI,EAAE;MACtBC,MAAM,CAACC,OAAO,CAACC,GAAG,CAAC,uBAAuB,GAAGC,IAAI,CAACC,SAAS,CAAC9L,OAAO,CAAC,GAAG,IAAI,CAAC;IAC9E;IAEAH,KAAK,CAACA,KAAK,GAAG,IAAI,IAAI,CAACY,OAAO,CAAC6N,KAAK,CAACtO,OAAO,CAAC;EAC/C,CAAC;EAED,IAAIuO,MAAM,GAAG,CAAC,CAAC;EACf,IAAIrK,SAAS,GAAG,EAAE;;EAElB;EACA,IAAIsK,gBAAgB,GAAG;IACrBC,SAAS,EAAE,CAAC,CAAC;IACbC,QAAQ,EAAE,+EAA+E;IACzFC,SAAS,EAAE,CAAC;IACZ1O,MAAM,EAAE;MACN2O,SAAS,EAAE;QACTzK,QAAQ,EAAE,EAAE;QACZ0E,KAAK,EAAE;MACT,CAAC;MACDgG,SAAS,EAAE,QAAQ;MACnB7J,QAAQ,EAAE;IACZ,CAAC;IACD8J,SAAS,EAAE,UAAU;IACrBC,KAAK,EAAE;MACLH,SAAS,EAAE;QACT/F,KAAK,EAAE,MAAM;QACb1E,QAAQ,EAAE;MACZ,CAAC;MACD6K,cAAc,EAAE,CAAC,CAAC;MAClBC,SAAS,EAAE;QACTpG,KAAK,EAAE;MACT,CAAC;MACDqG,aAAa,EAAE,MAAM;MACrBC,UAAU,EAAE,CAAC;IACf,CAAC;IACDC,KAAK,EAAE;MACLR,SAAS,EAAE;QACT/F,KAAK,EAAE,MAAM;QACb1E,QAAQ,EAAE;MACZ,CAAC;MACD6K,cAAc,EAAE,CAAC,CAAC;MAClBE,aAAa,EAAE,MAAM;MACrBC,UAAU,EAAE,CAAC;IACf,CAAC;IACD3C,OAAO,EAAE;MACPoC,SAAS,EAAE;QACT/F,KAAK,EAAE,MAAM;QACb1E,QAAQ,EAAE;MACZ;IACF;EACF,CAAC;EAED,IAAIkL,YAAY,GAAG,UAAUrP,OAAO,EAAEC,MAAM,EAAEX,UAAU,EAAE;IACxD,IAAIW,MAAM,KAAKzD,SAAS,EAAE;MACxB,IAAIwI,QAAQ;MACZ,IAAI,CAAC/E,MAAM,EAAE;QACX+E,QAAQ,GAAG,MAAM;MACnB,CAAC,MAAM,IAAI/E,MAAM,KAAK,IAAI,EAAE;QAC1B+E,QAAQ,GAAG,OAAO;MACpB,CAAC,MAAM;QACLA,QAAQ,GAAG/E,MAAM;MACnB;MACAD,OAAO,CAACC,MAAM,CAAC+E,QAAQ,GAAGA,QAAQ;IACpC,CAAC,MAAM,IAAI1F,UAAU,EAAE;MACrBU,OAAO,CAACC,MAAM,CAAC+E,QAAQ,GAAG,MAAM;IAClC;EACF,CAAC;EAED,IAAIsK,UAAU,GAAG,UAAUtP,OAAO,EAAEE,KAAK,EAAE;IACzCF,OAAO,CAACE,KAAK,GAAGA,KAAK;IACrBF,OAAO,CAACgP,cAAc,GAAG;MAACnG,KAAK,EAAE,MAAM;MAAE1E,QAAQ,EAAE;IAAM,CAAC;EAC5D,CAAC;EAED,IAAIoL,QAAQ,GAAG,UAAUvP,OAAO,EAAEG,GAAG,EAAE;IACrCH,OAAO,CAACoP,KAAK,CAACD,UAAU,CAAChP,GAAG,GAAGA,GAAG;EACpC,CAAC;EAED,IAAIqP,QAAQ,GAAG,UAAUxP,OAAO,EAAEI,GAAG,EAAE;IACrCJ,OAAO,CAACoP,KAAK,CAACD,UAAU,CAAC/O,GAAG,GAAGA,GAAG;EACpC,CAAC;EAED,IAAIqP,WAAW,GAAG,UAAUzP,OAAO,EAAEG,GAAG,EAAE;IACxCH,OAAO,CAAC+O,KAAK,CAACI,UAAU,CAAChP,GAAG,GAAGA,GAAG;EACpC,CAAC;EAED,IAAIuP,WAAW,GAAG,UAAU1P,OAAO,EAAEI,GAAG,EAAE;IACxCJ,OAAO,CAAC+O,KAAK,CAACI,UAAU,CAAC/O,GAAG,GAAGA,GAAG;EACpC,CAAC;EAED,IAAIuP,YAAY,GAAG,UAAU3P,OAAO,EAAEK,OAAO,EAAE;IAC7CL,OAAO,CAAC4P,SAAS,GAAGvP,OAAO,GAAGA,OAAO,GAAG,KAAK;EAC/C,CAAC;EAED,IAAIwP,WAAW,GAAG,UAAU7P,OAAO,EAAEE,KAAK,EAAE;IAC1CF,OAAO,CAAC+O,KAAK,CAAC7O,KAAK,GAAGA,KAAK;IAC3BF,OAAO,CAAC+O,KAAK,CAACC,cAAc,CAACc,MAAM,GAAG,KAAK;EAC7C,CAAC;EAED,IAAIC,WAAW,GAAG,UAAU/P,OAAO,EAAEE,KAAK,EAAE;IAC1CF,OAAO,CAACoP,KAAK,CAAClP,KAAK,GAAGA,KAAK;IAC3BF,OAAO,CAACoP,KAAK,CAACJ,cAAc,CAACc,MAAM,GAAG,KAAK;EAC7C,CAAC;EAED,IAAIE,WAAW,GAAG5Q,aAAa,CAACoP,gBAAgB,EAAEa,YAAY,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,QAAQ,EAAEG,YAAY,EAAEE,WAAW,EAAEE,WAAW,CAAC;EAEvI,IAAIE,MAAM,GAAG,UAAUhK,QAAQ,EAAE;IAC/B,IAAIyF,MAAM,CAACwE,WAAW,EAAE;MACtBxE,MAAM,CAACwE,WAAW,CAAC,UAAU,EAAEjK,QAAQ,CAAC;IAC1C,CAAC,MAAM,IAAIyF,MAAM,CAACyE,gBAAgB,EAAE;MAClCzE,MAAM,CAACyE,gBAAgB,CAAC,QAAQ,EAAElK,QAAQ,EAAE,IAAI,CAAC;IACnD;IACAA,QAAQ,EAAE;EACZ,CAAC;EAED,IAAImK,eAAe,GAAG,SAAS1F,aAAa,CAACjK,OAAO,EAAE;IACpD,IAAI,CAACuI,IAAI,GAAG,QAAQ;IACpB,IAAI,CAACvI,OAAO,GAAGA,OAAO;EACxB,CAAC;EAED2P,eAAe,CAACtU,SAAS,CAAC6O,eAAe,GAAG,SAASA,eAAe,CAAE9K,KAAK,EAAE;IACzE,IAAIwQ,MAAM,GAAG,IAAI;IAEnB,IAAI,CAACC,aAAa,CAACzQ,KAAK,EAAE,YAAY;MACpC,IAAIE,YAAY,GAAG,CAAC,CAAC;MAErB,IAAIF,KAAK,CAACG,OAAO,CAACuJ,KAAK,KAAK,KAAK,EAAE;QACjCxJ,YAAY,CAAC+O,SAAS,GAAG,MAAM;MACjC;MAEA,IAAIjP,KAAK,CAACG,OAAO,CAACyJ,MAAM,KAAK,KAAK,EAAE;QAClC1J,YAAY,CAAC4O,SAAS,GAAG,CAAC;MAC5B;MAEA,IAAI3O,OAAO,GAAGgQ,WAAW,CAACnQ,KAAK,EAAEA,KAAK,CAACG,OAAO,EAAED,YAAY,CAAC;MAC7D,IAAIvB,IAAI,GAAG6R,MAAM,CAAC7I,eAAe,CAAC3H,KAAK,CAACrB,IAAI,EAAEqB,KAAK,CAACmI,KAAK,CAAC;MAE1DqI,MAAM,CAACzF,SAAS,CAAC/K,KAAK,EAAE,WAAW,EAAErB,IAAI,EAAEwB,OAAO,CAAC;IACrD,CAAC,CAAC;EACJ,CAAC;EAEDoQ,eAAe,CAACtU,SAAS,CAAC+O,cAAc,GAAG,SAASA,cAAc,CAAEhL,KAAK,EAAE;IACvE,IAAIwQ,MAAM,GAAG,IAAI;IAEnB,IAAI,CAACC,aAAa,CAACzQ,KAAK,EAAE,YAAY;MACpC,IAAIE,YAAY,GAAG;QACjB0O,SAAS,EAAE;UACT8B,GAAG,EAAE,KAAK;UACVC,MAAM,EAAE;QACV,CAAC;QACDvQ,MAAM,EAAE,CAAC;MACX,CAAC;MACD,IAAIJ,KAAK,CAACG,OAAO,CAACM,MAAM,EAAE;QACxBP,YAAY,CAACO,MAAM,GAAGT,KAAK,CAACG,OAAO,CAACM,MAAM;MAC5C;MACA,IAAIT,KAAK,CAACG,OAAO,CAAC8K,KAAK,EAAE;QACvB/K,YAAY,CAAC0Q,OAAO,GAAG,GAAG;MAC5B;MACA,IAAI,QAAQ,IAAI5Q,KAAK,CAACG,OAAO,EAAE;QAC7BqP,YAAY,CAACtP,YAAY,EAAEF,KAAK,CAACG,OAAO,CAACC,MAAM,CAAC;MAClD;MACA,IAAIJ,KAAK,CAACG,OAAO,CAACE,KAAK,EAAE;QACvBoP,UAAU,CAACvP,YAAY,EAAEF,KAAK,CAACG,OAAO,CAACE,KAAK,CAAC;MAC/C;MACA,IAAIF,OAAO,GAAGvD,KAAK,CAACA,KAAK,CAAC+R,gBAAgB,EAAEzO,YAAY,CAAC,EAAEF,KAAK,CAACG,OAAO,CAACS,OAAO,IAAI,CAAC,CAAC,CAAC;MAEvF,IAAIjC,IAAI,GAAG,IAAI6R,MAAM,CAAC5P,OAAO,CAACiQ,aAAa,CAACC,SAAS,EAAE;MACvDnS,IAAI,CAACoS,SAAS,CAAC,QAAQ,EAAE,EAAE,CAAC;MAC5BpS,IAAI,CAACoS,SAAS,CAAC,QAAQ,EAAE,OAAO,CAAC;MACjCpS,IAAI,CAACqS,OAAO,CAAChR,KAAK,CAACrB,IAAI,CAAC;MAExB6R,MAAM,CAACzF,SAAS,CAAC/K,KAAK,EAAE,UAAU,EAAErB,IAAI,EAAEwB,OAAO,CAAC;IACpD,CAAC,CAAC;EACJ,CAAC;EAEDoQ,eAAe,CAACtU,SAAS,CAACmP,iBAAiB,GAAG,SAASA,iBAAiB,CAAEpL,KAAK,EAAE;IAC7E,IAAIwQ,MAAM,GAAG,IAAI;IAEnB,IAAI,CAACC,aAAa,CAACzQ,KAAK,EAAE,YAAY;MACpC,IAAIG,OAAO,GAAGgQ,WAAW,CAACnQ,KAAK,EAAEA,KAAK,CAACG,OAAO,CAAC;MAC/C,IAAIxB,IAAI,GAAG6R,MAAM,CAAC7I,eAAe,CAAC3H,KAAK,CAACrB,IAAI,EAAEqB,KAAK,CAACmI,KAAK,CAAC;MAE1DqI,MAAM,CAACzF,SAAS,CAAC/K,KAAK,EAAE,aAAa,EAAErB,IAAI,EAAEwB,OAAO,CAAC;IACvD,CAAC,CAAC;EACJ,CAAC;EAEDoQ,eAAe,CAACtU,SAAS,CAACsP,cAAc,GAAG,SAASA,cAAc,CAAEvL,KAAK,EAAE;IACvE,IAAIwQ,MAAM,GAAG,IAAI;IAEnB,IAAI,CAACC,aAAa,CAACzQ,KAAK,EAAE,YAAY;MACpC,IAAIE,YAAY,GAAG;QACjBgP,KAAK,EAAE;UACLE,SAAS,EAAE;YACTpG,KAAK,EAAE;UACT;QACF;MACF,CAAC;MACD,IAAI7I,OAAO,GAAGZ,aAAa,CAACoP,gBAAgB,EAAEa,YAAY,EAAEC,UAAU,EAAEG,WAAW,EAAEC,WAAW,EAAEC,YAAY,EAAEE,WAAW,EAAEE,WAAW,CAAC,CAAClQ,KAAK,EAAEA,KAAK,CAACG,OAAO,EAAED,YAAY,CAAC;MAC7K,IAAIvB,IAAI,GAAG6R,MAAM,CAAC7I,eAAe,CAAC3H,KAAK,CAACrB,IAAI,EAAEqB,KAAK,CAACmI,KAAK,CAAC;MAE1DqI,MAAM,CAACzF,SAAS,CAAC/K,KAAK,EAAE,UAAU,EAAErB,IAAI,EAAEwB,OAAO,CAAC;IACpD,CAAC,CAAC;EACJ,CAAC;EAEDoQ,eAAe,CAACtU,SAAS,CAACqP,eAAe,GAAG,SAASA,eAAe,CAAEtL,KAAK,EAAE;IACzE,IAAIwQ,MAAM,GAAG,IAAI;IAEnB,IAAI,CAACC,aAAa,CAACzQ,KAAK,EAAE,YAAY;MACpC,IAAIE,YAAY,GAAG;QACjB6P,SAAS,EAAE,IAAI;QACfjB,SAAS,EAAE,CAAC;QACZmC,WAAW,EAAE;MACf,CAAC;MAED,IAAI9Q,OAAO,GAAGgQ,WAAW,CAACnQ,KAAK,EAAEA,KAAK,CAACG,OAAO,EAAED,YAAY,CAAC;MAC7D,IAAIvB,IAAI,GAAG6R,MAAM,CAAC7I,eAAe,CAAC3H,KAAK,CAACrB,IAAI,EAAEqB,KAAK,CAACmI,KAAK,CAAC;MAE1DqI,MAAM,CAACzF,SAAS,CAAC/K,KAAK,EAAE,WAAW,EAAErB,IAAI,EAAEwB,OAAO,CAAC;IACrD,CAAC,CAAC;EACJ,CAAC;EAEDoQ,eAAe,CAACtU,SAAS,CAACiV,cAAc,GAAG,SAASA,cAAc,CAAElR,KAAK,EAAE;IACvE,IAAIwQ,MAAM,GAAG,IAAI;IAEnB,IAAI,CAACC,aAAa,CAACzQ,KAAK,EAAE,UAAU,EAAE,YAAY;MAChD,IAAIE,YAAY,GAAG;QACjBE,MAAM,EAAE,MAAM;QACd+Q,SAAS,EAAE;UACT1Q,MAAM,EAAET,KAAK,CAACG,OAAO,CAACM,MAAM,IAAI,CAAC,SAAS,EAAE,SAAS;QACvD;MACF,CAAC;MACD,IAAIN,OAAO,GAAGvD,KAAK,CAACA,KAAK,CAAC+R,gBAAgB,EAAEzO,YAAY,CAAC,EAAEF,KAAK,CAACG,OAAO,CAACS,OAAO,IAAI,CAAC,CAAC,CAAC;MAEvF,IAAIjC,IAAI,GAAG,IAAI6R,MAAM,CAAC5P,OAAO,CAACiQ,aAAa,CAACC,SAAS,EAAE;MACvDnS,IAAI,CAACoS,SAAS,CAAC,QAAQ,EAAE,EAAE,CAAC;MAC5BpS,IAAI,CAACoS,SAAS,CAAC,QAAQ,EAAE/Q,KAAK,CAACG,OAAO,CAAC2G,KAAK,IAAI,OAAO,CAAC;MACxDnI,IAAI,CAACqS,OAAO,CAAChR,KAAK,CAACrB,IAAI,CAAC;MAExB6R,MAAM,CAACzF,SAAS,CAAC/K,KAAK,EAAE,UAAU,EAAErB,IAAI,EAAEwB,OAAO,CAAC;IACpD,CAAC,CAAC;EACJ,CAAC;EAEDoQ,eAAe,CAACtU,SAAS,CAACuP,kBAAkB,GAAG,SAASA,kBAAkB,CAAExL,KAAK,EAAE;IAC/E,IAAIwQ,MAAM,GAAG,IAAI;IAEnB,IAAI,CAACC,aAAa,CAACzQ,KAAK,EAAE,YAAY;MACpC,IAAIE,YAAY,GAAG,CAAC,CAAC;MACrB,IAAIC,OAAO,GAAGgQ,WAAW,CAACnQ,KAAK,EAAEA,KAAK,CAACG,OAAO,EAAED,YAAY,CAAC;MAE7D,IAAI1B,MAAM,GAAGwB,KAAK,CAACrB,IAAI;QAAEuJ,KAAK,GAAG,EAAE;QAAEzJ,CAAC;QAAEC,CAAC;QAAEC,IAAI;QAAEyC,CAAC;MAClD,KAAK3C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACI,MAAM,EAAEH,CAAC,EAAE,EAAE;QAClCD,MAAM,CAACC,CAAC,CAAC,CAAC0K,IAAI,GAAG3K,MAAM,CAACC,CAAC,CAAC,CAAC0K,IAAI,IAAI,OAAO;QAC1C/H,CAAC,GAAG5C,MAAM,CAACC,CAAC,CAAC,CAACE,IAAI;QAClB,KAAKD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0C,CAAC,CAACxC,MAAM,EAAEF,CAAC,EAAE,EAAE;UAC7B,IAAI0S,GAAG,GAAG,IAAI/I,KAAK,CAAC7J,MAAM,CAACI,MAAM,GAAG,CAAC,CAAC;UACtCwS,GAAG,CAAC,CAAC,CAAC,GAAGhQ,CAAC,CAAC1C,CAAC,CAAC,CAAC,CAAC,CAAC;UAChB0S,GAAG,CAAC3S,CAAC,GAAG,CAAC,CAAC,GAAG2C,CAAC,CAAC1C,CAAC,CAAC,CAAC,CAAC,CAAC;UACpBwJ,KAAK,CAAC5I,IAAI,CAAC8R,GAAG,CAAC;QACjB;MACF;MAEAzS,IAAI,GAAG,IAAI6R,MAAM,CAAC5P,OAAO,CAACiQ,aAAa,CAACC,SAAS,EAAE;MACnDnS,IAAI,CAACoS,SAAS,CAAC,QAAQ,EAAE,EAAE,CAAC;MAC5B,KAAKtS,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACI,MAAM,EAAEH,CAAC,EAAE,EAAE;QAClCE,IAAI,CAACoS,SAAS,CAAC,QAAQ,EAAEvS,MAAM,CAACC,CAAC,CAAC,CAAC0K,IAAI,CAAC;MAC1C;MACAxK,IAAI,CAACqS,OAAO,CAAC9I,KAAK,CAAC;MAEnBsI,MAAM,CAACzF,SAAS,CAAC/K,KAAK,EAAE,cAAc,EAAErB,IAAI,EAAEwB,OAAO,CAAC;IACxD,CAAC,CAAC;EACJ,CAAC;EAEDoQ,eAAe,CAACtU,SAAS,CAACoV,cAAc,GAAG,SAASA,cAAc,CAAErR,KAAK,EAAE;IACvE,IAAIwQ,MAAM,GAAG,IAAI;IAEnB,IAAI,CAACC,aAAa,CAACzQ,KAAK,EAAE,UAAU,EAAE,YAAY;MAChD,IAAIE,YAAY,GAAG;QACjBE,MAAM,EAAE;MACV,CAAC;MAED,IAAIJ,KAAK,CAACG,OAAO,CAACM,MAAM,EAAE;QACxBP,YAAY,CAACO,MAAM,GAAGT,KAAK,CAACG,OAAO,CAACM,MAAM;MAC5C;MACA,IAAIN,OAAO,GAAGvD,KAAK,CAACA,KAAK,CAAC+R,gBAAgB,EAAEzO,YAAY,CAAC,EAAEF,KAAK,CAACG,OAAO,CAACS,OAAO,IAAI,CAAC,CAAC,CAAC;MAEvF,IAAIjC,IAAI,GAAG,IAAI6R,MAAM,CAAC5P,OAAO,CAACiQ,aAAa,CAACC,SAAS,EAAE;MACvDnS,IAAI,CAACoS,SAAS,CAAC;QAAChT,IAAI,EAAE,QAAQ;QAAEyQ,EAAE,EAAE;MAAM,CAAC,CAAC;MAC5C7P,IAAI,CAACoS,SAAS,CAAC;QAAChT,IAAI,EAAE,MAAM;QAAEyQ,EAAE,EAAE;MAAO,CAAC,CAAC;MAC3C7P,IAAI,CAACoS,SAAS,CAAC;QAAChT,IAAI,EAAE,MAAM;QAAEyQ,EAAE,EAAE;MAAK,CAAC,CAAC;MACzC7P,IAAI,CAACqS,OAAO,CAAChR,KAAK,CAACrB,IAAI,CAAC;MAExBqB,KAAK,CAACiG,OAAO,CAACsG,KAAK,CAAC+E,UAAU,GAAG,QAAQ;MAEzCd,MAAM,CAACzF,SAAS,CAAC/K,KAAK,EAAE,UAAU,EAAErB,IAAI,EAAEwB,OAAO,CAAC;IACpD,CAAC,CAAC;EACJ,CAAC;EAEDoQ,eAAe,CAACtU,SAAS,CAAC0P,OAAO,GAAG,SAASA,OAAO,CAAE3L,KAAK,EAAE;IAC3D,IAAIA,KAAK,CAACA,KAAK,EAAE;MACfA,KAAK,CAACA,KAAK,CAACuR,UAAU,EAAE;IAC1B;EACF,CAAC;EAEDhB,eAAe,CAACtU,SAAS,CAAC8O,SAAS,GAAG,SAASA,SAAS,CAAE/K,KAAK,EAAEjC,IAAI,EAAEY,IAAI,EAAEwB,OAAO,EAAE;IACpF,IAAI,CAACwL,OAAO,CAAC3L,KAAK,CAAC;IAEnB,IAAIA,KAAK,CAACG,OAAO,CAACyL,IAAI,EAAE;MACtBC,MAAM,CAACC,OAAO,CAACC,GAAG,CAAC,gDAAgD,GAAGpN,IAAI,CAAC6S,MAAM,EAAE,GAAG,2CAA2C,GAAGzT,IAAI,GAAG,+BAA+B,GAAGiO,IAAI,CAACC,SAAS,CAAC9L,OAAO,CAAC,GAAG,IAAI,CAAC;IAC9M;IAEAH,KAAK,CAACA,KAAK,GAAG,IAAI,IAAI,CAACY,OAAO,CAACiQ,aAAa,CAAC9S,IAAI,CAAC,CAACiC,KAAK,CAACiG,OAAO,CAAC;IACjEmK,MAAM,CAAC,YAAY;MACjBpQ,KAAK,CAACA,KAAK,CAACyR,IAAI,CAAC9S,IAAI,EAAEwB,OAAO,CAAC;IACjC,CAAC,CAAC;EACJ,CAAC;EAEDoQ,eAAe,CAACtU,SAAS,CAACwU,aAAa,GAAG,SAASA,aAAa,CAAEzQ,KAAK,EAAE0R,IAAI,EAAEtL,QAAQ,EAAE;IACrF,IAAIoK,MAAM,GAAG,IAAI;IAEnB,IAAI,CAACpK,QAAQ,EAAE;MACbA,QAAQ,GAAGsL,IAAI;MACfA,IAAI,GAAG,WAAW;IACpB;IAEArN,SAAS,CAAC/E,IAAI,CAAC;MAACoS,IAAI,EAAEA,IAAI;MAAEtL,QAAQ,EAAEA;IAAQ,CAAC,CAAC;IAEhD,IAAIsI,MAAM,CAACgD,IAAI,CAAC,EAAE;MAChB,IAAI,CAACC,YAAY,EAAE;IACrB,CAAC,MAAM;MACLjD,MAAM,CAACgD,IAAI,CAAC,GAAG,IAAI;;MAEnB;MACA,IAAIE,WAAW,GAAG;QAChBC,QAAQ,EAAE,CAACH,IAAI,CAAC;QAChBtL,QAAQ,EAAE,YAAY;UAAEoK,MAAM,CAACmB,YAAY,EAAE;QAAE;MACjD,CAAC;MACD,IAAIG,MAAM,GAAG9R,KAAK,CAAC+R,QAAQ,EAAE;MAC7B,IAAID,MAAM,CAACE,QAAQ,EAAE;QACnBJ,WAAW,CAACI,QAAQ,GAAGF,MAAM,CAACE,QAAQ;MACxC;MACA,IAAIN,IAAI,KAAK,UAAU,IAAII,MAAM,CAACG,UAAU,EAAE;QAC5CL,WAAW,CAACK,UAAU,GAAGH,MAAM,CAACG,UAAU;MAC5C;MAEA,IAAI,CAACrR,OAAO,CAACsR,MAAM,CAACC,IAAI,CAAC,SAAS,EAAEP,WAAW,CAAC;IAClD;EACF,CAAC;EAEDrB,eAAe,CAACtU,SAAS,CAAC0V,YAAY,GAAG,SAASA,YAAY,GAAI;IAChE,IAAIS,EAAE,EAAEjW,IAAI;IACZ,KAAK,IAAIsC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4F,SAAS,CAACzF,MAAM,EAAEH,CAAC,EAAE,EAAE;MACzC2T,EAAE,GAAG/N,SAAS,CAAC5F,CAAC,CAAC;MACjBtC,IAAI,GAAG,IAAI,CAACyE,OAAO,CAACiQ,aAAa,KAAMuB,EAAE,CAACV,IAAI,KAAK,WAAW,IAAI,IAAI,CAAC9Q,OAAO,CAACiQ,aAAa,CAACwB,SAAS,IAAMD,EAAE,CAACV,IAAI,KAAK,UAAU,IAAI,IAAI,CAAC9Q,OAAO,CAACiQ,aAAa,CAACyB,QAAS,IAAKF,EAAE,CAACV,IAAI,KAAK,UAAU,IAAI,IAAI,CAAC9Q,OAAO,CAACiQ,aAAa,CAAC0B,QAAS,CAAC;MAC9O,IAAIpW,IAAI,EAAE;QACRiW,EAAE,CAAChM,QAAQ,EAAE;QACb/B,SAAS,CAACmO,MAAM,CAAC/T,CAAC,EAAE,CAAC,CAAC;QACtBA,CAAC,EAAE;MACL;IACF;EACF,CAAC;;EAED;EACA8R,eAAe,CAACtU,SAAS,CAAC0L,eAAe,GAAG,SAASA,eAAe,CAAEnJ,MAAM,EAAEiU,UAAU,EAAE;IACxF,IAAIhU,CAAC;MAAEC,CAAC;MAAEgI,CAAC;MAAEtF,CAAC;MAAE1E,GAAG;MAAEuL,IAAI,GAAG,EAAE;MAAEG,YAAY,GAAG,EAAE;IACjD,KAAK3J,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACI,MAAM,EAAEH,CAAC,EAAE,EAAE;MAClCiI,CAAC,GAAGlI,MAAM,CAACC,CAAC,CAAC;MACbD,MAAM,CAACC,CAAC,CAAC,CAAC0K,IAAI,GAAG3K,MAAM,CAACC,CAAC,CAAC,CAAC0K,IAAI,IAAI,OAAO;MAE1C,KAAKzK,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGgI,CAAC,CAAC/H,IAAI,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;QAClC0C,CAAC,GAAGsF,CAAC,CAAC/H,IAAI,CAACD,CAAC,CAAC;QACbhC,GAAG,GAAI+V,UAAU,KAAK,UAAU,GAAIrR,CAAC,CAAC,CAAC,CAAC,CAACJ,OAAO,EAAE,GAAGI,CAAC,CAAC,CAAC,CAAC;QACzD,IAAI,CAAC6G,IAAI,CAACvL,GAAG,CAAC,EAAE;UACduL,IAAI,CAACvL,GAAG,CAAC,GAAG,IAAI2L,KAAK,CAAC7J,MAAM,CAACI,MAAM,CAAC;UACpCwJ,YAAY,CAAC9I,IAAI,CAAC5C,GAAG,CAAC;QACxB;QACAuL,IAAI,CAACvL,GAAG,CAAC,CAAC+B,CAAC,CAAC,GAAGM,OAAO,CAACqC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC9B;IACF;IAEA,IAAI8G,KAAK,GAAG,EAAE;IACd,IAAI5K,GAAG,GAAG,IAAI;IACd,IAAImF,KAAK;IACT,KAAK/D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0J,YAAY,CAACxJ,MAAM,EAAEF,CAAC,EAAE,EAAE;MACxCD,CAAC,GAAG2J,YAAY,CAAC1J,CAAC,CAAC;MACnB,IAAI+T,UAAU,KAAK,UAAU,EAAE;QAC7BhQ,KAAK,GAAG,IAAIpE,IAAI,CAACU,OAAO,CAACN,CAAC,CAAC,CAAC;QAC5BnB,GAAG,GAAGA,GAAG,IAAImE,KAAK,CAACgB,KAAK,CAAC;MAC3B,CAAC,MAAM,IAAIgQ,UAAU,KAAK,QAAQ,EAAE;QAClChQ,KAAK,GAAG1D,OAAO,CAACN,CAAC,CAAC;MACpB,CAAC,MAAM;QACLgE,KAAK,GAAGhE,CAAC;MACX;MACAyJ,KAAK,CAAC5I,IAAI,CAAC,CAACmD,KAAK,CAAC,CAACiQ,MAAM,CAACzK,IAAI,CAACxJ,CAAC,CAAC,CAAC,CAAC;IACrC;IACA,IAAIgU,UAAU,KAAK,UAAU,EAAE;MAC7BvK,KAAK,CAACK,IAAI,CAAC1H,UAAU,CAAC;IACxB,CAAC,MAAM,IAAI4R,UAAU,KAAK,QAAQ,EAAE;MAClCvK,KAAK,CAACK,IAAI,CAACtH,kBAAkB,CAAC;MAE9B,KAAKxC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyJ,KAAK,CAACtJ,MAAM,EAAEH,CAAC,EAAE,EAAE;QACjCyJ,KAAK,CAACzJ,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGI,KAAK,CAACqJ,KAAK,CAACzJ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAClC;MAEAgU,UAAU,GAAG,QAAQ;IACvB;;IAEA;IACA,IAAI9T,IAAI,GAAG,IAAI,IAAI,CAACiC,OAAO,CAACiQ,aAAa,CAACC,SAAS,EAAE;IACrD2B,UAAU,GAAGA,UAAU,KAAK,UAAU,IAAInV,GAAG,GAAG,MAAM,GAAGmV,UAAU;IACnE9T,IAAI,CAACoS,SAAS,CAAC0B,UAAU,EAAE,EAAE,CAAC;IAC9B,KAAKhU,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACI,MAAM,EAAEH,CAAC,EAAE,EAAE;MAClCE,IAAI,CAACoS,SAAS,CAAC,QAAQ,EAAEvS,MAAM,CAACC,CAAC,CAAC,CAAC0K,IAAI,CAAC;IAC1C;IACAxK,IAAI,CAACqS,OAAO,CAAC9I,KAAK,CAAC;IAEnB,OAAOvJ,IAAI;EACb,CAAC;EAED,IAAIgU,eAAe,GAAG,EAAE;IAAEC,eAAe,GAAG,CAAC;IAAEC,WAAW,GAAG,CAAC;EAE9D,SAASC,WAAW,CAACC,GAAG,EAAEC,OAAO,EAAEC,KAAK,EAAE;IACxCN,eAAe,CAACrT,IAAI,CAAC,CAACyT,GAAG,EAAEC,OAAO,EAAEC,KAAK,CAAC,CAAC;IAC3CC,OAAO,EAAE;EACX;EAEA,SAASA,OAAO,GAAG;IACjB,IAAIN,eAAe,GAAGC,WAAW,EAAE;MACjC,IAAIM,OAAO,GAAGR,eAAe,CAACS,KAAK,EAAE;MACrC,IAAID,OAAO,EAAE;QACXP,eAAe,EAAE;QACjBS,OAAO,CAACF,OAAO,CAAC,CAAC,CAAC,EAAEA,OAAO,CAAC,CAAC,CAAC,EAAEA,OAAO,CAAC,CAAC,CAAC,CAAC;QAC3CD,OAAO,EAAE;MACX;IACF;EACF;EAEA,SAASI,eAAe,GAAG;IACzBV,eAAe,EAAE;IACjBM,OAAO,EAAE;EACX;EAEA,SAASG,OAAO,CAACN,GAAG,EAAEC,OAAO,EAAEC,KAAK,EAAE;IACpCM,QAAQ,CAACR,GAAG,EAAEC,OAAO,EAAE,UAAUQ,KAAK,EAAEC,UAAU,EAAEC,WAAW,EAAE;MAC/D,IAAIC,OAAO,GAAI,OAAOD,WAAW,KAAK,QAAQ,GAAIA,WAAW,GAAGA,WAAW,CAACC,OAAO;MACnFV,KAAK,CAACU,OAAO,CAAC;IAChB,CAAC,CAAC;EACJ;EAEA,SAASJ,QAAQ,CAACR,GAAG,EAAEC,OAAO,EAAEC,KAAK,EAAE;IACrC,IAAIW,CAAC,GAAG/H,MAAM,CAACgI,MAAM,IAAIhI,MAAM,CAACiI,KAAK,IAAIjI,MAAM,CAAC+H,CAAC;IAEjD,IAAIA,CAAC,IAAIA,CAAC,CAACG,IAAI,EAAE;MACfH,CAAC,CAACG,IAAI,CAAC;QACLC,QAAQ,EAAE,MAAM;QAChBjB,GAAG,EAAEA,GAAG;QACRC,OAAO,EAAEA,OAAO;QAChBC,KAAK,EAAEA,KAAK;QACZgB,QAAQ,EAAEX;MACZ,CAAC,CAAC;IACJ,CAAC,MAAM;MACL,IAAIY,GAAG,GAAG,IAAIC,cAAc,EAAE;MAC9BD,GAAG,CAACE,IAAI,CAAC,KAAK,EAAErB,GAAG,EAAE,IAAI,CAAC;MAC1BmB,GAAG,CAACG,gBAAgB,CAAC,cAAc,EAAE,kBAAkB,CAAC;MACxDH,GAAG,CAACI,MAAM,GAAG,YAAY;QACvBhB,eAAe,EAAE;QACjB,IAAIY,GAAG,CAACK,MAAM,KAAK,GAAG,EAAE;UACtBvB,OAAO,CAAChH,IAAI,CAACwI,KAAK,CAACN,GAAG,CAACO,YAAY,CAAC,EAAEP,GAAG,CAACQ,UAAU,EAAER,GAAG,CAAC;QAC5D,CAAC,MAAM;UACLjB,KAAK,CAACiB,GAAG,EAAE,OAAO,EAAEA,GAAG,CAACQ,UAAU,CAAC;QACrC;MACF,CAAC;MACDR,GAAG,CAACS,IAAI,EAAE;IACZ;EACF;EAEA,IAAI7C,MAAM,GAAG,CAAC,CAAC;EACf,IAAI8C,QAAQ,GAAG,EAAE;;EAEjB;;EAEA,SAASC,OAAO,CAAC5O,OAAO,EAAEb,IAAI,EAAE;IAC9B,IAAI0P,QAAQ,CAACC,IAAI,CAACC,SAAS,EAAE;MAC3B/O,OAAO,CAAC+O,SAAS,GAAG5P,IAAI;IAC1B,CAAC,MAAM;MACLa,OAAO,CAACgP,WAAW,GAAG7P,IAAI;IAC5B;EACF;;EAEA;EACA,SAAS8P,UAAU,CAACjP,OAAO,EAAE0N,OAAO,EAAEwB,QAAQ,EAAE;IAC9C,IAAI,CAACA,QAAQ,EAAE;MACbxB,OAAO,GAAG,uBAAuB,GAAGA,OAAO;IAC7C;IACAkB,OAAO,CAAC5O,OAAO,EAAE0N,OAAO,CAAC;IACzB1N,OAAO,CAACsG,KAAK,CAACvD,KAAK,GAAG,SAAS;EACjC;EAEA,SAASoM,YAAY,CAACpV,KAAK,EAAE;IAC3B,IAAI;MACFA,KAAK,CAACqV,QAAQ,EAAE;IAClB,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZJ,UAAU,CAAClV,KAAK,CAACiG,OAAO,EAAEqP,GAAG,CAAC3B,OAAO,CAAC;MACtC,MAAM2B,GAAG;IACX;EACF;EAEA,SAASC,eAAe,CAACvV,KAAK,EAAEwV,UAAU,EAAE;IAC1C,IAAI,OAAOA,UAAU,KAAK,QAAQ,EAAE;MAClC1C,WAAW,CAAC0C,UAAU,EAAE,UAAU7W,IAAI,EAAE;QACtCqB,KAAK,CAACyV,OAAO,GAAG9W,IAAI;QACpByW,YAAY,CAACpV,KAAK,CAAC;MACrB,CAAC,EAAE,UAAU2T,OAAO,EAAE;QACpBuB,UAAU,CAAClV,KAAK,CAACiG,OAAO,EAAE0N,OAAO,CAAC;MACpC,CAAC,CAAC;IACJ,CAAC,MAAM,IAAI,OAAO6B,UAAU,KAAK,UAAU,EAAE;MAC3C,IAAI;QACFA,UAAU,CAAC,UAAU7W,IAAI,EAAE;UACzBqB,KAAK,CAACyV,OAAO,GAAG9W,IAAI;UACpByW,YAAY,CAACpV,KAAK,CAAC;QACrB,CAAC,EAAE,UAAU2T,OAAO,EAAE;UACpBuB,UAAU,CAAClV,KAAK,CAACiG,OAAO,EAAE0N,OAAO,EAAE,IAAI,CAAC;QAC1C,CAAC,CAAC;MACJ,CAAC,CAAC,OAAO2B,GAAG,EAAE;QACZJ,UAAU,CAAClV,KAAK,CAACiG,OAAO,EAAEqP,GAAG,EAAE,IAAI,CAAC;MACtC;IACF,CAAC,MAAM;MACLtV,KAAK,CAACyV,OAAO,GAAGD,UAAU;MAC1BJ,YAAY,CAACpV,KAAK,CAAC;IACrB;EACF;EAEA,SAAS0V,iBAAiB,CAAC1V,KAAK,EAAE;IAChC,IAAIiG,OAAO,GAAGjG,KAAK,CAACiG,OAAO;IAC3B,IAAI0P,IAAI,GAAGb,QAAQ,CAACc,aAAa,CAAC,GAAG,CAAC;IAEtC,IAAIC,QAAQ,GAAG7V,KAAK,CAACG,OAAO,CAAC0V,QAAQ;IACrC,IAAIA,QAAQ,KAAK,IAAI,EAAE;MACrBA,QAAQ,GAAG,CAAC,CAAC;IACf,CAAC,MAAM,IAAI,OAAOA,QAAQ,KAAK,QAAQ,EAAE;MACvCA,QAAQ,GAAG;QAACC,QAAQ,EAAED;MAAQ,CAAC;IACjC;IACAF,IAAI,CAACE,QAAQ,GAAGA,QAAQ,CAACC,QAAQ,IAAI,WAAW,CAAC,CAAC;;IAElDH,IAAI,CAACpJ,KAAK,CAACpH,QAAQ,GAAG,UAAU;IAChCwQ,IAAI,CAACpJ,KAAK,CAACmE,GAAG,GAAG,MAAM;IACvBiF,IAAI,CAACpJ,KAAK,CAACwJ,KAAK,GAAG,MAAM;IACzBJ,IAAI,CAACpJ,KAAK,CAACyJ,MAAM,GAAG,IAAI;IACxBL,IAAI,CAACpJ,KAAK,CAAC+E,UAAU,GAAG,MAAM;IAC9BqE,IAAI,CAACnZ,MAAM,GAAG,QAAQ,CAAC,CAAC;IACxB,IAAIyZ,KAAK,GAAGnB,QAAQ,CAACc,aAAa,CAAC,KAAK,CAAC;IACzCK,KAAK,CAACC,GAAG,GAAG,UAAU;IACtBD,KAAK,CAAC1J,KAAK,CAAC4J,MAAM,GAAG,MAAM;IAC3B;IACA;IACAF,KAAK,CAACG,GAAG,GAAG,o4BAAo4B;IACh5BT,IAAI,CAACU,WAAW,CAACJ,KAAK,CAAC;IACvBhQ,OAAO,CAACsG,KAAK,CAACpH,QAAQ,GAAG,UAAU;IAEnCnF,KAAK,CAACsW,kBAAkB,GAAG,IAAI;;IAE/B;IACAtW,KAAK,CAACuW,YAAY,GAAGC,QAAQ,CAACvQ,OAAO,EAAE,WAAW,EAAE,UAASwQ,CAAC,EAAE;MAC9D,IAAIC,OAAO,GAAGD,CAAC,CAACE,aAAa;MAC7B;MACA,IAAI,CAAC,CAACD,OAAO,IAAKA,OAAO,KAAK,IAAI,IAAI,CAACE,OAAO,CAAC,IAAI,EAAEF,OAAO,CAAE,KAAK1W,KAAK,CAACG,OAAO,CAAC0V,QAAQ,EAAE;QACzFF,IAAI,CAACkB,IAAI,GAAG7W,KAAK,CAAC8W,OAAO,CAACjB,QAAQ,CAAC;QACnC5P,OAAO,CAACoQ,WAAW,CAACV,IAAI,CAAC;MAC3B;IACF,CAAC,CAAC;;IAEF;IACA3V,KAAK,CAAC+W,YAAY,GAAGP,QAAQ,CAACvQ,OAAO,EAAE,UAAU,EAAE,UAASwQ,CAAC,EAAE;MAC7D,IAAIC,OAAO,GAAGD,CAAC,CAACE,aAAa;MAC7B,IAAI,CAACD,OAAO,IAAKA,OAAO,KAAK,IAAI,IAAI,CAACE,OAAO,CAAC,IAAI,EAAEF,OAAO,CAAE,EAAE;QAC7D,IAAIf,IAAI,CAACqB,UAAU,EAAE;UACnBrB,IAAI,CAACqB,UAAU,CAACC,WAAW,CAACtB,IAAI,CAAC;QACnC;MACF;IACF,CAAC,CAAC;EACJ;;EAEA;EACA,SAASa,QAAQ,CAACU,IAAI,EAAEC,KAAK,EAAEC,EAAE,EAAE;IACjC,IAAIF,IAAI,CAAC5G,gBAAgB,EAAE;MACzB4G,IAAI,CAAC5G,gBAAgB,CAAC6G,KAAK,EAAEC,EAAE,EAAE,KAAK,CAAC;MACvC,OAAOA,EAAE;IACX,CAAC,MAAM;MACL,IAAIC,GAAG,GAAG,YAAW;QACnB;QACA,OAAOD,EAAE,CAACjb,IAAI,CAAC+a,IAAI,EAAErL,MAAM,CAACsL,KAAK,CAAC;MACpC,CAAC;MACDD,IAAI,CAAC7G,WAAW,CAAC,IAAI,GAAG8G,KAAK,EAAEE,GAAG,CAAC;MACnC,OAAOA,GAAG;IACZ;EACF;EAEA,SAASC,WAAW,CAACJ,IAAI,EAAEC,KAAK,EAAEC,EAAE,EAAE;IACpC,IAAIF,IAAI,CAACK,mBAAmB,EAAE;MAC5BL,IAAI,CAACK,mBAAmB,CAACJ,KAAK,EAAEC,EAAE,EAAE,KAAK,CAAC;IAC5C,CAAC,MAAM;MACLF,IAAI,CAACM,WAAW,CAAC,IAAI,GAAGL,KAAK,EAAEC,EAAE,CAAC;IACpC;EACF;;EAEA;EACA,SAASR,OAAO,CAACa,CAAC,EAAEC,CAAC,EAAE;IACrB,IAAID,CAAC,KAAKC,CAAC,EAAE;MAAE,OAAO,KAAK;IAAE;IAC7B,OAAOA,CAAC,IAAIA,CAAC,KAAKD,CAAC,EAAE;MAAEC,CAAC,GAAGA,CAAC,CAACV,UAAU;IAAE;IACzC,OAAOU,CAAC,KAAKD,CAAC;EAChB;EAEA,SAASE,cAAc,CAAC/W,OAAO,EAAE;IAC/B,IAAIA,OAAO,EAAE;MACX,IAAIA,OAAO,CAACgX,OAAO,KAAK,YAAY,EAAE;QACpC,OAAO5J,eAAe;MACxB,CAAC,MAAM,IAAIpN,OAAO,CAACsR,MAAM,EAAE;QACzB,OAAO3B,eAAe;MACxB,CAAC,MAAM,IAAInU,UAAU,CAACwE,OAAO,CAAC,EAAE;QAC9B,OAAOiK,aAAa;MACtB;IACF;IACA,MAAM,IAAI3H,KAAK,CAAC,iBAAiB,CAAC;EACpC;EAEA,SAAS2U,UAAU,CAACjX,OAAO,EAAE;IAC3B,IAAIkX,WAAW,GAAGH,cAAc,CAAC/W,OAAO,CAAC;IACzC,IAAImX,OAAO,GAAG,IAAID,WAAW,CAAClX,OAAO,CAAC;IAEtC,IAAIgU,QAAQ,CAACtM,OAAO,CAACyP,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE;MACpCnD,QAAQ,CAACtV,IAAI,CAACyY,OAAO,CAAC;IACxB;EACF;EAEA,SAASC,YAAY,GAAG;IACtB,IAAI,OAAO,IAAInM,MAAM,EAAE;MACrBgM,UAAU,CAAChM,MAAM,CAAC4C,KAAK,CAAC;IAC1B;IAEA,IAAI,YAAY,IAAI5C,MAAM,EAAE;MAC1BgM,UAAU,CAAChM,MAAM,CAACoM,UAAU,CAAC;IAC/B;IAEA,IAAIpM,MAAM,CAACqM,MAAM,IAAIrM,MAAM,CAACqM,MAAM,CAAChG,MAAM,EAAE;MACzC2F,UAAU,CAAChM,MAAM,CAACqM,MAAM,CAAC;IAC3B;EACF;EAEA,SAASC,SAAS,CAACxZ,IAAI,EAAE4H,SAAS,EAAE;IAClC,IAAIA,SAAS,KAAK,UAAU,IAAIA,SAAS,KAAK,UAAU,IAAIA,SAAS,KAAK,UAAU,EAAE;MACpF,OAAO5H,IAAI,CAACC,MAAM,KAAK,CAAC;IAC1B,CAAC,MAAM;MACL,KAAK,IAAIH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGE,IAAI,CAACC,MAAM,EAAEH,CAAC,EAAE,EAAE;QACpC,IAAIE,IAAI,CAACF,CAAC,CAAC,CAACE,IAAI,CAACC,MAAM,GAAG,CAAC,EAAE;UAC3B,OAAO,KAAK;QACd;MACF;MACA,OAAO,IAAI;IACb;EACF;EAEA,SAASwZ,WAAW,CAAC7R,SAAS,EAAEvG,KAAK,EAAE;IACrC,IAAIA,KAAK,CAACG,OAAO,CAACkY,QAAQ,IAAIrY,KAAK,CAACG,OAAO,CAACkY,QAAQ,CAACC,KAAK,IAAIH,SAAS,CAACnY,KAAK,CAACrB,IAAI,EAAE4H,SAAS,CAAC,EAAE;MAC9FsO,OAAO,CAAC7U,KAAK,CAACiG,OAAO,EAAEjG,KAAK,CAACG,OAAO,CAACkY,QAAQ,CAACC,KAAK,CAAC;IACtD,CAAC,MAAM;MACLC,WAAW,CAAChS,SAAS,EAAEvG,KAAK,CAAC;MAC7B,IAAIA,KAAK,CAACG,OAAO,CAAC0V,QAAQ,IAAI,CAAC7V,KAAK,CAACsW,kBAAkB,IAAItW,KAAK,CAAC+X,OAAO,KAAK,SAAS,EAAE;QACtFrC,iBAAiB,CAAC1V,KAAK,CAAC;MAC1B;IACF;EACF;;EAEA;EACA;EACA,SAASuY,WAAW,CAAChS,SAAS,EAAEvG,KAAK,EAAE;IACrC,IAAIvB,CAAC,EAAEsZ,OAAO,EAAES,MAAM,EAAEC,WAAW;IACnCD,MAAM,GAAG,QAAQ,GAAGjS,SAAS;IAC7BkS,WAAW,GAAGzY,KAAK,CAACG,OAAO,CAAC4X,OAAO;IAEnCC,YAAY,EAAE;IAEd,KAAKvZ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGmW,QAAQ,CAAChW,MAAM,EAAEH,CAAC,EAAE,EAAE;MACpCsZ,OAAO,GAAGnD,QAAQ,CAACnW,CAAC,CAAC;MACrB,IAAI,CAAC,CAACga,WAAW,IAAIA,WAAW,KAAKV,OAAO,CAAC5O,IAAI,KAAK/M,UAAU,CAAC2b,OAAO,CAACS,MAAM,CAAC,CAAC,EAAE;QACjFxY,KAAK,CAAC+X,OAAO,GAAGA,OAAO,CAAC5O,IAAI;QAC5BnJ,KAAK,CAAC0Y,eAAe,GAAGX,OAAO;QAC/B,OAAOA,OAAO,CAACS,MAAM,CAAC,CAACxY,KAAK,CAAC;MAC/B;IACF;IAEA,IAAI4U,QAAQ,CAAChW,MAAM,GAAG,CAAC,EAAE;MACvB,MAAM,IAAIsE,KAAK,CAAC,gCAAgC,GAAGqD,SAAS,CAAC;IAC/D,CAAC,MAAM;MACL,MAAM,IAAIrD,KAAK,CAAC,yEAAyE,CAAC;IAC5F;EACF;;EAEA;;EAEA,IAAIyV,cAAc,GAAG,UAAUjc,GAAG,EAAEkc,OAAO,EAAE;IAC3C,IAAIA,OAAO,KAAK,QAAQ,EAAE;MACxBlc,GAAG,GAAGqC,OAAO,CAACrC,GAAG,CAAC;IACpB,CAAC,MAAM,IAAIkc,OAAO,KAAK,UAAU,EAAE;MACjClc,GAAG,GAAGsC,MAAM,CAACtC,GAAG,CAAC;IACnB,CAAC,MAAM;MACLA,GAAG,GAAGmC,KAAK,CAACnC,GAAG,CAAC;IAClB;IACA,OAAOA,GAAG;EACZ,CAAC;EAED,IAAImc,gBAAgB,GAAG,UAAUla,IAAI,EAAEia,OAAO,EAAE;IAC9C,IAAI7P,CAAC,GAAG,EAAE;MAAErM,GAAG;MAAEgC,CAAC;IAClB,KAAKA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,IAAI,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;MAChC,IAAIka,OAAO,KAAK,QAAQ,EAAE;QACxB7P,CAAC,CAACzJ,IAAI,CAAC,CAACP,OAAO,CAACJ,IAAI,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEK,OAAO,CAACJ,IAAI,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEK,OAAO,CAACJ,IAAI,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACzE,CAAC,MAAM;QACLhC,GAAG,GAAGic,cAAc,CAACha,IAAI,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEka,OAAO,CAAC;QACzC7P,CAAC,CAACzJ,IAAI,CAAC,CAAC5C,GAAG,EAAEqC,OAAO,CAACJ,IAAI,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACpC;IACF;IACA,IAAIka,OAAO,KAAK,UAAU,EAAE;MAC1B7P,CAAC,CAACR,IAAI,CAAC1H,UAAU,CAAC;IACpB,CAAC,MAAM,IAAI+X,OAAO,KAAK,QAAQ,EAAE;MAC/B7P,CAAC,CAACR,IAAI,CAACtH,kBAAkB,CAAC;IAC5B;IACA,OAAO8H,CAAC;EACV,CAAC;EAED,SAAS+P,WAAW,CAACta,MAAM,EAAEua,UAAU,EAAE5Y,OAAO,EAAE;IAChD,IAAIgY,SAAS,CAAC3Z,MAAM,CAAC,EAAE;MACrB,IAAI,CAAC2B,OAAO,CAAC4J,IAAI,IAAI5J,OAAO,CAAC6J,IAAI,MAAM,CAAC7J,OAAO,CAAC4J,IAAI,IAAI7H,MAAM,CAAC/B,OAAO,CAAC4J,IAAI,CAAC,CAAC,KAAK,CAAC5J,OAAO,CAAC6J,IAAI,IAAI9H,MAAM,CAAC/B,OAAO,CAAC6J,IAAI,CAAC,CAAC,EAAE;QACxH,OAAO,UAAU;MACnB,CAAC,MAAM;QACL,OAAO,QAAQ;MACjB;IACF,CAAC,MAAM,IAAIgP,uBAAuB,CAACxa,MAAM,EAAE6D,QAAQ,CAAC,EAAE;MACpD,OAAO,QAAQ;IACjB,CAAC,MAAM,IAAI,CAAC0W,UAAU,IAAIC,uBAAuB,CAACxa,MAAM,EAAE0D,MAAM,CAAC,EAAE;MACjE,OAAO,UAAU;IACnB,CAAC,MAAM;MACL,OAAO,QAAQ;IACjB;EACF;EAEA,SAAS8W,uBAAuB,CAACxa,MAAM,EAAEya,IAAI,EAAE;IAC7C,IAAIxa,CAAC,EAAEC,CAAC,EAAEC,IAAI;IACd,KAAKF,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACI,MAAM,EAAEH,CAAC,EAAE,EAAE;MAClCE,IAAI,GAAGQ,KAAK,CAACX,MAAM,CAACC,CAAC,CAAC,CAACE,IAAI,CAAC;MAC5B,KAAKD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,IAAI,CAACC,MAAM,EAAEF,CAAC,EAAE,EAAE;QAChC,IAAI,CAACua,IAAI,CAACta,IAAI,CAACD,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;UACrB,OAAO,KAAK;QACd;MACF;IACF;IACA,OAAO,IAAI;EACb;;EAEA;EACA;EACA,SAASwa,UAAU,CAAC1a,MAAM,EAAE;IAC1B,IAAI6P,SAAS,GAAG,EAAE;MAAE5P,CAAC;MAAEC,CAAC;IACxB,KAAKD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACI,MAAM,EAAEH,CAAC,EAAE,EAAE;MAClC,IAAI0a,IAAI,GAAG,CAAC,CAAC;MACb,KAAKza,CAAC,IAAIF,MAAM,CAACC,CAAC,CAAC,EAAE;QACnB,IAAID,MAAM,CAACC,CAAC,CAAC,CAACY,cAAc,CAACX,CAAC,CAAC,EAAE;UAC/Bya,IAAI,CAACza,CAAC,CAAC,GAAGF,MAAM,CAACC,CAAC,CAAC,CAACC,CAAC,CAAC;QACxB;MACF;MACA2P,SAAS,CAAC/O,IAAI,CAAC6Z,IAAI,CAAC;IACtB;IACA,OAAO9K,SAAS;EAClB;EAEA,SAAS+K,aAAa,CAACpZ,KAAK,EAAE4Y,OAAO,EAAEG,UAAU,EAAE;IACjD,IAAIta,CAAC;IAEL,IAAIwB,IAAI,GAAGD,KAAK,CAACG,OAAO;IACxB,IAAI3B,MAAM,GAAGwB,KAAK,CAACyV,OAAO;;IAE1B;IACA,IAAI,CAAC3Z,OAAO,CAAC0C,MAAM,CAAC,IAAI,OAAOA,MAAM,CAAC,CAAC,CAAC,KAAK,QAAQ,IAAI1C,OAAO,CAAC0C,MAAM,CAAC,CAAC,CAAC,CAAC,EAAE;MAC3EA,MAAM,GAAG,CAAC;QAAC2K,IAAI,EAAElJ,IAAI,CAAC6G,KAAK;QAAEnI,IAAI,EAAEH;MAAM,CAAC,CAAC;MAC3CwB,KAAK,CAACP,UAAU,GAAG,IAAI;IACzB,CAAC,MAAM;MACLO,KAAK,CAACP,UAAU,GAAG,KAAK;IAC1B;;IAEA;IACA;IACAjB,MAAM,GAAG0a,UAAU,CAAC1a,MAAM,CAAC;IAC3B,KAAKC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACI,MAAM,EAAEH,CAAC,EAAE,EAAE;MAClCD,MAAM,CAACC,CAAC,CAAC,CAACE,IAAI,GAAGQ,KAAK,CAACX,MAAM,CAACC,CAAC,CAAC,CAACE,IAAI,CAAC;IACxC;IAEAqB,KAAK,CAACmI,KAAK,GAAGyQ,OAAO,GAAGA,OAAO,GAAI3Y,IAAI,CAACoZ,QAAQ,GAAG,QAAQ,GAAGP,WAAW,CAACta,MAAM,EAAEua,UAAU,EAAE9Y,IAAI,CAAE;;IAEpG;IACA,KAAKxB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGD,MAAM,CAACI,MAAM,EAAEH,CAAC,EAAE,EAAE;MAClCD,MAAM,CAACC,CAAC,CAAC,CAACE,IAAI,GAAGka,gBAAgB,CAACra,MAAM,CAACC,CAAC,CAAC,CAACE,IAAI,EAAEqB,KAAK,CAACmI,KAAK,CAAC;IAChE;IAEA,OAAO3J,MAAM;EACf;EAEA,SAAS8a,aAAa,CAACtZ,KAAK,EAAE;IAC5B,IAAIuZ,WAAW,GAAGpa,KAAK,CAACa,KAAK,CAACyV,OAAO,CAAC;MAAEhX,CAAC;IACzC,KAAKA,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8a,WAAW,CAAC3a,MAAM,EAAEH,CAAC,EAAE,EAAE;MACvC8a,WAAW,CAAC9a,CAAC,CAAC,GAAG,CAACI,KAAK,CAAC0a,WAAW,CAAC9a,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAEM,OAAO,CAACwa,WAAW,CAAC9a,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzE;IACA,OAAO8a,WAAW;EACpB;;EAEA;;EAEA,IAAI9K,KAAK,GAAG,SAASA,KAAK,CAACxI,OAAO,EAAEuP,UAAU,EAAErV,OAAO,EAAE;IACvD,IAAIqZ,SAAS;IACb,IAAI,OAAOvT,OAAO,KAAK,QAAQ,EAAE;MAC/BuT,SAAS,GAAGvT,OAAO;MACnBA,OAAO,GAAG6O,QAAQ,CAAC2E,cAAc,CAACxT,OAAO,CAAC;MAC1C,IAAI,CAACA,OAAO,EAAE;QACZ,MAAM,IAAI/C,KAAK,CAAC,qBAAqB,GAAGsW,SAAS,CAAC;MACpD;IACF;IACA,IAAI,CAACvT,OAAO,GAAGA,OAAO;IACtB,IAAI,CAAC9F,OAAO,GAAGvD,KAAK,CAACf,SAAS,CAACsE,OAAO,EAAEA,OAAO,IAAI,CAAC,CAAC,CAAC;IACtD,IAAI,CAACqV,UAAU,GAAGA,UAAU;IAE5B3Z,SAAS,CAACqW,MAAM,CAACjM,OAAO,CAACuI,EAAE,CAAC,GAAG,IAAI;IAEnC+G,eAAe,CAAC,IAAI,EAAEC,UAAU,CAAC;IAEjC,IAAI,IAAI,CAACrV,OAAO,CAACuZ,OAAO,EAAE;MACxB,IAAI,CAACC,YAAY,EAAE;IACrB;EACF,CAAC;EAEDlL,KAAK,CAACxS,SAAS,CAAC2d,UAAU,GAAG,SAASA,UAAU,GAAI;IAClD,OAAO,IAAI,CAAC3T,OAAO;EACrB,CAAC;EAEDwI,KAAK,CAACxS,SAAS,CAAC4d,aAAa,GAAG,SAASA,aAAa,GAAI;IACxD,OAAO,IAAI,CAACrE,UAAU;EACxB,CAAC;EAED/G,KAAK,CAACxS,SAAS,CAAC6d,OAAO,GAAG,SAASA,OAAO,GAAI;IAC5C,OAAO,IAAI,CAACnb,IAAI;EAClB,CAAC;EAED8P,KAAK,CAACxS,SAAS,CAAC8d,UAAU,GAAG,SAASA,UAAU,GAAI;IAClD,OAAO,IAAI,CAAC5Z,OAAO;EACrB,CAAC;EAEDsO,KAAK,CAACxS,SAAS,CAAC+d,cAAc,GAAG,SAASA,cAAc,GAAI;IAC1D,OAAO,IAAI,CAACha,KAAK;EACnB,CAAC;EAEDyO,KAAK,CAACxS,SAAS,CAACge,UAAU,GAAG,SAASA,UAAU,GAAI;IAClD,OAAO,IAAI,CAAClC,OAAO;EACrB,CAAC;EAEDtJ,KAAK,CAACxS,SAAS,CAACie,UAAU,GAAG,SAASA,UAAU,CAAE1E,UAAU,EAAErV,OAAO,EAAE;IACrE,IAAI,CAACqV,UAAU,GAAGA,UAAU;IAC5B,IAAIrV,OAAO,EAAE;MACX,IAAI,CAACga,eAAe,CAACha,OAAO,CAAC;IAC/B;IACAoV,eAAe,CAAC,IAAI,EAAEC,UAAU,CAAC;EACnC,CAAC;EAED/G,KAAK,CAACxS,SAAS,CAACme,UAAU,GAAG,SAASA,UAAU,CAAEja,OAAO,EAAE;IACzD,IAAI,CAACga,eAAe,CAACha,OAAO,CAAC;IAC7B,IAAI,CAACka,MAAM,EAAE;EACf,CAAC;EAED5L,KAAK,CAACxS,SAAS,CAACoe,MAAM,GAAG,SAASA,MAAM,GAAI;IAC1C9E,eAAe,CAAC,IAAI,EAAE,IAAI,CAACE,OAAO,CAAC;EACrC,CAAC;EAEDhH,KAAK,CAACxS,SAAS,CAACqe,WAAW,GAAG,SAASA,WAAW,GAAI;IACpD,IAAI,OAAO,IAAI,CAAC9E,UAAU,KAAK,QAAQ,EAAE;MACvC;MACA,IAAI+E,GAAG,GAAG,IAAI,CAAC/E,UAAU,CAAClN,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG;MACzD,IAAIyK,GAAG,GAAG,IAAI,CAACyC,UAAU,GAAG+E,GAAG,GAAG,IAAI,GAAI,IAAIlc,IAAI,EAAE,CAAE2C,OAAO,EAAE;MAC/DuU,eAAe,CAAC,IAAI,EAAExC,GAAG,CAAC;IAC5B,CAAC,MAAM,IAAI,OAAO,IAAI,CAACyC,UAAU,KAAK,UAAU,EAAE;MAChDD,eAAe,CAAC,IAAI,EAAE,IAAI,CAACC,UAAU,CAAC;IACxC;EACF,CAAC;EAED/G,KAAK,CAACxS,SAAS,CAAC0d,YAAY,GAAG,SAASA,YAAY,GAAI;IACpD,IAAInJ,MAAM,GAAG,IAAI;IAEnB,IAAIkJ,OAAO,GAAG,IAAI,CAACvZ,OAAO,CAACuZ,OAAO;IAElC,IAAIA,OAAO,IAAI,OAAO,IAAI,CAAClE,UAAU,KAAK,QAAQ,IAAI,OAAO,IAAI,CAACA,UAAU,KAAK,UAAU,EAAE;MAC3F,MAAM,IAAItS,KAAK,CAAC,mDAAmD,CAAC;IACtE;IAEA,IAAI,CAAC,IAAI,CAACsX,UAAU,EAAE;MACpB,IAAId,OAAO,EAAE;QACX,IAAI,CAACc,UAAU,GAAGC,WAAW,CAAE,YAAY;UACzCjK,MAAM,CAAC8J,WAAW,EAAE;QACtB,CAAC,EAAEZ,OAAO,GAAG,IAAI,CAAC;MACpB,CAAC,MAAM;QACL,MAAM,IAAIxW,KAAK,CAAC,qBAAqB,CAAC;MACxC;IACF;EACF,CAAC;EAEDuL,KAAK,CAACxS,SAAS,CAACye,WAAW,GAAG,SAASA,WAAW,GAAI;IACpD,IAAI,IAAI,CAACF,UAAU,EAAE;MACnBG,aAAa,CAAC,IAAI,CAACH,UAAU,CAAC;MAC9B,IAAI,CAACA,UAAU,GAAG,IAAI;IACxB;EACF,CAAC;EAED/L,KAAK,CAACxS,SAAS,CAAC6a,OAAO,GAAG,SAASA,OAAO,CAAEjB,QAAQ,EAAE;IACpD,IAAI,IAAI,CAACkC,OAAO,KAAK,SAAS,EAAE;MAC9B,IAAIlC,QAAQ,IAAIA,QAAQ,CAAC+E,UAAU,IAAI/E,QAAQ,CAAC+E,UAAU,KAAK,aAAa,EAAE;QAC5E;QACA,IAAIC,MAAM,GAAG,IAAI,CAAC7a,KAAK,CAACA,KAAK,CAAC6a,MAAM;QACpC,IAAI1O,GAAG,GAAG,IAAI,CAACnM,KAAK,CAACA,KAAK,CAACmM,GAAG;QAC9B,IAAI2O,SAAS,GAAGhG,QAAQ,CAACc,aAAa,CAAC,QAAQ,CAAC;QAChD,IAAImF,MAAM,GAAGD,SAAS,CAACE,UAAU,CAAC,IAAI,CAAC;QACvCF,SAAS,CAACG,KAAK,GAAG9O,GAAG,CAAC0O,MAAM,CAACI,KAAK;QAClCH,SAAS,CAACnK,MAAM,GAAGxE,GAAG,CAAC0O,MAAM,CAAClK,MAAM;QACpCoK,MAAM,CAACG,SAAS,GAAGrF,QAAQ,CAAC+E,UAAU;QACtCG,MAAM,CAACI,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAEL,SAAS,CAACG,KAAK,EAAEH,SAAS,CAACnK,MAAM,CAAC;QACxDoK,MAAM,CAACK,SAAS,CAACP,MAAM,EAAE,CAAC,EAAE,CAAC,CAAC;QAC9B,OAAOC,SAAS,CAACO,SAAS,CAAC,WAAW,CAAC;MACzC,CAAC,MAAM;QACL,OAAO,IAAI,CAACrb,KAAK,CAACsb,aAAa,EAAE;MACnC;IACF,CAAC,MAAM;MACL;MACA;MACA,OAAO,IAAI;IACb;EACF,CAAC;EAED7M,KAAK,CAACxS,SAAS,CAAC0P,OAAO,GAAG,SAASA,OAAO,GAAI;IAC5C,IAAI,IAAI,CAAC+M,eAAe,EAAE;MACxB,IAAI,CAACA,eAAe,CAAC/M,OAAO,CAAC,IAAI,CAAC;IACpC;IAEA,IAAI,IAAI,CAAC4K,YAAY,EAAE;MACrBe,WAAW,CAAC,IAAI,CAACrR,OAAO,EAAE,WAAW,EAAE,IAAI,CAACsQ,YAAY,CAAC;IAC3D;IAEA,IAAI,IAAI,CAACQ,YAAY,EAAE;MACrBO,WAAW,CAAC,IAAI,CAACrR,OAAO,EAAE,UAAU,EAAE,IAAI,CAAC8Q,YAAY,CAAC;IAC1D;EACF,CAAC;EAEDtI,KAAK,CAACxS,SAAS,CAACke,eAAe,GAAG,SAASA,eAAe,CAAEha,OAAO,EAAE;IACnE,IAAIob,aAAa,GAAGpb,OAAO,CAACuZ,OAAO,IAAIvZ,OAAO,CAACuZ,OAAO,KAAK,IAAI,CAACvZ,OAAO,CAACuZ,OAAO;IAC/E,IAAI,CAACvZ,OAAO,GAAGvD,KAAK,CAACf,SAAS,CAACsE,OAAO,EAAEA,OAAO,CAAC;IAChD,IAAIob,aAAa,EAAE;MACjB,IAAI,CAACb,WAAW,EAAE;MAClB,IAAI,CAACf,YAAY,EAAE;IACrB;EACF,CAAC;EAEDlL,KAAK,CAACxS,SAAS,CAACoZ,QAAQ,GAAG,SAASA,QAAQ,GAAI;IAC9C,IAAI,CAAC1W,IAAI,GAAG,IAAI,CAAC6c,aAAa,EAAE;IAChCpD,WAAW,CAAC,IAAI,CAACqD,WAAW,EAAE,EAAE,IAAI,CAAC;EACvC,CAAC;EAEDhN,KAAK,CAACxS,SAAS,CAAC8V,QAAQ,GAAG,SAASA,QAAQ,GAAI;IAC9C,OAAOD,MAAM;EACf,CAAC;EAED,IAAIO,SAAS,GAAG,aAAc,UAAU5D,KAAK,EAAE;IAC7C,SAAS4D,SAAS,GAAI;MACpB5D,KAAK,CAACiN,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;IAC9B;IAEA,IAAKlN,KAAK,EAAG4D,SAAS,CAACuJ,SAAS,GAAGnN,KAAK;IACxC4D,SAAS,CAACpW,SAAS,GAAGD,MAAM,CAAC6f,MAAM,CAAEpN,KAAK,IAAIA,KAAK,CAACxS,SAAS,CAAE;IAC/DoW,SAAS,CAACpW,SAAS,CAAC6f,WAAW,GAAGzJ,SAAS;IAE3CA,SAAS,CAACpW,SAAS,CAACuf,aAAa,GAAG,SAASA,aAAa,GAAI;MAC5D,OAAOpC,aAAa,CAAC,IAAI,CAAC;IAC5B,CAAC;IAED/G,SAAS,CAACpW,SAAS,CAACwf,WAAW,GAAG,SAASA,WAAW,GAAI;MACxD,OAAO,WAAW;IACpB,CAAC;IAED,OAAOpJ,SAAS;EAClB,CAAC,CAAC5D,KAAK,CAAE;EAET,IAAIsN,QAAQ,GAAG,aAAc,UAAUtN,KAAK,EAAE;IAC5C,SAASsN,QAAQ,GAAI;MACnBtN,KAAK,CAACiN,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;IAC9B;IAEA,IAAKlN,KAAK,EAAGsN,QAAQ,CAACH,SAAS,GAAGnN,KAAK;IACvCsN,QAAQ,CAAC9f,SAAS,GAAGD,MAAM,CAAC6f,MAAM,CAAEpN,KAAK,IAAIA,KAAK,CAACxS,SAAS,CAAE;IAC9D8f,QAAQ,CAAC9f,SAAS,CAAC6f,WAAW,GAAGC,QAAQ;IAEzCA,QAAQ,CAAC9f,SAAS,CAACuf,aAAa,GAAG,SAASA,aAAa,GAAI;MAC3D,OAAOlC,aAAa,CAAC,IAAI,CAAC;IAC5B,CAAC;IAEDyC,QAAQ,CAAC9f,SAAS,CAACwf,WAAW,GAAG,SAASA,WAAW,GAAI;MACvD,OAAO,UAAU;IACnB,CAAC;IAED,OAAOM,QAAQ;EACjB,CAAC,CAACtN,KAAK,CAAE;EAET,IAAIuN,WAAW,GAAG,aAAc,UAAUvN,KAAK,EAAE;IAC/C,SAASuN,WAAW,GAAI;MACtBvN,KAAK,CAACiN,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;IAC9B;IAEA,IAAKlN,KAAK,EAAGuN,WAAW,CAACJ,SAAS,GAAGnN,KAAK;IAC1CuN,WAAW,CAAC/f,SAAS,GAAGD,MAAM,CAAC6f,MAAM,CAAEpN,KAAK,IAAIA,KAAK,CAACxS,SAAS,CAAE;IACjE+f,WAAW,CAAC/f,SAAS,CAAC6f,WAAW,GAAGE,WAAW;IAE/CA,WAAW,CAAC/f,SAAS,CAACuf,aAAa,GAAG,SAASA,aAAa,GAAI;MAC9D,OAAOpC,aAAa,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;IACxC,CAAC;IAED4C,WAAW,CAAC/f,SAAS,CAACwf,WAAW,GAAG,SAASA,WAAW,GAAI;MAC1D,OAAO,aAAa;IACtB,CAAC;IAED,OAAOO,WAAW;EACpB,CAAC,CAACvN,KAAK,CAAE;EAET,IAAIwN,QAAQ,GAAG,aAAc,UAAUxN,KAAK,EAAE;IAC5C,SAASwN,QAAQ,GAAI;MACnBxN,KAAK,CAACiN,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;IAC9B;IAEA,IAAKlN,KAAK,EAAGwN,QAAQ,CAACL,SAAS,GAAGnN,KAAK;IACvCwN,QAAQ,CAAChgB,SAAS,GAAGD,MAAM,CAAC6f,MAAM,CAAEpN,KAAK,IAAIA,KAAK,CAACxS,SAAS,CAAE;IAC9DggB,QAAQ,CAAChgB,SAAS,CAAC6f,WAAW,GAAGG,QAAQ;IAEzCA,QAAQ,CAAChgB,SAAS,CAACuf,aAAa,GAAG,SAASA,aAAa,GAAI;MAC3D,OAAOpC,aAAa,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;IACxC,CAAC;IAED6C,QAAQ,CAAChgB,SAAS,CAACwf,WAAW,GAAG,SAASA,WAAW,GAAI;MACvD,OAAO,UAAU;IACnB,CAAC;IAED,OAAOQ,QAAQ;EACjB,CAAC,CAACxN,KAAK,CAAE;EAET,IAAIyN,SAAS,GAAG,aAAc,UAAUzN,KAAK,EAAE;IAC7C,SAASyN,SAAS,GAAI;MACpBzN,KAAK,CAACiN,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;IAC9B;IAEA,IAAKlN,KAAK,EAAGyN,SAAS,CAACN,SAAS,GAAGnN,KAAK;IACxCyN,SAAS,CAACjgB,SAAS,GAAGD,MAAM,CAAC6f,MAAM,CAAEpN,KAAK,IAAIA,KAAK,CAACxS,SAAS,CAAE;IAC/DigB,SAAS,CAACjgB,SAAS,CAAC6f,WAAW,GAAGI,SAAS;IAE3CA,SAAS,CAACjgB,SAAS,CAACuf,aAAa,GAAG,SAASA,aAAa,GAAI;MAC5D,OAAOpC,aAAa,CAAC,IAAI,CAAC;IAC5B,CAAC;IAED8C,SAAS,CAACjgB,SAAS,CAACwf,WAAW,GAAG,SAASA,WAAW,GAAI;MACxD,OAAO,WAAW;IACpB,CAAC;IAED,OAAOS,SAAS;EAClB,CAAC,CAACzN,KAAK,CAAE;EAET,IAAI8D,QAAQ,GAAG,aAAc,UAAU9D,KAAK,EAAE;IAC5C,SAAS8D,QAAQ,GAAI;MACnB9D,KAAK,CAACiN,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;IAC9B;IAEA,IAAKlN,KAAK,EAAG8D,QAAQ,CAACqJ,SAAS,GAAGnN,KAAK;IACvC8D,QAAQ,CAACtW,SAAS,GAAGD,MAAM,CAAC6f,MAAM,CAAEpN,KAAK,IAAIA,KAAK,CAACxS,SAAS,CAAE;IAC9DsW,QAAQ,CAACtW,SAAS,CAAC6f,WAAW,GAAGvJ,QAAQ;IAEzCA,QAAQ,CAACtW,SAAS,CAACuf,aAAa,GAAG,SAASA,aAAa,GAAI;MAC3D,OAAOlC,aAAa,CAAC,IAAI,CAAC;IAC5B,CAAC;IAED/G,QAAQ,CAACtW,SAAS,CAACwf,WAAW,GAAG,SAASA,WAAW,GAAI;MACvD,OAAO,UAAU;IACnB,CAAC;IAED,OAAOlJ,QAAQ;EACjB,CAAC,CAAC9D,KAAK,CAAE;EAET,IAAI0N,YAAY,GAAG,aAAc,UAAU1N,KAAK,EAAE;IAChD,SAAS0N,YAAY,GAAI;MACvB1N,KAAK,CAACiN,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;IAC9B;IAEA,IAAKlN,KAAK,EAAG0N,YAAY,CAACP,SAAS,GAAGnN,KAAK;IAC3C0N,YAAY,CAAClgB,SAAS,GAAGD,MAAM,CAAC6f,MAAM,CAAEpN,KAAK,IAAIA,KAAK,CAACxS,SAAS,CAAE;IAClEkgB,YAAY,CAAClgB,SAAS,CAAC6f,WAAW,GAAGK,YAAY;IAEjDA,YAAY,CAAClgB,SAAS,CAACuf,aAAa,GAAG,SAASA,aAAa,GAAI;MAC/D,OAAOpC,aAAa,CAAC,IAAI,EAAE,QAAQ,CAAC;IACtC,CAAC;IAED+C,YAAY,CAAClgB,SAAS,CAACwf,WAAW,GAAG,SAASA,WAAW,GAAI;MAC3D,OAAO,cAAc;IACvB,CAAC;IAED,OAAOU,YAAY;EACrB,CAAC,CAAC1N,KAAK,CAAE;EAET,IAAI2N,WAAW,GAAG,aAAc,UAAU3N,KAAK,EAAE;IAC/C,SAAS2N,WAAW,GAAI;MACtB3N,KAAK,CAACiN,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;IAC9B;IAEA,IAAKlN,KAAK,EAAG2N,WAAW,CAACR,SAAS,GAAGnN,KAAK;IAC1C2N,WAAW,CAACngB,SAAS,GAAGD,MAAM,CAAC6f,MAAM,CAAEpN,KAAK,IAAIA,KAAK,CAACxS,SAAS,CAAE;IACjEmgB,WAAW,CAACngB,SAAS,CAAC6f,WAAW,GAAGM,WAAW;IAE/CA,WAAW,CAACngB,SAAS,CAACuf,aAAa,GAAG,SAASA,aAAa,GAAI;MAC9D,OAAOpC,aAAa,CAAC,IAAI,EAAE,QAAQ,CAAC;IACtC,CAAC;IAEDgD,WAAW,CAACngB,SAAS,CAACwf,WAAW,GAAG,SAASA,WAAW,GAAI;MAC1D,OAAO,aAAa;IACtB,CAAC;IAED,OAAOW,WAAW;EACpB,CAAC,CAAC3N,KAAK,CAAE;EAET,IAAI6D,QAAQ,GAAG,aAAc,UAAU7D,KAAK,EAAE;IAC5C,SAAS6D,QAAQ,GAAI;MACnB7D,KAAK,CAACiN,KAAK,CAAC,IAAI,EAAEC,SAAS,CAAC;IAC9B;IAEA,IAAKlN,KAAK,EAAG6D,QAAQ,CAACsJ,SAAS,GAAGnN,KAAK;IACvC6D,QAAQ,CAACrW,SAAS,GAAGD,MAAM,CAAC6f,MAAM,CAAEpN,KAAK,IAAIA,KAAK,CAACxS,SAAS,CAAE;IAC9DqW,QAAQ,CAACrW,SAAS,CAAC6f,WAAW,GAAGxJ,QAAQ;IAEzCA,QAAQ,CAACrW,SAAS,CAACuf,aAAa,GAAG,SAASA,aAAa,GAAI;MAC3D,IAAI/c,CAAC;QAAEE,IAAI,GAAG,IAAI,CAAC8W,OAAO;MAC1B,KAAKhX,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGE,IAAI,CAACC,MAAM,EAAEH,CAAC,EAAE,EAAE;QAChCE,IAAI,CAACF,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGO,MAAM,CAACL,IAAI,CAACF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/BE,IAAI,CAACF,CAAC,CAAC,CAAC,CAAC,CAAC,GAAGO,MAAM,CAACL,IAAI,CAACF,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACjC;MACA,OAAOE,IAAI;IACb,CAAC;IAED2T,QAAQ,CAACrW,SAAS,CAACwf,WAAW,GAAG,SAASA,WAAW,GAAI;MACvD,OAAO,UAAU;IACnB,CAAC;IAED,OAAOnJ,QAAQ;EACjB,CAAC,CAAC7D,KAAK,CAAE;EAET,IAAI5S,SAAS,GAAG;IACdwW,SAAS,EAAEA,SAAS;IACpB0J,QAAQ,EAAEA,QAAQ;IAClBC,WAAW,EAAEA,WAAW;IACxBC,QAAQ,EAAEA,QAAQ;IAClBC,SAAS,EAAEA,SAAS;IACpB3J,QAAQ,EAAEA,QAAQ;IAClB4J,YAAY,EAAEA,YAAY;IAC1BC,WAAW,EAAEA,WAAW;IACxB9J,QAAQ,EAAEA,QAAQ;IAClBJ,MAAM,EAAE,CAAC,CAAC;IACVmK,SAAS,EAAE,UAAUlc,OAAO,EAAE;MAC5B,KAAK,IAAIzD,GAAG,IAAIyD,OAAO,EAAE;QACvB,IAAIA,OAAO,CAACd,cAAc,CAAC3C,GAAG,CAAC,EAAE;UAC/BoV,MAAM,CAACpV,GAAG,CAAC,GAAGyD,OAAO,CAACzD,GAAG,CAAC;QAC5B;MACF;IACF,CAAC;IACD4f,iBAAiB,EAAE,UAAUrc,IAAI,EAAE;MACjCpE,SAAS,CAACsE,OAAO,GAAGF,IAAI;IAC1B,CAAC;IACDsc,SAAS,EAAE,UAAUnW,QAAQ,EAAE;MAC7B,KAAK,IAAIoW,OAAO,IAAI3gB,SAAS,CAACqW,MAAM,EAAE;QACpC,IAAIrW,SAAS,CAACqW,MAAM,CAAC7S,cAAc,CAACmd,OAAO,CAAC,EAAE;UAC5CpW,QAAQ,CAACvK,SAAS,CAACqW,MAAM,CAACsK,OAAO,CAAC,CAAC;QACrC;MACF;IACF,CAAC;IACD1K,MAAM,EAAEA,MAAM;IACd3R,OAAO,EAAE,CAAC,CAAC;IACXyU,QAAQ,EAAEA,QAAQ;IAClBiD,UAAU,EAAEA,UAAU;IACtB4E,GAAG,EAAE,UAAS1E,OAAO,EAAE;MACrBF,UAAU,CAACE,OAAO,CAAC;MACnB,OAAOlc,SAAS;IAClB;EACF,CAAC;;EAED;EACA,IAAI,OAAOgQ,MAAM,KAAK,WAAW,IAAI,CAACA,MAAM,CAAChQ,SAAS,EAAE;IACtDgQ,MAAM,CAAChQ,SAAS,GAAGA,SAAS;EAC9B;;EAEA;EACAA,SAAS,CAAC6gB,OAAO,GAAG7gB,SAAS;EAE7B,OAAOA,SAAS;AAElB,CAAC,CAAE"},"metadata":{},"sourceType":"script"}